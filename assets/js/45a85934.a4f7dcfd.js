"use strict";(self.webpackChunkevents_app=self.webpackChunkevents_app||[]).push([[203],{3965:(e,t,a)=>{a.d(t,{Z:()=>U});var n=a(1314),l=a(6010),r=a(1217),s=a(7294);const c="container_UHDD",i="navbar_diMJ",o="button_jVKi",m="scrollContainer_A12N",d="fullscreen_y9b4",u="table_vwM1",E="editMode_fWke";var p=a(5317),v=a(9346),h=a(7462),f=a(6363);const g=e=>{const[t,a]=s.useState("none");s.useEffect((()=>{if(["none","spin"].includes(t))return;const e=setTimeout((()=>a("none")),2e3);return()=>clearTimeout(e)}),[t]);let n=e.icon??s.createElement(f.CK,{size:e.size});switch(t){case"spin":n=s.createElement(f.gb,{size:e.size});break;case"copied":n=s.createElement(f.fB,{size:e.size});break;case"error":n=s.createElement(f.jj,{size:e.size})}return s.createElement(v.Z,(0,h.Z)({title:"Kopieren"},(0,v.g)(e),{onClick:t=>{t.preventDefault(),t.stopPropagation(),a("spin"),navigator.clipboard.writeText(e.value).then((()=>{a("copied")})).catch((()=>{a("error")}))},icon:n}))};var N=a(4655);const Z={datePicker:"datePicker_t_wz",gbsl:"gbsl_NEvy",fms:"fms_DQ2z",wms:"wms_Jav2",eventRow:"eventRow_JClS",kw:"kw_oYUj",weekday:"weekday_oD07",description:"description_ymu7",location:"location_WWN0",descriptionLong:"descriptionLong_UX1h",classes:"classes_ygPH",departmentNames:"departmentNames_zFY4",editMode:"editMode_V7Fu",expanded:"expanded_WZ86"};var S=a(6809);const b=(0,r.Pi)((e=>{const[t,a]=s.useState(!1),r=(0,n.o)("viewStore"),{eventTable:c}=r,{event:i}=e;return s.createElement("tr",{"data-id":i.id,onClick:()=>{t||a(!0)},onBlur:()=>{a(!1)},className:(0,l.W)(Z.eventRow,t&&Z.expanded,e.editMode&&Z.editMode)},s.createElement("td",{className:(0,l.W)(Z.kw)},i.kw),s.createElement("td",{className:(0,l.W)(Z.weekday)},i.weekday),s.createElement("td",{style:{maxWidth:c.maxWidthDescription},className:(0,l.W)(Z.description)},i.description),s.createElement("td",{className:(0,l.W)(Z.startDate)},i.fStartDate),s.createElement("td",{className:(0,l.W)(Z.startTime)},i.fStartTime),s.createElement("td",{className:(0,l.W)(Z.endDate)},i.fEndDate),s.createElement("td",{className:(0,l.W)(Z.endTime)},i.fEndTime),s.createElement("td",{className:(0,l.W)(Z.location),style:{maxWidth:c.maxWidthLocation}},i.location),s.createElement("td",{className:(0,l.W)(Z.departmentNames)},i.departmentNames.map(((e,t)=>s.createElement("span",{key:t,className:(0,l.W)("badge","badge--primary",Z.badge,Z[e.toLowerCase()])},e)))),s.createElement("td",{className:(0,l.W)(Z.classes)},i.classes.map(((e,t)=>s.createElement("span",{key:t,className:(0,l.W)("badge","badge--secondary")},e)))),s.createElement("td",{className:(0,l.W)(Z.descriptionLong),style:{maxWidth:c.maxWidthDescriptionLong}},i.descriptionLong),i.isEditable&&s.createElement("td",null,s.createElement(N.Z,{onClick:()=>i.setEditing(!0)})),i.isPublic&&s.createElement(s.Fragment,null,s.createElement("td",null,s.createElement(g,{value:`${S.default.customFields.DOMAIN}${i.shareUrl}`,size:f.yd})),s.createElement("td",null,s.createElement(v.Z,{icon:s.createElement(f.JO,{path:p.Ttp,color:"blue",size:f.yd}),href:i.shareUrl,target:"_self"}))))}));var y=a(8949),k=a(8517),C=a(6871),w=a(2624),W=a(1687);const x="container_u2Ul",_="select_SnI8";var z=a(9740);const D=(0,r.Pi)((e=>{const t=(0,n.o)("eventStore"),a=(0,n.o)("untisStore"),r=t.find(e.eventId);return s.createElement("div",{className:(0,l.Z)(x)},s.createElement(z.ZP,{menuPortalTarget:document.body,styles:{menuPortal:e=>({...e,zIndex:9999}),valueContainer:e=>({...e,flexBasis:"12em"})},className:(0,l.Z)(_),classNamePrefix:"select",value:r.classes.map((e=>{var t;return{label:e,value:(null==(t=a.findClassByName(e))?void 0:t.id)||"-"}})),options:a.sortedClasses.slice().map((e=>({value:e.id,label:`${e.name}`}))),onChange:(0,y.aD)((e=>{e&&r.classes.replace(e.map((e=>e.label)))})),isMulti:!0,isSearchable:!0,isClearable:!0}))}));var P=a(6330);const F=e=>s.createElement("div",null,s.createElement("input",{type:"datetime-local",value:(0,P.g7)(e.date).toISOString().substring(0,16),onChange:t=>{const a=new Date(t.currentTarget.value);e.onChange((0,P.g7)(a))}})),I="container_aNPG",L="select_EFlv",T=(0,r.Pi)((e=>{const t=(0,n.o)("eventStore"),a=(0,n.o)("departmentStore"),r=t.find(e.eventId);return s.createElement("div",{className:(0,l.Z)(I)},s.createElement(z.ZP,{menuPortalTarget:document.body,styles:{menuPortal:e=>({...e,zIndex:9999}),valueContainer:e=>({...e,flexBasis:"12em"})},className:(0,l.Z)(L),classNamePrefix:"select",value:r.departmentIds.map((e=>({label:a.find(e).name,value:e}))),options:a.departments.slice().map((e=>({value:e.id,label:`${e.name}`}))),onChange:(0,y.aD)((e=>{e&&r.departmentIds.replace(e.map((e=>e.value)))})),isMulti:!0,isSearchable:!0,isClearable:!0}))})),M=e=>{const t=e.maxChars||80,{text:a}=e,n=Math.ceil(a.length/t);return s.createElement("div",null,s.createElement("textarea",{value:e.text,wrap:"soft",rows:Math.max(2,n),onChange:t=>{e.onChange(t.currentTarget.value.replace(/\n\r?/g," ").replace(/\s+/g," "))}}))};var B=a(1923);const O=(0,r.Pi)((e=>{const{event:t}=e,a=(0,n.o)("viewStore"),{eventTable:r}=a,c=s.useRef(null);return s.useEffect((()=>{c.current&&c.current.scrollIntoView({behavior:"smooth",block:"center"})}),[c]),s.createElement("tr",{"data-id":t.id,className:(0,l.W)(Z.eventRow,Z.editMode)},s.createElement("td",{className:(0,l.W)(Z.kw)},t.kw),s.createElement("td",{className:(0,l.W)(Z.weekday)},t.weekday),s.createElement("td",{style:{maxWidth:r.maxWidthDescription},className:(0,l.W)(Z.description)},s.createElement(M,{maxChars:20,text:t.description,onChange:e=>t.update({description:e})})),s.createElement("td",{className:(0,l.W)(Z.startDate),colSpan:2},s.createElement(F,{date:t.start,onChange:e=>t.update({start:e.toISOString()})})),s.createElement("td",{className:(0,l.W)(Z.endDate),colSpan:2},s.createElement(F,{date:t.end,onChange:e=>t.update({end:e.toISOString()})})),s.createElement("td",{className:(0,l.W)(Z.location),style:{maxWidth:r.maxWidthLocation}},s.createElement(B.Z,{text:t.location,onChange:e=>t.update({location:e})})),s.createElement("td",{className:(0,l.W)(Z.departmentNames)},s.createElement(T,{eventId:t.id})),s.createElement("td",{className:(0,l.W)(Z.classes)},s.createElement(D,{eventId:t.id})),s.createElement("td",{className:(0,l.W)(Z.descriptionLong),style:{maxWidth:r.maxWidthDescriptionLong}},s.createElement(M,{maxChars:30,text:t.descriptionLong,onChange:e=>t.update({descriptionLong:e})})),s.createElement("td",null,s.createElement("div",{ref:c},s.createElement(w.Z,{onClick:()=>t.reset()}),s.createElement(W.Z,{disabled:!t.isDirty,onClick:()=>t.save(),apiState:t.apiStateFor(`save-${t.id}`)}),s.createElement(C.Z,{onClick:()=>t.destroy(),apiState:t.apiStateFor(`destroy-${t.id}`)}))),t.isPublic&&s.createElement(s.Fragment,null,s.createElement("td",null,s.createElement(g,{value:`${S.default.customFields.DOMAIN}${t.shareUrl}`,size:f.yd})),s.createElement("td",null,s.createElement(v.Z,{icon:s.createElement(f.JO,{path:p.Ttp,color:"blue",size:f.yd}),href:t.shareUrl,target:"_self"}))))})),U=(0,r.Pi)((e=>{var t;const a=(0,n.o)("viewStore"),r=s.useRef(null);s.useEffect((()=>{const t=a.fullscreen;return e.showFullscreenButton&&a.setShowFullscreenButton(!0),()=>a.setShowFullscreenButton(t)}),[]),s.useEffect((()=>{const e=()=>{if(r.current){a.eventTable.setClientWidth(r.current.clientWidth);const e=parseFloat(getComputedStyle(r.current).fontSize);a.eventTable.setBaseFontSize(e)}};return r.current&&(window.addEventListener("resize",e),e()),()=>window.removeEventListener("resize",e)}),[r,a]),s.useEffect((()=>(0,y.U5)((()=>a.fullscreen),(e=>{var t;e?null==(t=r.current)||t.requestFullscreen():document.fullscreenElement&&document.exitFullscreen()}))),[]),s.useEffect((()=>{const e=()=>{!!document.fullscreenElement!==a.fullscreen&&a.setFullscreen(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",e),()=>document.removeEventListener("fullscreenchange",e)}),[]);const p=null==(t=(0,n.o)("userStore").current)?void 0:t.id,v=e.events.some((e=>e.editing));return s.createElement("div",{className:(0,l.Z)(c),ref:r},a.fullscreen&&s.createElement("div",{className:(0,l.Z)(i)},s.createElement("div",{className:(0,l.Z)(o)},s.createElement(k.Z,null))),s.createElement("div",{className:(0,l.Z)(m,a.fullscreen&&d)},s.createElement("table",{className:(0,l.Z)(u)},s.createElement("thead",null,s.createElement("tr",{className:(0,l.Z)(v&&E)},s.createElement("th",null,"KW"),s.createElement("th",null,"Tag"),s.createElement("th",null,"Stichwort"),s.createElement("th",null,"Start"),s.createElement("th",null,"Zeit"),s.createElement("th",null,"Ende"),s.createElement("th",null,"Zeit"),s.createElement("th",null,"Ort"),s.createElement("th",null,"Schulen"),s.createElement("th",null,"Klassen"),s.createElement("th",null,"Beschreibung"))),s.createElement("tbody",null,e.events.map((e=>e.editing?s.createElement(O,{key:e.id,event:e,locked:e.authorId!==p}):s.createElement(b,{key:e.id,event:e,locked:e.authorId!==p,editMode:v})))))))}))},6871:(e,t,a)=>{a.d(t,{Z:()=>o});var n=a(7462),l=a(7294),r=a(6010),s=a(8542),c=a(6363),i=a(9346);const o=e=>{const t=l.useRef(null),[a,o]=l.useState(!1),m=()=>{o(!1),document.removeEventListener("click",m)};l.useEffect((()=>()=>{document.removeEventListener("click",m)}),[]),l.useEffect((()=>{a&&t.current&&t.current.scrollIntoView({behavior:"smooth",block:"center"})}),[a,t]);const d=a?l.createElement(i.Z,{className:(0,r.Z)(s.Z.confirm,"button","button--danger"),onClick:t=>{t.stopPropagation(),t.preventDefault(),e.onClick()},text:"Ja, l\xf6schen!"}):null;return l.createElement("span",{className:(0,r.Z)(s.Z.delete,a&&s.Z.expanded,e.className),ref:t},"left"===(e.flyoutSide??"left")&&d,l.createElement(i.Z,(0,n.Z)({title:"L\xf6schen"},(0,i.g)(e),{className:(0,r.Z)(e.className,s.Z.delete,"right"===e.flyoutSide&&s.Z.right,e.className),onClick:e=>{o(!a),document.addEventListener("click",m),e.stopPropagation(),e.preventDefault()},icon:l.createElement(c.pJ,{size:e.size??c.yd})})),"right"===e.flyoutSide&&d)}},2624:(e,t,a)=>{a.d(t,{Z:()=>o});var n=a(7462),l=a(7294),r=a(6010),s=a(8542),c=a(6363),i=a(9346);const o=e=>l.createElement(i.Z,(0,n.Z)({title:"\xc4nderungen verwerfen"},(0,i.g)(e),{className:(0,r.Z)(s.Z.discard,"button--secondary","button--sm",e.className),onClick:e.onClick,icon:l.createElement(c.wq,{size:e.size??c.yd})}))},4655:(e,t,a)=>{a.d(t,{Z:()=>o});var n=a(7462),l=a(7294),r=a(6010),s=a(8542),c=a(6363),i=a(9346);const o=e=>l.createElement(i.Z,(0,n.Z)({title:"Bearbeiten"},(0,i.g)(e),{className:(0,r.Z)(s.Z.edit,"button--warning",e.className),onClick:e.onClick,icon:l.createElement(c.dY,{size:e.size??c.yd})}))},1687:(e,t,a)=>{a.d(t,{Z:()=>o});var n=a(7462),l=a(7294),r=a(6010),s=a(8542),c=a(6363),i=a(9346);const o=e=>l.createElement(i.Z,(0,n.Z)({title:"Speichern"},(0,i.g)(e),{className:(0,r.Z)(s.Z.save,e.className),onClick:e.onClick,icon:l.createElement(c.N,{size:e.size??c.yd,disabled:e.disabled})}))},3962:(e,t,a)=>{a.d(t,{Z:()=>E});var n=a(7462),l=a(7294),r=a(6010),s=a(2389),c=a(6043);const i="details_XTtI",o="isBrowser_Z1r4",m="collapsibleContent_dVni";function d(e){return!!e&&("SUMMARY"===e.tagName||d(e.parentElement))}function u(e,t){return!!e&&(e===t||u(e.parentElement,t))}const E=e=>{let{summary:t,children:a,...E}=e;const p=(0,s.Z)(),v=(0,l.useRef)(null),{collapsed:h,setCollapsed:f}=(0,c.u)({initialState:!E.open}),[g,N]=(0,l.useState)(E.open),Z=l.isValidElement(t)?t:l.createElement("summary",null,t??"Details");return l.createElement("details",(0,n.Z)({},E,{ref:v,open:g,"data-collapsed":h,className:(0,r.Z)("alert","alert--info",i,p&&o,E.className),onMouseDown:e=>{d(e.target)&&e.detail>1&&e.preventDefault()},onClick:e=>{e.stopPropagation();const t=e.target;d(t)&&u(t,v.current)&&(e.preventDefault(),h?(f(!1),N(!0)):f(!0))}}),Z,l.createElement(c.z,{lazy:!0,collapsed:h,disableSSRStyle:!0,onCollapseTransitionEnd:e=>{f(e),N(!e)}},l.createElement("div",{className:m},a)))}},1923:(e,t,a)=>{a.d(t,{Z:()=>l});var n=a(7294);const l=e=>n.createElement("div",null,n.createElement("input",{type:"text",value:e.text,onChange:t=>{e.onChange(t.currentTarget.value)}}))},2550:(e,t,a)=>{a.r(t),a.d(t,{default:()=>h});var n=a(7294),l=a(1217),r=a(6910),s=a(3965),c=a(1314),i=a(3962),o=a(6871),m=a(6010),d=a(6330),u=a(9346),E=a(5317),p=a(6363);const v=(0,l.Pi)((e=>{const t=(0,c.o)("eventStore");return n.createElement(u.Z,{text:"Neues Event",icon:n.createElement(p.JO,{path:E.jxF,size:p.NO}),iconSide:"left",className:(0,m.Z)("button--primary"),apiState:t.apiStateFor("create"),onClick:()=>{const e=(0,d.g7)(new Date),a=new Date(e);a.setHours(a.getHours()+1),t.create({start:e.toISOString(),end:a.toISOString()})}})})),h=(0,l.Pi)((()=>{var e;const t=(0,c.o)("eventStore"),a=(0,c.o)("userStore"),l=(0,c.o)("jobStore"),m=null==(e=a.current)?void 0:e.id;return n.createElement(r.Z,null,n.createElement("div",null,n.createElement(v,null),n.createElement(s.Z,{events:t.byUser(m).filter((e=>!e.jobId)),showFullscreenButton:!1}),l.importJobs.map(((e,t)=>{var a;return n.createElement(i.Z,{key:t,summary:n.createElement("summary",null,null==(a=e.user)?void 0:a.email," - ",e.filename||"|"," - ",e.state," - ",e.events.length)},n.createElement("div",null,n.createElement(o.Z,{onClick:()=>{l.destroy(e)},text:"L\xf6schen",flyoutSide:"right",iconSide:"right",apiState:l.apiStateFor(`destroy-${e.id}`)}),n.createElement(s.Z,{events:e.events,showFullscreenButton:!1})))}))))}))}}]);