"use strict";(self.webpackChunkevents_app=self.webpackChunkevents_app||[]).push([[611],{1997:(e,t,n)=>{n.d(t,{Z:()=>P});var a=n(1314),l=n(6010),s=n(1217),r=n(7294);const c="container_UHDD",o="navbar_diMJ",m="button_jVKi",i="scrollContainer_A12N",d="fullscreen_y9b4",u="table_vwM1";var E=n(4655);const v={datePicker:"datePicker_t_wz",gbsl:"gbsl_NEvy",fms:"fms_DQ2z",wms:"wms_Jav2",eventRow:"eventRow_JClS",kw:"kw_oYUj",weekday:"weekday_oD07",description:"description_ymu7",location:"location_WWN0",descriptionLong:"descriptionLong_UX1h",edit:"edit_M9_w",expanded:"expanded_WZ86"},p=(0,s.Pi)(r.forwardRef(((e,t)=>{const[n,s]=r.useState(!1),c=(0,a.o)("viewStore"),{eventTable:o}=c,{event:m}=e;return r.createElement("tr",{ref:t,"data-id":m.id,onClick:()=>{n||s(!0)},onBlur:()=>{s(!1)},className:(0,l.W)(v.eventRow,n&&v.expanded)},r.createElement("td",{className:(0,l.W)(v.kw)},m.kw),r.createElement("td",{className:(0,l.W)(v.weekday)},m.weekday),r.createElement("td",{style:{maxWidth:o.maxWidthDescription},className:(0,l.W)(v.description)},m.description),r.createElement("td",{className:(0,l.W)(v.startDate)},m.fStartDate),r.createElement("td",{className:(0,l.W)(v.startTime)},m.fStartTime),r.createElement("td",{className:(0,l.W)(v.endDate)},m.fEndDate),r.createElement("td",{className:(0,l.W)(v.endTime)},m.fEndTime),r.createElement("td",{className:(0,l.W)(v.location),style:{maxWidth:o.maxWidthLocation}},m.location),r.createElement("td",{className:(0,l.W)(v.departmentNames)},m.departmentNames.map(((e,t)=>r.createElement("span",{key:t,className:(0,l.W)("badge","badge--primary",v.badge,v[e.toLowerCase()])},e)))),r.createElement("td",{className:(0,l.W)(v.classes)},m.classes.map(((e,t)=>r.createElement("span",{key:t,className:(0,l.W)("badge","badge--secondary")},e)))),r.createElement("td",{className:(0,l.W)(v.descriptionLong),style:{maxWidth:o.maxWidthDescriptionLong}},m.descriptionLong),m.isEditable&&r.createElement("td",null,r.createElement(E.Z,{onClick:()=>m.setEditing(!0)})))})));var h=n(8949),g=n(8517),b=n(6871),f=n(2624),N=n(1687);const w="container_u2Ul",Z="select_SnI8";var W=n(4374);const k=(0,s.Pi)((e=>{const t=(0,a.o)("eventStore"),n=(0,a.o)("untisStore"),s=t.find(e.eventId);return r.createElement("div",{className:(0,l.Z)(w)},r.createElement(W.ZP,{menuPortalTarget:document.body,styles:{menuPortal:e=>({...e,zIndex:9999})},className:(0,l.Z)(Z),classNamePrefix:"select",value:s.classes.map((e=>{var t;return{label:e,value:(null==(t=n.findClassByName(e))?void 0:t.id)||"-"}})),options:n.sortedClasses.slice().map((e=>({value:e.id,label:`${e.name}`}))),onChange:(0,h.aD)((e=>{console.log(e),e&&s.classes.replace(e.map((e=>e.label)))})),isMulti:!0,isSearchable:!0,isClearable:!0}))})),C=e=>{const t=new Date(e.date.getTime());return t.setHours(t.getHours()-t.getTimezoneOffset()/60),r.createElement("div",null,r.createElement("input",{type:"datetime-local",value:t.toISOString().substring(0,16),onChange:t=>{const n=new Date(t.currentTarget.value);n.setHours(n.getHours()),console.log(n),e.onChange(n)}}))},S="container_aNPG",y="select_EFlv",x=(0,s.Pi)((e=>{const t=(0,a.o)("eventStore"),n=(0,a.o)("departmentStore"),s=t.find(e.eventId);return r.createElement("div",{className:(0,l.Z)(S)},r.createElement(W.ZP,{menuPortalTarget:document.body,styles:{menuPortal:e=>({...e,zIndex:9999})},className:(0,l.Z)(y),classNamePrefix:"select",value:s.departmentIds.map((e=>({label:n.find(e).name,value:e}))),options:n.departments.slice().map((e=>({value:e.id,label:`${e.name}`}))),onChange:(0,h.aD)((e=>{e&&s.departmentIds.replace(e.map((e=>e.value)))})),isMulti:!0,isSearchable:!0,isClearable:!0}))})),_=e=>{const t=e.maxChars||80,{text:n}=e,a=Math.ceil(n.length/t);return r.createElement("div",null,r.createElement("textarea",{value:e.text,wrap:"soft",rows:Math.max(2,a),onChange:t=>{e.onChange(t.currentTarget.value.replace(/\n\r?/g," ").replace(/\s+/g," "))}}))};var D=n(1923);const L=(0,s.Pi)(r.forwardRef(((e,t)=>{const{event:n}=e,s=(0,a.o)("viewStore"),{eventTable:c}=s;return r.createElement("tr",{ref:t,"data-id":n.id,className:(0,l.W)(v.eventRow)},r.createElement("td",{className:(0,l.W)(v.kw)},n.kw),r.createElement("td",{className:(0,l.W)(v.weekday)},n.weekday),r.createElement("td",{style:{maxWidth:c.maxWidthDescription},className:(0,l.W)(v.description)},r.createElement(_,{maxChars:20,text:n.description,onChange:e=>n.update({description:e})})),r.createElement("td",{className:(0,l.W)(v.startDate),colSpan:2},r.createElement(C,{date:n.start,onChange:e=>n.update({start:e.toISOString()})})),r.createElement("td",{className:(0,l.W)(v.endDate),colSpan:2},r.createElement(C,{date:n.end,onChange:e=>n.update({end:e.toISOString()})})),r.createElement("td",{className:(0,l.W)(v.location),style:{maxWidth:c.maxWidthLocation}},r.createElement(D.Z,{text:n.location,onChange:e=>n.update({location:e})})),r.createElement("td",{className:(0,l.W)(v.departmentNames)},r.createElement(x,{eventId:n.id})),r.createElement("td",{className:(0,l.W)(v.classes)},r.createElement(k,{eventId:n.id})),r.createElement("td",{className:(0,l.W)(v.descriptionLong),style:{maxWidth:c.maxWidthDescriptionLong}},r.createElement(_,{maxChars:30,text:n.descriptionLong,onChange:e=>n.update({descriptionLong:e})})),r.createElement("td",null,r.createElement(f.Z,{onClick:()=>n.reset()}),n.isDirty&&r.createElement(N.Z,{onClick:()=>n.save()}),r.createElement(b.Z,{onClick:()=>n.destroy()})))}))),P=(0,s.Pi)((e=>{var t;const n=(0,a.o)("viewStore"),s=r.useRef(null);r.useEffect((()=>{const t=n.fullscreen;return e.showFullscreenButton&&n.setShowFullscreenButton(!0),()=>n.setShowFullscreenButton(t)}),[]),r.useEffect((()=>{const e=()=>{if(s.current){n.eventTable.setClientWidth(s.current.clientWidth);const e=parseFloat(getComputedStyle(s.current).fontSize);n.eventTable.setBaseFontSize(e)}};return s.current&&(window.addEventListener("resize",e),e()),()=>window.removeEventListener("resize",e)}),[s,n]),r.useEffect((()=>(0,h.U5)((()=>n.fullscreen),(e=>{var t;e?null==(t=s.current)||t.requestFullscreen():document.fullscreenElement&&document.exitFullscreen();console.log("fullscreen",n.fullscreen)}))),[]),r.useEffect((()=>{const e=()=>{!!document.fullscreenElement!==n.fullscreen&&n.setFullscreen(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",e),()=>document.removeEventListener("fullscreenchange",e)}),[]);const E=null==(t=(0,a.o)("userStore").current)?void 0:t.id;return r.createElement("div",{className:(0,l.Z)(c),ref:s},n.fullscreen&&r.createElement("div",{className:(0,l.Z)(o)},r.createElement("div",{className:(0,l.Z)(m)},r.createElement(g.Z,null))),r.createElement("div",{className:(0,l.Z)(i,n.fullscreen&&d)},r.createElement("table",{className:(0,l.Z)(u)},r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",null,"KW"),r.createElement("th",null,"Tag"),r.createElement("th",null,"Stichwort"),r.createElement("th",null,"Start"),r.createElement("th",null,"Zeit"),r.createElement("th",null,"Ende"),r.createElement("th",null,"Zeit"),r.createElement("th",null,"Ort"),r.createElement("th",null,"Schulen"),r.createElement("th",null,"Klassen"),r.createElement("th",null,"Beschreibung"))),r.createElement("tbody",null,e.events.map((e=>e.editing?r.createElement(L,{key:e.id,event:e,locked:e.authorId!==E}):r.createElement(p,{key:e.id,event:e,locked:e.authorId!==E})))))))}))},6871:(e,t,n)=>{n.d(t,{Z:()=>c});var a=n(7294),l=n(6010),s=n(8542),r=n(6363);const c=e=>{const[t,n]=a.useState(!1),c=()=>{n(!1),document.removeEventListener("click",c)};return a.useEffect((()=>()=>{console.log("rem"),document.removeEventListener("click",c)}),[]),a.createElement("span",{className:(0,l.Z)(s.Z.delete)},a.createElement("button",{className:(0,l.Z)(s.Z.button,s.Z.delete,"button","button--danger","button--sm"),title:"L\xf6schen",onClick:e=>{console.log("add el",t),n(!t),document.addEventListener("click",c),e.stopPropagation(),e.preventDefault()}},a.createElement(r.pJ,{size:.8})),t&&a.createElement("div",{className:(0,l.Z)(s.Z.confirm,"button","button--danger"),onClick:t=>{console.log("pressed"),t.stopPropagation(),t.preventDefault(),e.onClick()}},"Ja, L\xf6schen!"))}},2624:(e,t,n)=>{n.d(t,{Z:()=>c});var a=n(7294),l=n(6010),s=n(8542),r=n(6363);const c=e=>a.createElement("button",{className:(0,l.Z)(s.Z.button,s.Z.discard,"button","button--secondary","button--sm"),title:"\xc4nderungen verwerfen",onClick:e.onClick},a.createElement(r.wq,{size:.8}))},4655:(e,t,n)=>{n.d(t,{Z:()=>c});var a=n(7294),l=n(6010),s=n(8542),r=n(6363);const c=e=>a.createElement("button",{className:(0,l.Z)(s.Z.button,s.Z.edit,"button","button--info","button--sm"),title:"Bearbeiten",onClick:e.onClick},a.createElement(r.dY,{size:.8}))},1687:(e,t,n)=>{n.d(t,{Z:()=>c});var a=n(7294),l=n(6010),s=n(8542),r=n(6363);const c=e=>a.createElement("button",{className:(0,l.Z)(s.Z.button,s.Z.save,"button","button--success","button--sm"),title:"Speichern",onClick:e.onClick},a.createElement(r.N,{size:.8}))},1923:(e,t,n)=>{n.d(t,{Z:()=>l});var a=n(7294);const l=e=>a.createElement("div",null,a.createElement("input",{type:"text",value:e.text,onChange:t=>{e.onChange(t.currentTarget.value)}}))},7657:(e,t,n)=>{n.r(t),n.d(t,{default:()=>o});var a=n(7294),l=n(1217),s=n(1314),r=n(8257),c=n(1997);const o=(0,l.Pi)((()=>{const e=(0,s.o)("viewStore");return a.createElement(r.Z,null,a.createElement("div",null,a.createElement(c.Z,{events:e.eventTable.events,showFullscreenButton:!0})))}))}}]);