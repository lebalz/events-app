"use strict";(self.webpackChunkevents_app=self.webpackChunkevents_app||[]).push([[611],{1997:(e,t,n)=>{n.d(t,{Z:()=>T});var a=n(1314),l=n(6010),r=n(1217),c=n(7294);const s="container_UHDD",o="navbar_diMJ",i="button_jVKi",m="scrollContainer_A12N",d="fullscreen_y9b4",u="table_vwM1",E="editMode_fWke";var v=n(4655);const p={datePicker:"datePicker_t_wz",gbsl:"gbsl_NEvy",fms:"fms_DQ2z",wms:"wms_Jav2",eventRow:"eventRow_JClS",kw:"kw_oYUj",weekday:"weekday_oD07",description:"description_ymu7",location:"location_WWN0",descriptionLong:"descriptionLong_UX1h",editMode:"editMode_V7Fu",expanded:"expanded_WZ86"},h=(0,r.Pi)((e=>{const[t,n]=c.useState(!1),r=(0,a.o)("viewStore"),{eventTable:s}=r,{event:o}=e;return c.createElement("tr",{"data-id":o.id,onClick:()=>{t||n(!0)},onBlur:()=>{n(!1)},className:(0,l.W)(p.eventRow,t&&p.expanded,e.editMode&&p.editMode)},c.createElement("td",{className:(0,l.W)(p.kw)},o.kw),c.createElement("td",{className:(0,l.W)(p.weekday)},o.weekday),c.createElement("td",{style:{maxWidth:s.maxWidthDescription},className:(0,l.W)(p.description)},o.description),c.createElement("td",{className:(0,l.W)(p.startDate)},o.fStartDate),c.createElement("td",{className:(0,l.W)(p.startTime)},o.fStartTime),c.createElement("td",{className:(0,l.W)(p.endDate)},o.fEndDate),c.createElement("td",{className:(0,l.W)(p.endTime)},o.fEndTime),c.createElement("td",{className:(0,l.W)(p.location),style:{maxWidth:s.maxWidthLocation}},o.location),c.createElement("td",{className:(0,l.W)(p.departmentNames)},o.departmentNames.map(((e,t)=>c.createElement("span",{key:t,className:(0,l.W)("badge","badge--primary",p.badge,p[e.toLowerCase()])},e)))),c.createElement("td",{className:(0,l.W)(p.classes)},o.classes.map(((e,t)=>c.createElement("span",{key:t,className:(0,l.W)("badge","badge--secondary")},e)))),c.createElement("td",{className:(0,l.W)(p.descriptionLong),style:{maxWidth:s.maxWidthDescriptionLong}},o.descriptionLong),o.isEditable&&c.createElement("td",null,c.createElement(v.Z,{onClick:()=>o.setEditing(!0)})))}));var b=n(8949),f=n(8517),g=n(6871),N=n(2624),Z=n(1687);const k="container_u2Ul",w="select_SnI8";var W=n(4374);const C=(0,r.Pi)((e=>{const t=(0,a.o)("eventStore"),n=(0,a.o)("untisStore"),r=t.find(e.eventId);return c.createElement("div",{className:(0,l.Z)(k)},c.createElement(W.ZP,{menuPortalTarget:document.body,styles:{menuPortal:e=>({...e,zIndex:9999})},className:(0,l.Z)(w),classNamePrefix:"select",value:r.classes.map((e=>{var t;return{label:e,value:(null==(t=n.findClassByName(e))?void 0:t.id)||"-"}})),options:n.sortedClasses.slice().map((e=>({value:e.id,label:`${e.name}`}))),onChange:(0,b.aD)((e=>{e&&r.classes.replace(e.map((e=>e.label)))})),isMulti:!0,isSearchable:!0,isClearable:!0}))}));var S=n(6330);const y=e=>c.createElement("div",null,c.createElement("input",{type:"datetime-local",value:(0,S.g7)(e.date).toISOString().substring(0,16),onChange:t=>{const n=new Date(t.currentTarget.value);e.onChange((0,S.g7)(n))}})),x="container_aNPG",_="select_EFlv",L=(0,r.Pi)((e=>{const t=(0,a.o)("eventStore"),n=(0,a.o)("departmentStore"),r=t.find(e.eventId);return c.createElement("div",{className:(0,l.Z)(x)},c.createElement(W.ZP,{menuPortalTarget:document.body,styles:{menuPortal:e=>({...e,zIndex:9999})},className:(0,l.Z)(_),classNamePrefix:"select",value:r.departmentIds.map((e=>({label:n.find(e).name,value:e}))),options:n.departments.slice().map((e=>({value:e.id,label:`${e.name}`}))),onChange:(0,b.aD)((e=>{e&&r.departmentIds.replace(e.map((e=>e.value)))})),isMulti:!0,isSearchable:!0,isClearable:!0}))})),D=e=>{const t=e.maxChars||80,{text:n}=e,a=Math.ceil(n.length/t);return c.createElement("div",null,c.createElement("textarea",{value:e.text,wrap:"soft",rows:Math.max(2,a),onChange:t=>{e.onChange(t.currentTarget.value.replace(/\n\r?/g," ").replace(/\s+/g," "))}}))};var P=n(1923);const I=(0,r.Pi)((e=>{const{event:t}=e,n=(0,a.o)("viewStore"),{eventTable:r}=n,s=c.useRef(null);return c.useEffect((()=>{s.current&&s.current.scrollIntoView({behavior:"smooth",block:"center"})}),[s]),c.createElement("tr",{"data-id":t.id,className:(0,l.W)(p.eventRow,p.editMode)},c.createElement("td",{className:(0,l.W)(p.kw)},t.kw),c.createElement("td",{className:(0,l.W)(p.weekday)},t.weekday),c.createElement("td",{style:{maxWidth:r.maxWidthDescription},className:(0,l.W)(p.description)},c.createElement(D,{maxChars:20,text:t.description,onChange:e=>t.update({description:e})})),c.createElement("td",{className:(0,l.W)(p.startDate),colSpan:2},c.createElement(y,{date:t.start,onChange:e=>t.update({start:e.toISOString()})})),c.createElement("td",{className:(0,l.W)(p.endDate),colSpan:2},c.createElement(y,{date:t.end,onChange:e=>t.update({end:e.toISOString()})})),c.createElement("td",{className:(0,l.W)(p.location),style:{maxWidth:r.maxWidthLocation}},c.createElement(P.Z,{text:t.location,onChange:e=>t.update({location:e})})),c.createElement("td",{className:(0,l.W)(p.departmentNames)},c.createElement(L,{eventId:t.id})),c.createElement("td",{className:(0,l.W)(p.classes)},c.createElement(C,{eventId:t.id})),c.createElement("td",{className:(0,l.W)(p.descriptionLong),style:{maxWidth:r.maxWidthDescriptionLong}},c.createElement(D,{maxChars:30,text:t.descriptionLong,onChange:e=>t.update({descriptionLong:e})})),c.createElement("td",null,c.createElement("div",{ref:s},c.createElement(N.Z,{onClick:()=>t.reset()}),t.isDirty&&c.createElement(Z.Z,{onClick:()=>t.save()}),c.createElement(g.Z,{onClick:()=>t.destroy()}))))})),T=(0,r.Pi)((e=>{var t;const n=(0,a.o)("viewStore"),r=c.useRef(null);c.useEffect((()=>{const t=n.fullscreen;return e.showFullscreenButton&&n.setShowFullscreenButton(!0),()=>n.setShowFullscreenButton(t)}),[]),c.useEffect((()=>{const e=()=>{if(r.current){n.eventTable.setClientWidth(r.current.clientWidth);const e=parseFloat(getComputedStyle(r.current).fontSize);n.eventTable.setBaseFontSize(e)}};return r.current&&(window.addEventListener("resize",e),e()),()=>window.removeEventListener("resize",e)}),[r,n]),c.useEffect((()=>(0,b.U5)((()=>n.fullscreen),(e=>{var t;e?null==(t=r.current)||t.requestFullscreen():document.fullscreenElement&&document.exitFullscreen();console.log("fullscreen",n.fullscreen)}))),[]),c.useEffect((()=>{const e=()=>{!!document.fullscreenElement!==n.fullscreen&&n.setFullscreen(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",e),()=>document.removeEventListener("fullscreenchange",e)}),[]);const v=null==(t=(0,a.o)("userStore").current)?void 0:t.id,p=e.events.some((e=>e.editing));return c.createElement("div",{className:(0,l.Z)(s),ref:r},n.fullscreen&&c.createElement("div",{className:(0,l.Z)(o)},c.createElement("div",{className:(0,l.Z)(i)},c.createElement(f.Z,null))),c.createElement("div",{className:(0,l.Z)(m,n.fullscreen&&d)},c.createElement("table",{className:(0,l.Z)(u)},c.createElement("thead",null,c.createElement("tr",{className:(0,l.Z)(p&&E)},c.createElement("th",null,"KW"),c.createElement("th",null,"Tag"),c.createElement("th",null,"Stichwort"),c.createElement("th",null,"Start"),c.createElement("th",null,"Zeit"),c.createElement("th",null,"Ende"),c.createElement("th",null,"Zeit"),c.createElement("th",null,"Ort"),c.createElement("th",null,"Schulen"),c.createElement("th",null,"Klassen"),c.createElement("th",null,"Beschreibung"))),c.createElement("tbody",null,e.events.map((e=>e.editing?c.createElement(I,{key:e.id,event:e,locked:e.authorId!==v}):c.createElement(h,{key:e.id,event:e,locked:e.authorId!==v,editMode:p})))))))}))},6871:(e,t,n)=>{n.d(t,{Z:()=>s});var a=n(7294),l=n(6010),r=n(8542),c=n(6363);const s=e=>{const t=a.useRef(null),[n,s]=a.useState(!1),o=()=>{s(!1),document.removeEventListener("click",o)};return a.useEffect((()=>()=>{document.removeEventListener("click",o)}),[]),a.useEffect((()=>{n&&t.current&&t.current.scrollIntoView({behavior:"smooth",block:"center"})}),[n,t]),a.createElement("span",{className:(0,l.Z)(r.Z.delete),ref:t},a.createElement("button",{className:(0,l.Z)(r.Z.button,r.Z.delete,"button","button--danger","button--sm"),title:"L\xf6schen",onClick:e=>{s(!n),document.addEventListener("click",o),e.stopPropagation(),e.preventDefault()}},a.createElement(c.pJ,{size:.8})),n&&a.createElement("div",{className:(0,l.Z)(r.Z.confirm,"button","button--danger"),onClick:t=>{t.stopPropagation(),t.preventDefault(),e.onClick()}},"Ja, L\xf6schen!"))}},2624:(e,t,n)=>{n.d(t,{Z:()=>s});var a=n(7294),l=n(6010),r=n(8542),c=n(6363);const s=e=>a.createElement("button",{className:(0,l.Z)(r.Z.button,r.Z.discard,"button","button--secondary","button--sm"),title:"\xc4nderungen verwerfen",onClick:e.onClick},a.createElement(c.wq,{size:.8}))},4655:(e,t,n)=>{n.d(t,{Z:()=>s});var a=n(7294),l=n(6010),r=n(8542),c=n(6363);const s=e=>a.createElement("button",{className:(0,l.Z)(r.Z.button,r.Z.edit,"button","button--info","button--sm"),title:"Bearbeiten",onClick:e.onClick},a.createElement(c.dY,{size:.8}))},1687:(e,t,n)=>{n.d(t,{Z:()=>s});var a=n(7294),l=n(6010),r=n(8542),c=n(6363);const s=e=>a.createElement("button",{className:(0,l.Z)(r.Z.button,r.Z.save,"button","button--success","button--sm"),title:"Speichern",onClick:e.onClick},a.createElement(c.N,{size:.8}))},1923:(e,t,n)=>{n.d(t,{Z:()=>l});var a=n(7294);const l=e=>a.createElement("div",null,a.createElement("input",{type:"text",value:e.text,onChange:t=>{e.onChange(t.currentTarget.value)}}))},7657:(e,t,n)=>{n.r(t),n.d(t,{default:()=>o});var a=n(7294),l=n(1217),r=n(1314),c=n(8257),s=n(1997);const o=(0,l.Pi)((()=>{const e=(0,r.o)("viewStore");return a.createElement(c.Z,null,a.createElement("div",null,a.createElement(s.Z,{events:e.eventTable.events,showFullscreenButton:!0})))}))}}]);