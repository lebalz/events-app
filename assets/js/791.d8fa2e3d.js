"use strict";(self.webpackChunkevents_app=self.webpackChunkevents_app||[]).push([[791],{53791:(e,t,r)=>{r.d(t,{A:()=>Be,w:()=>n});var n,a=r(67294);function i(){return i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i.apply(this,arguments)}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function s(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}!function(e){e.Hour="Hour",e.QuarterDay="Quarter Day",e.HalfDay="Half Day",e.Day="Day",e.Week="Week",e.Month="Month",e.Year="Year"}(n||(n={}));var l={},c=function(e,t){void 0===t&&(t={});var r=JSON.stringify([e,t]),n=l[r];return n||(n=new Intl.DateTimeFormat(e,t),l[r]=n),n},u=function(e,t,r){return new Date(e.getFullYear()+("year"===r?t:0),e.getMonth()+("month"===r?t:0),e.getDate()+("day"===r?t:0),e.getHours()+("hour"===r?t:0),e.getMinutes()+("minute"===r?t:0),e.getSeconds()+("second"===r?t:0),e.getMilliseconds()+("millisecond"===r?t:0))},d=function(e,t){var r=["millisecond","second","minute","hour","day","month","year"],n=function(e){var n=r.indexOf(t);return r.indexOf(e)<=n};return new Date(e.getFullYear(),n("year")?0:e.getMonth(),n("month")?1:e.getDate(),n("day")?0:e.getHours(),n("hour")?0:e.getMinutes(),n("minute")?0:e.getSeconds(),n("second")?0:e.getMilliseconds())},h=function(e,t,r){for(var a,i=e[0].start,o=e[0].start,l=s(e);!(a=l()).done;){var c=a.value;c.start<i&&(i=c.start),c.end>o&&(o=c.end)}switch(t){case n.Year:i=u(i,-1,"year"),i=d(i,"year"),o=u(o,1,"year"),o=d(o,"year");break;case n.Month:i=u(i,-1*r,"month"),i=d(i,"month"),o=u(o,1,"year"),o=d(o,"year");break;case n.Week:i=d(i,"day"),i=u(v(i),-7*r,"day"),o=d(o,"day"),o=u(o,1.5,"month");break;case n.Day:i=d(i,"day"),i=u(i,-1*r,"day"),o=d(o,"day"),o=u(o,19,"day");break;case n.QuarterDay:i=d(i,"day"),i=u(i,-1*r,"day"),o=d(o,"day"),o=u(o,66,"hour");break;case n.HalfDay:i=d(i,"day"),i=u(i,-1*r,"day"),o=d(o,"day"),o=u(o,108,"hour");break;case n.Hour:i=d(i,"hour"),i=u(i,-1*r,"hour"),o=d(o,"day"),o=u(o,1,"day")}return[i,o]},g=function(e,t,r){for(var a=new Date(e),i=[a];a<t;){switch(r){case n.Year:a=u(a,1,"year");break;case n.Month:a=u(a,1,"month");break;case n.Week:a=u(a,7,"day");break;case n.Day:a=u(a,1,"day");break;case n.HalfDay:a=u(a,12,"hour");break;case n.QuarterDay:a=u(a,6,"hour");break;case n.Hour:a=u(a,1,"hour")}i.push(a)}return i},f=function(e,t){var r=c(t,{month:"long"}).format(e);return r=r.replace(r[0],r[0].toLocaleUpperCase())},m=function(e,t,r){var n=c(t,{weekday:r}).format(e);return n=n.replace(n[0],n[0].toLocaleUpperCase())},v=function(e){var t=e.getDay(),r=e.getDate()-t+(0===t?-6:1);return new Date(e.setDate(r))},y=function(e){var t=new Date(e.valueOf()),r=(t.getDay()+6)%7;t.setDate(t.getDate()-r+3);var n=t.valueOf();t.setMonth(0,1),4!==t.getDay()&&t.setMonth(0,1+(4-t.getDay()+7)%7);var a=(1+Math.ceil((n-t.valueOf())/6048e5)).toString();return 1===a.length?"0"+a:a},x="_3_ygE",p="_1nBOt",k="_2eZzQ",E="_WuQ0f",b=function(e){var t=e.headerHeight,r=e.fontFamily,n=e.fontSize,i=e.rowWidth;return a.createElement("div",{className:x,style:{fontFamily:r,fontSize:n}},a.createElement("div",{className:p,style:{height:t-2}},a.createElement("div",{className:E,style:{minWidth:i}},"\xa0Name"),a.createElement("div",{className:k,style:{height:.5*t,marginTop:.2*t}}),a.createElement("div",{className:E,style:{minWidth:i}},"\xa0From"),a.createElement("div",{className:k,style:{height:.5*t,marginTop:.25*t}}),a.createElement("div",{className:E,style:{minWidth:i}},"\xa0To")))},w="_3ZbQT",T="_34SS0",C="_3lLk3",S="_nI1Xw",D="_2QjE6",W="_2TfEi",N={},H={weekday:"short",year:"numeric",month:"long",day:"numeric"},M=function(e){var t=e.rowHeight,r=e.rowWidth,n=e.tasks,i=e.fontFamily,o=e.fontSize,s=e.locale,l=e.onExpanderClick,c=(0,a.useMemo)((function(){return function(e){return function(t,r){var n=t.toString(),a=N[n];return a||(a=t.toLocaleDateString(e,r),N[n]=a),a}}(s)}),[s]);return a.createElement("div",{className:w,style:{fontFamily:i,fontSize:o}},n.map((function(e){var n="";return!1===e.hideChildren?n="\u25bc":!0===e.hideChildren&&(n="\u25b6"),a.createElement("div",{className:T,style:{height:t},key:e.id+"row"},a.createElement("div",{className:C,style:{minWidth:r,maxWidth:r},title:e.name},a.createElement("div",{className:S},a.createElement("div",{className:n?D:W,onClick:function(){return l(e)}},n),a.createElement("div",null,e.name))),a.createElement("div",{className:C,style:{minWidth:r,maxWidth:r}},"\xa0",c(e.start,H)),a.createElement("div",{className:C,style:{minWidth:r,maxWidth:r}},"\xa0",c(e.end,H)))})))},F="_3T42e",L="_29NTg",R="_25P-K",_="_3gVAq",O=function(e){var t=e.task,r=e.rowHeight,n=e.rtl,i=e.svgContainerHeight,o=e.svgContainerWidth,s=e.scrollX,l=e.scrollY,c=e.arrowIndent,u=e.fontSize,d=e.fontFamily,h=e.headerHeight,g=e.taskListWidth,f=e.TooltipContent,m=(0,a.useRef)(null),v=(0,a.useState)(0),y=v[0],x=v[1],p=(0,a.useState)(0),k=p[0],E=p[1];return(0,a.useEffect)((function(){if(m.current){var e,a=1.1*m.current.offsetHeight,u=1.1*m.current.offsetWidth,d=t.index*r-l+h;if(n)(e=t.x1-1.5*c-u-s)<0&&(e=t.x2+1.5*c-s),u+e>o&&(e=o-u,d+=r);else u+(e=t.x2+1.5*c+g-s)>g+o&&(e=t.x1+g-1.5*c-s-u),e<g&&(e=o+g-u,d+=r);a+d-l>i-l&&(d=i-a),x(d),E(e)}}),[m,t,c,s,l,h,g,r,i,o,n]),a.createElement("div",{ref:m,className:k?R:_,style:{left:k,top:y}},a.createElement(f,{task:t,fontSize:u,fontFamily:d}))},P=function(e){var t=e.task,r=e.fontSize,n={fontSize:r,fontFamily:e.fontFamily};return a.createElement("div",{className:F,style:n},a.createElement("b",{style:{fontSize:r+6}},t.name+": "+t.start.getDate()+"-"+(t.start.getMonth()+1)+"-"+t.start.getFullYear()+" - "+t.end.getDate()+"-"+(t.end.getMonth()+1)+"-"+t.end.getFullYear()),t.end.getTime()-t.start.getTime()!=0&&a.createElement("p",{className:L},"Duration: "+~~((t.end.getTime()-t.start.getTime())/864e5)+" day(s)"),a.createElement("p",{className:L},!!t.progress&&"Progress: "+t.progress+" %"))},j="_1eT-t",Y=function(e){var t=e.scroll,r=e.ganttHeight,n=e.ganttFullHeight,i=e.headerHeight,o=e.rtl,s=e.onScroll,l=(0,a.useRef)(null);return(0,a.useEffect)((function(){l.current&&(l.current.scrollTop=t)}),[t]),a.createElement("div",{style:{height:r,marginTop:i,marginLeft:o?"":"-1rem"},className:j,onScroll:s,ref:l},a.createElement("div",{style:{height:n,width:1}}))},z=function(e){var t=e.headerHeight,r=e.fontFamily,n=e.fontSize,i=e.rowWidth,o=e.rowHeight,s=e.scrollY,l=e.tasks,c=e.selectedTask,u=e.setSelectedTask,d=e.onExpanderClick,h=e.locale,g=e.ganttHeight,f=e.taskListRef,m=e.horizontalContainerClass,v=e.TaskListHeader,y=e.TaskListTable,x=(0,a.useRef)(null);(0,a.useEffect)((function(){x.current&&(x.current.scrollTop=s)}),[s]);var p={headerHeight:t,fontFamily:r,fontSize:n,rowWidth:i},k={rowHeight:o,rowWidth:i,fontFamily:r,fontSize:n,tasks:l,locale:h,selectedTaskId:c?c.id:"",setSelectedTask:u,onExpanderClick:d};return a.createElement("div",{ref:f},a.createElement(v,Object.assign({},p)),a.createElement("div",{ref:x,className:m,style:g?{height:g}:{}},a.createElement(y,Object.assign({},k))))},I="_2dZTy",X="_3rUKi",A="_RuwuK",B=function(e){for(var t,r=e.tasks,n=e.dates,i=e.rowHeight,o=e.svgWidth,l=e.columnWidth,c=e.todayColor,d=e.rtl,h=0,g=[],f=[a.createElement("line",{key:"RowLineFirst",x:"0",y1:0,x2:o,y2:0,className:X})],m=s(r);!(t=m()).done;){var v=t.value;g.push(a.createElement("rect",{key:"Row"+v.id,x:"0",y:h,width:o,height:i,className:I})),f.push(a.createElement("line",{key:"RowLine"+v.id,x:"0",y1:h+i,x2:o,y2:h+i,className:X})),h+=i}for(var y=new Date,x=0,p=[],k=a.createElement("rect",null),E=0;E<n.length;E++){var b=n[E];p.push(a.createElement("line",{key:b.getTime(),x1:x,y1:0,x2:x,y2:h,className:A})),(E+1!==n.length&&b.getTime()<y.getTime()&&n[E+1].getTime()>=y.getTime()||0!==E&&E+1===n.length&&b.getTime()<y.getTime()&&u(b,b.getTime()-n[E-1].getTime(),"millisecond").getTime()>=y.getTime())&&(k=a.createElement("rect",{x:x,y:0,width:l,height:h,fill:c})),d&&E+1!==n.length&&b.getTime()>=y.getTime()&&n[E+1].getTime()<y.getTime()&&(k=a.createElement("rect",{x:x+l,y:0,width:l,height:h,fill:c})),x+=l}return a.createElement("g",{className:"gridBody"},a.createElement("g",{className:"rows"},g),a.createElement("g",{className:"rowLines"},f),a.createElement("g",{className:"ticks"},p),a.createElement("g",{className:"today"},k))},K=function(e){return a.createElement("g",{className:"grid"},a.createElement(B,Object.assign({},e)))},Q="_9w8d5",U="_1rLuZ",V="_2q1Kt",G="_35nLX",Z=function(e){var t=e.value,r=e.x1Line,n=e.y1Line,i=e.y2Line,o=e.xText,s=e.yText;return a.createElement("g",{className:"calendarTop"},a.createElement("line",{x1:r,y1:n,x2:r,y2:i,className:U,key:t+"line"}),a.createElement("text",{key:t+"text",y:s,x:o,className:V},t))},J=function(e){var t=e.dateSetup,r=e.locale,i=e.viewMode,o=e.rtl,s=e.headerHeight,l=e.columnWidth,u=e.fontFamily,d=e.fontSize,h=[],g=[];switch(t.viewMode){case n.Year:var v=function(){for(var e=[],r=[],n=.5*s,i=0;i<t.dates.length;i++){var c=t.dates[i],u=c.getFullYear();if(r.push(a.createElement("text",{key:c.getFullYear(),y:.8*s,x:l*i+.5*l,className:Q},u)),0===i||c.getFullYear()!==t.dates[i-1].getFullYear()){var d=c.getFullYear().toString(),h=void 0;h=o?(6+i+c.getFullYear()+1)*l:(6+i-c.getFullYear())*l,e.push(a.createElement(Z,{key:d,value:d,x1Line:l*i,y1Line:0,y2Line:s,xText:h,yText:.9*n}))}}return[e,r]}();h=v[0],g=v[1];break;case n.Month:var x=function(){for(var e=[],n=[],i=.5*s,c=0;c<t.dates.length;c++){var u=t.dates[c],d=f(u,r);if(n.push(a.createElement("text",{key:d+u.getFullYear(),y:.8*s,x:l*c+.5*l,className:Q},d)),0===c||u.getFullYear()!==t.dates[c-1].getFullYear()){var h=u.getFullYear().toString(),g=void 0;g=o?(6+c+u.getMonth()+1)*l:(6+c-u.getMonth())*l,e.push(a.createElement(Z,{key:h,value:h,x1Line:l*c,y1Line:0,y2Line:i,xText:g,yText:.9*i}))}}return[e,n]}();h=x[0],g=x[1];break;case n.Week:var p=function(){for(var e=[],n=[],i=1,c=.5*s,u=t.dates,d=u.length-1;d>=0;d--){var h=u[d],g="";0!==d&&h.getMonth()===u[d-1].getMonth()||(g=f(h,r)+", "+h.getFullYear());var m="W"+y(h);n.push(a.createElement("text",{key:h.getTime(),y:.8*s,x:l*(d+ +o),className:Q},m)),g&&(d!==u.length-1&&e.push(a.createElement(Z,{key:g,value:g,x1Line:l*d+i*l,y1Line:0,y2Line:c,xText:l*d+l*i*.5,yText:.9*c})),i=0),i++}return[e,n]}();h=p[0],g=p[1];break;case n.Day:var k=function(){for(var e,n,i=[],o=[],c=.5*s,u=t.dates,d=0;d<u.length;d++){var h=u[d],g=m(h,r,"short")+", "+h.getDate().toString();if(o.push(a.createElement("text",{key:h.getTime(),y:.8*s,x:l*d+.5*l,className:Q},g)),d+1!==u.length&&h.getMonth()!==u[d+1].getMonth()){var v=f(h,r);i.push(a.createElement(Z,{key:v+h.getFullYear(),value:v,x1Line:l*(d+1),y1Line:0,y2Line:c,xText:l*(d+1)-.5*(e=h.getMonth(),n=h.getFullYear(),new Date(n,e+1,0).getDate()*l),yText:.9*c}))}}return[i,o]}();h=k[0],g=k[1];break;case n.QuarterDay:case n.HalfDay:var E=function(){for(var e=[],d=[],h=i===n.HalfDay?2:4,g=.5*s,v=t.dates,y=0;y<v.length;y++){var x=v[y],p=c(r,{hour:"numeric"}).format(x);if(d.push(a.createElement("text",{key:x.getTime(),y:.8*s,x:l*(y+ +o),className:Q,fontFamily:u},p)),0===y||x.getDate()!==v[y-1].getDate()){var k=m(x,r,"short")+", "+x.getDate()+" "+f(x,r);e.push(a.createElement(Z,{key:k+x.getFullYear(),value:k,x1Line:l*y+h*l,y1Line:0,y2Line:g,xText:l*y+h*l*.5,yText:.9*g}))}}return[e,d]}();h=E[0],g=E[1];break;case n.Hour:var b=function(){for(var e=[],n=[],i=.5*s,d=t.dates,h=0;h<d.length;h++){var g=d[h],v=c(r,{hour:"numeric"}).format(g);if(n.push(a.createElement("text",{key:g.getTime(),y:.8*s,x:l*(h+ +o),className:Q,fontFamily:u},v)),0!==h&&g.getDate()!==d[h-1].getDate()){var y=d[h-1],x=m(y,r,"long")+", "+y.getDate()+" "+f(y,r),p=(g.getHours()-24)/2;e.push(a.createElement(Z,{key:x+y.getFullYear(),value:x,x1Line:l*h,y1Line:0,y2Line:i,xText:l*(h+p),yText:.9*i}))}}return[e,n]}();h=b[0],g=b[1]}return a.createElement("g",{className:"calendar",fontSize:d,fontFamily:u},a.createElement("rect",{x:0,y:0,width:l*t.dates.length,height:s,className:G}),g," ",h)};"undefined"!=typeof Symbol&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),"undefined"!=typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));function q(e,t){try{var r=e()}catch(n){return t(n)}return r&&r.then?r.then(void 0,t):r}var $=function(e){var t,r,n=e.taskFrom,i=e.taskTo,o=e.rowHeight,s=e.taskHeight,l=e.arrowIndent;if(e.rtl){var c=te(n,i,o,s,l);t=c[0],r=c[1]}else{var u=ee(n,i,o,s,l);t=u[0],r=u[1]}return a.createElement("g",{className:"arrow"},a.createElement("path",{strokeWidth:"1.5",d:t,fill:"none"}),a.createElement("polygon",{points:r}))},ee=function(e,t,r,n,a){var i=e.index>t.index?-1:1,o=t.y+n/2,s=e.x2+2*a,l=s<t.x1?"":"H "+(t.x1-a),c=s>t.x1?a:t.x1-e.x2-a;return["M "+e.x2+" "+(e.y+n/2)+" \n  h "+a+" \n  v "+i*r/2+" \n  "+l+"\n  V "+o+" \n  h "+c,t.x1+","+o+" \n  "+(t.x1-5)+","+(o-5)+" \n  "+(t.x1-5)+","+(o+5)]},te=function(e,t,r,n,a){var i=e.index>t.index?-1:1,o=t.y+n/2,s=e.x1-2*a,l=s>t.x2?"":"H "+(t.x2+a),c=s<t.x2?-a:t.x2-e.x1+a;return["M "+e.x1+" "+(e.y+n/2)+" \n  h "+-a+" \n  v "+i*r/2+" \n  "+l+"\n  V "+o+" \n  h "+c,t.x2+","+o+" \n  "+(t.x2+5)+","+(o+5)+" \n  "+(t.x2+5)+","+(o-5)]},re=function(e,t,r,n,a,i,o,s,l,c,u,d,h,g,f,m,v,y,x){var p;switch(e.type){case"milestone":p=ae(e,t,r,n,a,i,o,s,y,x);break;case"project":p=ne(e,t,r,n,a,i,o,s,l,g,f,m,v);break;default:p=ne(e,t,r,n,a,i,o,s,l,c,u,d,h)}return p},ne=function(e,t,r,n,a,o,s,l,c,u,d,h,g){var f,m;c?(m=oe(e.start,r,n),f=oe(e.end,r,n)):(f=ie(e.start,r,n),m=ie(e.end,r,n));var v=e.type;"task"===v&&m-f<2*l&&(v="smalltask",m=f+2*l);var y=le(f,m,e.progress,c),x=y[0],p=y[1],k=se(t,a,o),E="project"===e.type?e.hideChildren:void 0,b=i({backgroundColor:h,backgroundSelectedColor:g,progressColor:u,progressSelectedColor:d},e.styles);return i({},e,{typeInternal:v,x1:f,x2:m,y:k,index:t,progressX:p,progressWidth:x,barCornerRadius:s,handleWidth:l,hideChildren:E,height:o,barChildren:[],styles:b})},ae=function(e,t,r,n,a,o,s,l,c,u){var d=ie(e.start,r,n),h=se(t,a,o),g=d-.5*o,f=d+.5*o,m=o/1.414,v=i({backgroundColor:c,backgroundSelectedColor:u,progressColor:"",progressSelectedColor:""},e.styles);return i({},e,{end:e.start,x1:g,x2:f,y:h,index:t,progressX:0,progressWidth:0,barCornerRadius:s,handleWidth:l,typeInternal:e.type,progress:0,height:m,hideChildren:void 0,barChildren:[],styles:v})},ie=function(e,t,r){var n=t.findIndex((function(t){return t.getTime()>=e.getTime()}))-1;return n*r+(e.getTime()-t[n].getTime())/(t[n+1].getTime()-t[n].getTime())*r},oe=function(e,t,r){var n=ie(e,t,r);return n+=r},se=function(e,t,r){return e*t+(t-r)/2},le=function(e,t,r,n){var a=(t-e)*r*.01;return[a,n?t-a:e]},ce=function(e,t,r){return[e-5,t+r,e+5,t+r,e,t+r-8.66].join(",")},ue=function(e,t,r){var n=Math.round((e-r.x1)/t)*t,a=r.x1+n;return[a,a+r.x2-r.x1]},de=function(e,t,r,n,a){var i=new Date((e-t)/n*a+r.getTime());return i=new Date(i.getTime()+6e4*(i.getTimezoneOffset()-r.getTimezoneOffset()))},he=function(e,t,r,n,a,i,o){var s;if("milestone"===r.type)s=fe(e,t,r,n,a,i);else s=ge(e,t,r,n,a,i,o);return s},ge=function(e,t,r,n,a,o,s){var l=i({},r),c=!1;switch(t){case"progress":if(l.progress=s?function(e,t){if(e>=t.x2)return 0;if(e<=t.x1)return 100;var r=t.x2-t.x1;return Math.round(100*(t.x2-e)/r)}(e,r):function(e,t){if(e>=t.x2)return 100;if(e<=t.x1)return 0;var r=t.x2-t.x1;return Math.round(100*(e-t.x1)/r)}(e,r),c=l.progress!==r.progress){var u=le(l.x1,l.x2,l.progress,s),d=u[0],h=u[1];l.progressWidth=d,l.progressX=h}break;case"start":var g=function(e,t,r){e>=r.x2-2*r.handleWidth&&(e=r.x2-2*r.handleWidth);var n=Math.round((e-r.x1)/t)*t;return r.x1+n}(e,n,r);if(l.x1=g,c=l.x1!==r.x1){s?l.end=de(g,r.x1,r.end,n,a):l.start=de(g,r.x1,r.start,n,a);var f=le(l.x1,l.x2,l.progress,s),m=f[0],v=f[1];l.progressWidth=m,l.progressX=v}break;case"end":var y=function(e,t,r){e<=r.x1+2*r.handleWidth&&(e=r.x1+2*r.handleWidth);var n=Math.round((e-r.x2)/t)*t;return r.x2+n}(e,n,r);if(l.x2=y,c=l.x2!==r.x2){s?l.start=de(y,r.x2,r.start,n,a):l.end=de(y,r.x2,r.end,n,a);var x=le(l.x1,l.x2,l.progress,s),p=x[0],k=x[1];l.progressWidth=p,l.progressX=k}break;case"move":var E=ue(e-o,n,r),b=E[0],w=E[1];if(c=b!==r.x1){l.start=de(b,r.x1,r.start,n,a),l.end=de(w,r.x2,r.end,n,a),l.x1=b,l.x2=w;var T=le(l.x1,l.x2,l.progress,s),C=T[0],S=T[1];l.progressWidth=C,l.progressX=S}}return{isChanged:c,changedTask:l}},fe=function(e,t,r,n,a,o){var s=i({},r),l=!1;if("move"===t){var c=ue(e-o,n,r),u=c[0],d=c[1];(l=u!==r.x1)&&(s.start=de(u,r.x1,r.start,n,a),s.end=s.start,s.x1=u,s.x2=d)}return{isChanged:l,changedTask:s}};function me(e){var t=e.filter((function(e){return e.hideChildren&&"project"===e.type}));if(t.length>0)for(var r=function(r){var n=t[r],a=ve(e,n);e=e.filter((function(e){return-1===a.indexOf(e)}))},n=0;t.length>n;n++)r(n);return e}function ve(e,t){var r=[];r="project"!==t.type?e.filter((function(e){return e.dependencies&&-1!==e.dependencies.indexOf(t.id)})):e.filter((function(e){return e.project&&e.project===t.id}));var n=[];return r.forEach((function(t){n.push.apply(n,ve(e,t))})),r=r.concat(r,n)}var ye=function(e,t){var r=e.displayOrder||Number.MAX_VALUE,n=t.displayOrder||Number.MAX_VALUE;return r>n?1:r<n?-1:0},xe="_KxSXS",pe="_3w_5u",ke="_31ERP",Ee=function(e){var t=e.x,r=e.y,n=e.width,i=e.height,o=e.isSelected,s=e.progressX,l=e.progressWidth,c=e.barCornerRadius,u=e.styles,d=e.onMouseDown;return a.createElement("g",{onMouseDown:d},a.createElement("rect",{x:t,width:n,y:r,height:i,ry:c,rx:c,fill:o?u.backgroundSelectedColor:u.backgroundColor,className:ke}),a.createElement("rect",{x:s,width:l,y:r,height:i,ry:c,rx:c,fill:o?u.progressSelectedColor:u.progressColor}))},be=function(e){var t=e.x,r=e.y,n=e.width,i=e.height,o=e.barCornerRadius,s=e.onMouseDown;return a.createElement("rect",{x:t,y:r,width:n,height:i,className:pe,ry:o,rx:o,onMouseDown:s})},we=function(e){var t=e.progressPoint,r=e.onMouseDown;return a.createElement("polygon",{className:pe,points:t,onMouseDown:r})},Te=function(e){var t=e.task,r=e.isProgressChangeable,n=e.isDateChangeable,i=e.rtl,o=e.onEventStart,s=e.isSelected,l=ce(+!i*t.progressWidth+t.progressX,t.y,t.height),c=t.height-2;return a.createElement("g",{className:xe,tabIndex:0},a.createElement(Ee,{x:t.x1,y:t.y,width:t.x2-t.x1,height:t.height,progressX:t.progressX,progressWidth:t.progressWidth,barCornerRadius:t.barCornerRadius,styles:t.styles,isSelected:s,onMouseDown:function(e){n&&o("move",t,e)}}),a.createElement("g",{className:"handleGroup"},n&&a.createElement("g",null,a.createElement(be,{x:t.x1+1,y:t.y+1,width:t.handleWidth,height:c,barCornerRadius:t.barCornerRadius,onMouseDown:function(e){o("start",t,e)}}),a.createElement(be,{x:t.x2-t.handleWidth-1,y:t.y+1,width:t.handleWidth,height:c,barCornerRadius:t.barCornerRadius,onMouseDown:function(e){o("end",t,e)}})),r&&a.createElement(we,{progressPoint:l,onMouseDown:function(e){o("progress",t,e)}})))},Ce=function(e){var t=e.task,r=e.isProgressChangeable,n=e.isDateChangeable,i=e.onEventStart,o=e.isSelected,s=ce(t.progressWidth+t.x1,t.y,t.height);return a.createElement("g",{className:xe,tabIndex:0},a.createElement(Ee,{x:t.x1,y:t.y,width:t.x2-t.x1,height:t.height,progressX:t.progressX,progressWidth:t.progressWidth,barCornerRadius:t.barCornerRadius,styles:t.styles,isSelected:o,onMouseDown:function(e){n&&i("move",t,e)}}),a.createElement("g",{className:"handleGroup"},r&&a.createElement(we,{progressPoint:s,onMouseDown:function(e){i("progress",t,e)}})))},Se="_RRr13",De="_2P2B1",We=function(e){var t=e.task,r=e.isDateChangeable,n=e.onEventStart,i=e.isSelected,o="rotate(45 "+(t.x1+.356*t.height)+" \n    "+(t.y+.85*t.height)+")";return a.createElement("g",{tabIndex:0,className:Se},a.createElement("rect",{fill:i?t.styles.backgroundSelectedColor:t.styles.backgroundColor,x:t.x1,width:t.height,y:t.y,height:t.height,rx:t.barCornerRadius,ry:t.barCornerRadius,transform:o,className:De,onMouseDown:function(e){r&&n("move",t,e)}}))},Ne="_1KJ6x",He="_2RbVy",Me="_2pZMF",Fe=function(e){var t=e.task,r=e.isSelected,n=r?t.styles.backgroundSelectedColor:t.styles.backgroundColor,i=r?t.styles.progressSelectedColor:t.styles.progressColor,o=t.x2-t.x1,s=[t.x1,t.y+t.height/2-1,t.x1,t.y+t.height,t.x1+15,t.y+t.height/2-1].join(","),l=[t.x2,t.y+t.height/2-1,t.x2,t.y+t.height,t.x2-15,t.y+t.height/2-1].join(",");return a.createElement("g",{tabIndex:0,className:Ne},a.createElement("rect",{fill:n,x:t.x1,width:o,y:t.y,height:t.height,rx:t.barCornerRadius,ry:t.barCornerRadius,className:He}),a.createElement("rect",{x:t.progressX,width:t.progressWidth,y:t.y,height:t.height,ry:t.barCornerRadius,rx:t.barCornerRadius,fill:i}),a.createElement("rect",{fill:n,x:t.x1,width:o,y:t.y,height:t.height/2,rx:t.barCornerRadius,ry:t.barCornerRadius,className:Me}),a.createElement("polygon",{className:Me,points:s,fill:n}),a.createElement("polygon",{className:Me,points:l,fill:n}))},Le="_3zRJQ",Re="_3KcaM",_e=function(e){var t=i({},e),r=t.task,n=t.arrowIndent,o=t.isDelete,s=t.taskHeight,l=t.isSelected,c=t.rtl,u=t.onEventStart,d=(0,a.useRef)(null),h=(0,a.useState)(a.createElement("div",null)),g=h[0],f=h[1],m=(0,a.useState)(!0),v=m[0],y=m[1];(0,a.useEffect)((function(){switch(r.typeInternal){case"milestone":f(a.createElement(We,Object.assign({},e)));break;case"project":f(a.createElement(Fe,Object.assign({},e)));break;case"smalltask":f(a.createElement(Ce,Object.assign({},e)));break;default:f(a.createElement(Te,Object.assign({},e)))}}),[r,l]),(0,a.useEffect)((function(){d.current&&y(d.current.getBBox().width<r.x2-r.x1)}),[d,r]);var x,p;return a.createElement("g",{onKeyDown:function(e){if("Delete"===e.key)o&&u("delete",r,e);e.stopPropagation()},onMouseEnter:function(e){u("mouseenter",r,e)},onMouseLeave:function(e){u("mouseleave",r,e)},onDoubleClick:function(e){u("dblclick",r,e)},onClick:function(e){u("click",r,e)},onFocus:function(){u("select",r)}},g,a.createElement("text",{x:(x=r.x2-r.x1,p=r.barChildren.length>0,v?r.x1+.5*x:c&&d.current?r.x1-d.current.getBBox().width-n*+p-.2*n:r.x1+x+n*+p+.2*n),y:r.y+.5*s,className:v?Le:Re,ref:d},r.name))},Oe=function(e){var t,r=e.tasks,n=e.dates,i=e.ganttEvent,o=e.selectedTask,s=e.rowHeight,l=e.columnWidth,c=e.timeStep,u=e.svg,d=e.taskHeight,h=e.arrowColor,g=e.arrowIndent,f=e.fontFamily,m=e.fontSize,v=e.rtl,y=e.setGanttEvent,x=e.setFailedTask,p=e.setSelectedTask,k=e.onDateChange,E=e.onProgressChange,b=e.onDoubleClick,w=e.onClick,T=e.onDelete,C=null==u||null===(t=u.current)||void 0===t?void 0:t.createSVGPoint(),S=(0,a.useState)(0),D=S[0],W=S[1],N=(0,a.useState)(0),H=N[0],M=N[1],F=(0,a.useState)(!1),L=F[0],R=F[1];(0,a.useEffect)((function(){var e=n[1].getTime()-n[0].getTime()-60*n[1].getTimezoneOffset()*1e3+60*n[0].getTimezoneOffset()*1e3;W(c*l/e)}),[l,n,c]),(0,a.useEffect)((function(){var e=function(e){try{var t;if(!i.changedTask||!C||null==u||!u.current)return Promise.resolve();e.preventDefault(),C.x=e.clientX;var r=C.matrixTransform(null==u||null===(t=u.current.getScreenCTM())||void 0===t?void 0:t.inverse()),n=he(r.x,i.action,i.changedTask,D,c,H,v),a=n.isChanged,o=n.changedTask;return a&&y({action:i.action,changedTask:o}),Promise.resolve()}catch(s){return Promise.reject(s)}};L||"move"!==i.action&&"end"!==i.action&&"start"!==i.action&&"progress"!==i.action||null==u||!u.current||(u.current.addEventListener("mousemove",e),u.current.addEventListener("mouseup",(function t(r){try{var n,a=function(){f||x(s)},o=i.action,s=i.originalSelectedTask,l=i.changedTask;if(!(l&&C&&null!=u&&u.current&&s))return Promise.resolve();r.preventDefault(),C.x=r.clientX;var d=C.matrixTransform(null==u||null===(n=u.current.getScreenCTM())||void 0===n?void 0:n.inverse()),h=he(d.x,o,l,D,c,H,v).changedTask,g=s.start!==h.start||s.end!==h.end||s.progress!==h.progress;u.current.removeEventListener("mousemove",e),u.current.removeEventListener("mouseup",t),y({action:""}),R(!1);var f=!0,m=function(){if(("move"===o||"end"===o||"start"===o)&&k&&g){var e=q((function(){return Promise.resolve(k(h,h.barChildren)).then((function(e){void 0!==e&&(f=e)}))}),(function(){f=!1}));if(e&&e.then)return e.then((function(){}))}else{var t=function(){if(E&&g){var e=q((function(){return Promise.resolve(E(h,h.barChildren)).then((function(e){void 0!==e&&(f=e)}))}),(function(){f=!1}));if(e&&e.then)return e.then((function(){}))}}();if(t&&t.then)return t.then((function(){}))}}();return Promise.resolve(m&&m.then?m.then(a):a())}catch(p){return Promise.reject(p)}})),R(!0))}),[i,D,H,E,c,k,u,L,C,v,x,y]);var _=function(e,t,r){try{return Promise.resolve(function(){if(r)return function(){if(function(e){return void 0!==e.key}(r)){var n=function(){if("delete"===e){var r=function(){if(T){var r=q((function(){return Promise.resolve(T(t)).then((function(r){void 0!==r&&r&&y({action:e,changedTask:t})}))}),(function(e){console.error("Error on Delete. "+e)}));if(r&&r.then)return r.then((function(){}))}}();if(r&&r.then)return r.then((function(){}))}}();if(n&&n.then)return n.then((function(){}))}else if("mouseenter"===e)i.action||y({action:e,changedTask:t,originalSelectedTask:t});else if("mouseleave"===e)"mouseenter"===i.action&&y({action:""});else if("dblclick"===e)b&&b(t);else if("click"===e)w&&w(t);else if("move"===e){var a;if(null==u||!u.current||!C)return;C.x=r.clientX;var o=C.matrixTransform(null===(a=u.current.getScreenCTM())||void 0===a?void 0:a.inverse());M(o.x-t.x1),y({action:e,changedTask:t,originalSelectedTask:t})}else y({action:e,changedTask:t,originalSelectedTask:t})}();"select"===e&&p(t.id)}())}catch(n){return Promise.reject(n)}};return a.createElement("g",{className:"content"},a.createElement("g",{className:"arrows",fill:h,stroke:h},r.map((function(e){return e.barChildren.map((function(t){return a.createElement($,{key:"Arrow from "+e.id+" to "+r[t.index].id,taskFrom:e,taskTo:r[t.index],rowHeight:s,taskHeight:d,arrowIndent:g,rtl:v})}))}))),a.createElement("g",{className:"bar",fontFamily:f,fontSize:m},r.map((function(e){return a.createElement(_e,{task:e,arrowIndent:g,taskHeight:d,isProgressChangeable:!!E&&!e.isDisabled,isDateChangeable:!!k&&!e.isDisabled,isDelete:!e.isDisabled,onEventStart:_,key:e.id,isSelected:!!o&&e.id===o.id,rtl:v})}))))},Pe="_CZjuD",je="_2B2zv",Ye="_3eULf",ze=function(e){var t=e.gridProps,r=e.calendarProps,n=e.barProps,o=e.ganttHeight,s=e.scrollY,l=e.scrollX,c=(0,a.useRef)(null),u=(0,a.useRef)(null),d=(0,a.useRef)(null),h=i({},n,{svg:c});return(0,a.useEffect)((function(){u.current&&(u.current.scrollTop=s)}),[s]),(0,a.useEffect)((function(){d.current&&(d.current.scrollLeft=l)}),[l]),a.createElement("div",{className:Pe,ref:d,dir:"ltr"},a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:t.svgWidth,height:r.headerHeight,fontFamily:n.fontFamily},a.createElement(J,Object.assign({},r))),a.createElement("div",{ref:u,className:je,style:o?{height:o,width:t.svgWidth}:{width:t.svgWidth}},a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:t.svgWidth,height:n.rowHeight*n.tasks.length,fontFamily:n.fontFamily,ref:c},a.createElement(K,Object.assign({},t)),a.createElement(Oe,Object.assign({},h)))))},Ie="_2k9Ys",Xe="_19jgW",Ae=function(e){var t=e.scroll,r=e.svgWidth,n=e.taskListWidth,i=e.rtl,o=e.onScroll,s=(0,a.useRef)(null);return(0,a.useEffect)((function(){s.current&&(s.current.scrollLeft=t)}),[t]),a.createElement("div",{dir:"ltr",style:{margin:i?"0px "+n+"px 0px 0px":"0px 0px 0px "+n+"px"},className:Ie,onScroll:o,ref:s},a.createElement("div",{style:{width:r},className:Xe}))},Be=function(e){var t=e.tasks,r=e.headerHeight,o=void 0===r?50:r,s=e.columnWidth,l=void 0===s?60:s,c=e.listCellWidth,u=void 0===c?"155px":c,d=e.rowHeight,f=void 0===d?50:d,m=e.ganttHeight,v=void 0===m?0:m,y=e.viewMode,x=void 0===y?n.Day:y,p=e.preStepsCount,k=void 0===p?1:p,E=e.locale,w=void 0===E?"en-GB":E,T=e.barFill,C=void 0===T?60:T,S=e.barCornerRadius,D=void 0===S?3:S,W=e.barProgressColor,N=void 0===W?"#a3a3ff":W,H=e.barProgressSelectedColor,F=void 0===H?"#8282f5":H,L=e.barBackgroundColor,R=void 0===L?"#b8c2cc":L,_=e.barBackgroundSelectedColor,j=void 0===_?"#aeb8c2":_,I=e.projectProgressColor,X=void 0===I?"#7db59a":I,A=e.projectProgressSelectedColor,B=void 0===A?"#59a985":A,K=e.projectBackgroundColor,Q=void 0===K?"#fac465":K,U=e.projectBackgroundSelectedColor,V=void 0===U?"#f7bb53":U,G=e.milestoneBackgroundColor,Z=void 0===G?"#f1c453":G,J=e.milestoneBackgroundSelectedColor,q=void 0===J?"#f29e4c":J,$=e.rtl,ee=void 0!==$&&$,te=e.handleWidth,ne=void 0===te?8:te,ae=e.timeStep,ie=void 0===ae?3e5:ae,oe=e.arrowColor,se=void 0===oe?"grey":oe,le=e.fontFamily,ce=void 0===le?"Arial, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue":le,ue=e.fontSize,de=void 0===ue?"14px":ue,he=e.arrowIndent,ge=void 0===he?20:he,fe=e.todayColor,ve=void 0===fe?"rgba(252, 248, 227, 0.5)":fe,xe=e.viewDate,pe=e.TooltipContent,ke=void 0===pe?P:pe,Ee=e.TaskListHeader,be=void 0===Ee?b:Ee,we=e.TaskListTable,Te=void 0===we?M:we,Ce=e.onDateChange,Se=e.onProgressChange,De=e.onDoubleClick,We=e.onClick,Ne=e.onDelete,He=e.onSelect,Me=e.onExpanderClick,Fe=(0,a.useRef)(null),Le=(0,a.useRef)(null),Re=(0,a.useState)((function(){var e=h(t,x,k),r=e[0],n=e[1];return{viewMode:x,dates:g(r,n,x)}})),_e=Re[0],Oe=Re[1],Pe=(0,a.useState)(void 0),Ie=Pe[0],Xe=Pe[1],Be=(0,a.useState)(0),Ke=Be[0],Qe=Be[1],Ue=(0,a.useState)(0),Ve=Ue[0],Ge=Ue[1],Ze=(0,a.useState)(v),Je=Ze[0],qe=Ze[1],$e=(0,a.useState)([]),et=$e[0],tt=$e[1],rt=(0,a.useState)({action:""}),nt=rt[0],at=rt[1],it=(0,a.useMemo)((function(){return f*C/100}),[f,C]),ot=(0,a.useState)(),st=ot[0],lt=ot[1],ct=(0,a.useState)(null),ut=ct[0],dt=ct[1],ht=_e.dates.length*l,gt=et.length*f,ft=(0,a.useState)(0),mt=ft[0],vt=ft[1],yt=(0,a.useState)(-1),xt=yt[0],pt=yt[1],kt=(0,a.useState)(!1),Et=kt[0],bt=kt[1];(0,a.useEffect)((function(){var e;e=(e=Me?me(t):t).sort(ye);var r=h(e,x,k),n=r[0],a=r[1],i=g(n,a,x);ee&&(i=i.reverse(),-1===xt&&pt(i.length*l)),Oe({dates:i,viewMode:x}),tt(function(e,t,r,n,a,i,o,s,l,c,u,d,h,g,f,m,v,y){var x=e.map((function(e,x){return re(e,x,t,r,n,a,i,o,s,l,c,u,d,h,g,f,m,v,y)}));return x=x.map((function(e){for(var t=e.dependencies||[],r=function(r){var n=x.findIndex((function(e){return e.id===t[r]}));-1!==n&&x[n].barChildren.push(e)},n=0;n<t.length;n++)r(n);return e}))}(e,i,l,f,it,D,ne,ee,N,F,R,j,X,B,Q,V,Z,q))}),[t,x,k,f,D,l,it,ne,N,F,R,j,X,B,Q,V,Z,q,ee,xt,Me]),(0,a.useEffect)((function(){if(x===_e.viewMode&&(xe&&!Ie||xe&&(null==Ie?void 0:Ie.valueOf())!==xe.valueOf())){var e=_e.dates,t=e.findIndex((function(t,r){return xe.valueOf()>=t.valueOf()&&r+1!==e.length&&xe.valueOf()<e[r+1].valueOf()}));if(-1===t)return;Xe(xe),pt(l*t)}}),[xe,l,_e.dates,_e.viewMode,x,Ie,Xe]),(0,a.useEffect)((function(){var e=nt.changedTask,t=nt.action;if(e)if("delete"===t)at({action:""}),tt(et.filter((function(t){return t.id!==e.id})));else if("move"===t||"end"===t||"start"===t||"progress"===t){var r=et.find((function(t){return t.id===e.id}));if(r&&(r.start.getTime()!==e.start.getTime()||r.end.getTime()!==e.end.getTime()||r.progress!==e.progress)){var n=et.map((function(t){return t.id===e.id?e:t}));tt(n)}}}),[nt,et]),(0,a.useEffect)((function(){ut&&(tt(et.map((function(e){return e.id!==ut.id?e:ut}))),dt(null))}),[ut,et]),(0,a.useEffect)((function(){u||Qe(0),Le.current&&Qe(Le.current.offsetWidth)}),[Le,u]),(0,a.useEffect)((function(){Fe.current&&Ge(Fe.current.offsetWidth-Ke)}),[Fe,Ke]),(0,a.useEffect)((function(){qe(v?v+o:t.length*f+o)}),[v,t,o,f]),(0,a.useEffect)((function(){var e,t=function(e){if(e.shiftKey||e.deltaX){var t=e.deltaX?e.deltaX:e.deltaY,r=xt+t;r<0?r=0:r>ht&&(r=ht),pt(r),e.preventDefault()}else if(v){var n=mt+e.deltaY;n<0?n=0:n>gt-v&&(n=gt-v),n!==mt&&(vt(n),e.preventDefault())}bt(!0)};return null===(e=Fe.current)||void 0===e||e.addEventListener("wheel",t,{passive:!1}),function(){var e;null===(e=Fe.current)||void 0===e||e.removeEventListener("wheel",t)}}),[Fe,mt,xt,v,ht,ee,gt]);var wt=function(e){var t=et.find((function(t){return t.id===e})),r=et.find((function(e){return!!st&&e.id===st.id}));He&&(r&&He(r,!1),t&&He(t,!0)),lt(t)},Tt={columnWidth:l,svgWidth:ht,tasks:t,rowHeight:f,dates:_e.dates,todayColor:ve,rtl:ee},Ct={dateSetup:_e,locale:w,viewMode:x,headerHeight:o,columnWidth:l,fontFamily:ce,fontSize:de,rtl:ee},St={tasks:et,dates:_e.dates,ganttEvent:nt,selectedTask:st,rowHeight:f,taskHeight:it,columnWidth:l,arrowColor:se,timeStep:ie,fontFamily:ce,fontSize:de,arrowIndent:ge,svgWidth:ht,rtl:ee,setGanttEvent:at,setFailedTask:dt,setSelectedTask:wt,onDateChange:Ce,onProgressChange:Se,onDoubleClick:De,onClick:We,onDelete:Ne},Dt={rowHeight:f,rowWidth:u,fontFamily:ce,fontSize:de,tasks:et,locale:w,headerHeight:o,scrollY:mt,ganttHeight:v,horizontalContainerClass:je,selectedTask:st,taskListRef:Le,setSelectedTask:wt,onExpanderClick:function(e){Me&&void 0!==e.hideChildren&&Me(i({},e,{hideChildren:!e.hideChildren}))},TaskListHeader:be,TaskListTable:Te};return a.createElement("div",null,a.createElement("div",{className:Ye,onKeyDown:function(e){e.preventDefault();var t=mt,r=xt,n=!0;switch(e.key){case"Down":case"ArrowDown":t+=f,n=!1;break;case"Up":case"ArrowUp":t-=f,n=!1;break;case"Left":case"ArrowLeft":r-=l;break;case"Right":case"ArrowRight":r+=l}n?(r<0?r=0:r>ht&&(r=ht),pt(r)):(t<0?t=0:t>gt-v&&(t=gt-v),vt(t)),bt(!0)},tabIndex:0,ref:Fe},u&&a.createElement(z,Object.assign({},Dt)),a.createElement(ze,{gridProps:Tt,calendarProps:Ct,barProps:St,ganttHeight:v,scrollY:mt,scrollX:xt}),nt.changedTask&&a.createElement(O,{arrowIndent:ge,rowHeight:f,svgContainerHeight:Je,svgContainerWidth:Ve,fontFamily:ce,fontSize:de,scrollX:xt,scrollY:mt,task:nt.changedTask,headerHeight:o,taskListWidth:Ke,TooltipContent:ke,rtl:ee,svgWidth:ht}),a.createElement(Y,{ganttFullHeight:gt,ganttHeight:v,headerHeight:o,scroll:mt,onScroll:function(e){mt===e.currentTarget.scrollTop||Et?bt(!1):(vt(e.currentTarget.scrollTop),bt(!0))},rtl:ee})),a.createElement(Ae,{svgWidth:ht,taskListWidth:Ke,scroll:xt,rtl:ee,onScroll:function(e){xt===e.currentTarget.scrollLeft||Et?bt(!1):(pt(e.currentTarget.scrollLeft),bt(!0))}}))}}}]);