"use strict";(self.webpackChunkevents_app=self.webpackChunkevents_app||[]).push([[585],{6691:(e,t,n)=>{n.d(t,{Z:()=>b});var a=n(7294),l=n(6010),s=n(6670),r=n(9372);const c="audience_h5Jo",i="header_VV_v",d="tabs_gt1K",o="touched_QR1j",m="department_vkT_",E="departmentClasses_x83Z",u="year_bnbe";var g=n(1314),v=n(4866),p=n(5162),Z=n(3353),h=n(9346);const f=(0,s.Pi)((e=>{const{departments:t,event:n}=e,s={};return t.map((e=>e.classes)).flat().forEach((e=>{s[e.graduationYear]||(s[e.graduationYear]=[]),s[e.graduationYear]=[...s[e.graduationYear],e].sort(((e,t)=>e.letter.localeCompare(t.letter)))})),a.createElement("div",{className:(0,l.Z)(E)},Object.keys(s).map((e=>{if(1===s[e].length){const t=s[e][0];return a.createElement("div",{className:(0,l.Z)(u),key:e},a.createElement(h.Z,{text:t.displayName,title:t.displayName,active:n.affectsClass(t),color:"primary",onClick:()=>n.toggleClass(t.name)}))}const t=s[e][0],r=`${e.slice(2)}${t.departmentLetter}`,c=s[e].some((e=>n.affectsClass(e))),i=n.classGroups.has(r);return a.createElement("div",{className:(0,l.Z)(u),key:e},a.createElement(h.Z,{text:e.slice(2),active:i,color:c?"primary":"secondary",onClick:()=>{n.toggleClassGroup(r)}}),s[e].map((e=>a.createElement(h.Z,{key:e.id,color:"primary",active:n.affectsClass(e),text:e.letter,title:e.displayName,onClick:()=>n.toggleClass(e.name)}))))})))}));var y=n(7989);const N=(0,s.Pi)((e=>{const[t,n]=a.useState([]),[s,r]=a.useState(!0),E=((0,g.oR)("untisStore"),(0,g.oR)("departmentStore")),u=(0,g.oR)("userStore"),{current:N}=u;if(!N)return null;const b={};Object.values(Z.L).forEach((e=>{const t=E.findByDepartmentLetter(e).filter((e=>e.classes.length>0));t.length>0&&(b[e]=t)}));const{event:x}=e;return a.createElement("div",{className:(0,l.Z)(c)},a.createElement("div",{className:(0,l.Z)(i)},a.createElement(y.Z,{checked:x.allLPs,onChange:e=>x.setAllLPs(e),label:"Alle LP"}),!x.allLPs&&a.createElement(a.Fragment,null,a.createElement(y.Z,{checked:x.teachersOnly,onChange:e=>x.setTeachersOnly(e),label:"Nur LP"}),a.createElement(y.Z,{checked:x.klpOnly,onChange:e=>x.setKlpOnly(e),label:"Nur KLP",disabled:x.teachersOnly}))),x.allLPs?a.createElement("div",{className:(0,l.Z)(m)},E.departments.map((e=>a.createElement(h.Z,{key:e.id,text:e.name,active:x.departmentIds.has(e.id),color:x.departmentIds.has(e.id)?"primary":"secondary",onClick:()=>x.toggleDepartment(e.id)})))):a.createElement(v.Z,{className:(0,l.Z)(d)},Object.keys(b).map(((e,t)=>{const n=b[e][0].color,s=b[e].some((e=>e.classes.some((e=>x.affectsClass(e)))));return console.log(e,s),a.createElement(p.Z,{value:e,label:Z.f[e],key:e,attributes:{className:(0,l.Z)(s&&o),style:{color:n}}},a.createElement(f,{departments:b[e],event:x}))}))))})),b=(0,s.Pi)((e=>{const{event:t,styles:n}=e;if(e.isEditable&&e.event.isEditing)return a.createElement("div",{style:{gridColumnStart:"departments",gridColumnEnd:"classesEnd"},className:(0,l.Z)(n.audience,"grid-audience",e.className)},a.createElement(N,{event:t}));const s=new Set(t._unknownClassNames);return a.createElement(a.Fragment,null,a.createElement("div",{style:{gridColumn:"departments"},className:(0,l.Z)(e.className,n.departments,"grid-departments",e.isEditGrid&&n.editGrid),onClick:()=>e.expandeable&&e.event.setExpanded(!0)},a.createElement("div",{className:(0,l.Z)(n.tags)},t.departments.map(((e,t)=>a.createElement(r.Z,{key:t,text:e.shortName,color:e.color}))))),a.createElement("div",{style:{gridColumn:"classes"},className:(0,l.Z)(e.className,n.classes,e.isEditGrid&&n.editGrid),onClick:()=>e.expandeable&&e.event.setExpanded(!0)},a.createElement("div",{className:(0,l.Z)(n.tags)},t.fClasses.map(((e,t)=>{const n=s.has(e)?"red":"gray";return a.createElement(r.Z,{key:t,text:e,color:n})})))))}))},529:(e,t,n)=>{n.d(t,{Z:()=>d});var a=n(7294),l=n(6010),s=n(6670),r=n(6330),c=n(8949);const i=e=>{const[t,n]=a.useState((0,r.g7)(e.date).toISOString().substring(0,16));return a.useEffect((0,c.aD)((()=>{try{const n=new Date(t);e.onChange((0,r.g7)(n))}catch(n){}})),[t]),a.createElement("div",null,a.createElement("input",{type:"datetime-local",value:t,max:"2099-12-31T00:01",min:"2020-01-01T23:59",onChange:e=>{n(e.currentTarget.value)}}))},d=(0,s.Pi)((e=>{const{event:t,styles:n}=e,s=t.errorFor(e.time);let r="startDate",c="startTime",d=t.start,o=t.fStartDate,m=t.fStartTime;return"end"===e.time&&(r="endDate",c="endTime",o=t.fEndDate,m=t.fEndTime,d=t.end),e.isEditable&&e.event.isEditing?a.createElement("div",{style:{gridColumnStart:r,gridColumnEnd:`${e.time}End`},className:(0,l.Z)(e.className,"grid-dateTime",n.dateTime,n[e.time],s&&n.error)},a.createElement(i,{date:d,onChange:n=>{const a=n.toISOString();t.update({[e.time]:a})}}),s&&a.createElement("div",{className:n.errorMessage},s.message)):a.createElement(a.Fragment,null,a.createElement("div",{style:{gridColumn:r},className:(0,l.Z)(e.className,n.date,n[r],`grid-${r}`),onClick:()=>e.expandeable&&e.event.setExpanded(!0)},o),a.createElement("div",{style:{gridColumn:c},className:(0,l.Z)(e.className,n.time,n[c],`grid-${c}`),onClick:()=>e.expandeable&&e.event.setExpanded(!0)},m))}))},5981:(e,t,n)=>{n.d(t,{Z:()=>d});var a=n(7294),l=n(6010),s=n(6670),r=n(9346),c=n(5317),i=n(6363);const d=(0,s.Pi)((e=>{const{styles:t,event:n}=e;return a.createElement("div",{style:{gridColumn:"day"},className:(0,l.Z)(t.day,e.className,"grid-day"),onClick:()=>e.expandeable&&n.setExpanded(!0)},a.createElement("div",{className:(0,l.Z)(t.value)},n.day),e.expandeable&&n.isExpanded&&a.createElement("div",{className:(0,l.Z)(t.expand)},a.createElement(r.Z,{icon:c.vnu,onClick:e=>{e.stopPropagation(),n.setExpanded(!1)},size:i.yd})))}))},3182:(e,t,n)=>{n.d(t,{Z:()=>c});var a=n(7294),l=n(6010),s=n(6670),r=n(4435);const c=(0,s.Pi)((e=>{const{styles:t}=e,n=e.event.errorFor("description");return e.isEditable&&e.event.isEditing?a.createElement("div",{style:{gridColumn:"description"},className:(0,l.Z)(t.description,e.className,n&&t.error,"grid-description"),"aria-invalid":!!n},a.createElement(r.Z,{text:e.event.description,onChange:t=>e.event.update({description:t})}),n&&a.createElement("div",{className:t.errorMessage},n.message)):a.createElement("div",{style:{gridColumn:"description"},className:(0,l.Z)(t.description,e.className,"grid-description"),onClick:()=>e.expandeable&&e.event.setExpanded(!0)},e.event.description)}))},3335:(e,t,n)=>{n.d(t,{Z:()=>c});var a=n(7294),l=n(6010),s=n(6670),r=n(4435);const c=(0,s.Pi)((e=>{const{styles:t}=e;return e.isEditable&&e.event.isEditing?a.createElement("div",{style:{gridColumn:"descriptionLong"},className:(0,l.Z)(t.descriptionLong,e.className,"grid-descriptionLong")},a.createElement(r.Z,{text:e.event.descriptionLong,onChange:t=>e.event.update({descriptionLong:t})})):a.createElement("div",{style:{gridColumn:"descriptionLong"},className:(0,l.Z)(t.descriptionLong,e.className,"grid-descriptionLong"),onClick:()=>e.expandeable&&e.event.setExpanded(!0)},e.event.descriptionLong)}))},4701:(e,t,n)=>{n.d(t,{Z:()=>s});var a=n(7294),l=n(6010);const s=(0,n(6670).Pi)((e=>{const{styles:t}=e;return a.createElement("div",{style:{gridColumn:"kw"},className:(0,l.Z)("kw",t.kw,e.className,"grid-kw"),onClick:()=>e.expandeable&&e.event.setExpanded(!0)},e.event.kw)}))},5842:(e,t,n)=>{n.d(t,{Z:()=>c});var a=n(7294),l=n(6010),s=n(6670),r=n(4435);const c=(0,s.Pi)((e=>{const{styles:t}=e;return e.isEditable&&e.event.isEditing?a.createElement("div",{style:{gridColumn:"location"},className:(0,l.Z)(t.location,e.className,"grid-Location")},a.createElement(r.Z,{text:e.event.location,onChange:t=>e.event.update({location:t})})):a.createElement("div",{style:{gridColumn:"location"},className:(0,l.Z)(t.location,e.className,"grid-Location"),onClick:()=>e.expandeable&&e.event.setExpanded(!0)},e.event.location)}))},8414:(e,t,n)=>{n.d(t,{Z:()=>E});var a=n(7294),l=n(6010),s=n(6670),r=n(7476),c=n(5317),i=n(9372),d=n(6363);const o={[r.he.Draft]:c.YYf,[r.he.Published]:c.wo$,[r.he.Refused]:c.Tsh,[r.he.Review]:c.uOw},m={[r.he.Draft]:"blue",[r.he.Published]:"green",[r.he.Refused]:"red",[r.he.Review]:"orange"},E=(0,s.Pi)((e=>{const{styles:t}=e;return a.createElement("div",{style:{gridColumn:"state"},className:(0,l.Z)("state",t.state,e.className,"grid-isValid"),onClick:()=>e.expandeable&&e.event.setExpanded(!0)},a.createElement(i.Z,{icon:o[e.event.state],color:m[e.event.state],size:d.yd}))}))},4091:(e,t,n)=>{n.d(t,{Z:()=>T});var a=n(7462),l=n(7294),s=n(6010);const r={eventCard:"eventCard_FMEJ",flex:"flex__HOD",duration:"duration_dZgK",actions:"actions_JIT0"};var c=n(6670),i=n(6093),d=n(9372),o=n(5317),m=n(6363),E=n(9346),u=n(1314);const g="card_IH_T",v="lesson_HPd5",p="subject_yQcp",Z="teacher_WQHa",h="day_G814",f="duration_Lqp8",y=(0,c.Pi)((e=>{const{lesson:t}=e,n=(0,u.oR)("userStore"),{current:a}=n;return l.createElement("div",{className:(0,s.Z)("card",g)},l.createElement("div",{className:(0,s.Z)("card__body",v)},l.createElement(d.Z,{text:t.subject,className:(0,s.Z)(p)}),t.teachers.map(((e,t)=>l.createElement(d.Z,{key:e.id,text:e.name,className:(0,s.Z)(Z),color:e.name===a.shortName?"primary":void 0}))),l.createElement(d.Z,{text:`${t.fStart} - ${t.fEnd}`,icon:l.createElement(m.SU,{hour:t.start.getHours(),color:"blue"}),iconSide:"left",className:(0,s.Z)(f)}),l.createElement(d.Z,{text:t.day,className:(0,s.Z)(h)})))}));var N=n(5999),b=n(3182),x=n(3335),k=n(4701),C=n(5981),_=n(529),L=n(5842),P=n(6691),w=n(8414),S=n(2263);const T=(0,c.Pi)((e=>{const{event:t}=e,{i18n:n}=(0,S.Z)(),c=(0,u.oR)("socketStore"),g={event:t,styles:r},v={...g,isEditable:!0};return l.createElement("div",{className:(0,s.Z)(r.eventCard,"card")},l.createElement("div",{className:(0,s.Z)("card__header")},l.createElement("h3",null,t.description)),l.createElement("div",{className:(0,s.Z)("card__body")},l.createElement(i.Z,null,l.createElement("dt",null,l.createElement(N.Z,{id:"event.description",description:"for a single event: description"},"Titel")),l.createElement("dd",null,l.createElement(b.Z,v)),t.descriptionLong&&l.createElement(l.Fragment,null,l.createElement("dt",null,l.createElement(N.Z,{id:"event.descriptionLong",description:"for a single event: description long"},"Beschreibung")),l.createElement("dd",null,l.createElement(x.Z,v))),l.createElement("dt",null,l.createElement(N.Z,{id:"event.state",description:"for a single event: state"},"Status")),l.createElement("dd",{className:r.flex},l.createElement(w.Z,g)),l.createElement("dt",null,l.createElement(N.Z,{id:"event.kw",description:"for a single event: kw"},"KW")),l.createElement("dd",null,l.createElement(k.Z,g)),l.createElement("dt",null,l.createElement(N.Z,{id:"event.weekday",description:"for a single event: weekday"},"Wochentag")),l.createElement("dd",null,l.createElement(C.Z,g)),l.createElement("dt",null,l.createElement(N.Z,{id:"event.date",description:"for a single event: date range"},"Datum")),l.createElement("dd",{className:r.flex},l.createElement(_.Z,(0,a.Z)({},v,{time:"start"}))),l.createElement("dd",{className:r.flex},l.createElement(m.JO,{path:o.kLV}),l.createElement(_.Z,(0,a.Z)({},v,{time:"end"}))),l.createElement("dd",{className:(0,s.Z)(r.duration,r.flex)},l.createElement(m.JO,{path:o.JvG}),t.fDuration),l.createElement("dt",null,l.createElement(N.Z,{id:"event.location",description:"for a single event: location"},"Ort")),l.createElement("dd",null,l.createElement(L.Z,v)),t.isEditing?l.createElement(l.Fragment,null,l.createElement("dt",null,l.createElement(N.Z,{id:"event.audience",description:"for a single event: class and department picker"},"Beteiligte")),l.createElement("dd",null,l.createElement(P.Z,v))):l.createElement(l.Fragment,null,t.classes.size>0&&l.createElement(l.Fragment,null,l.createElement("dt",null,l.createElement(N.Z,{id:"event.classes",description:"for a single event: classes"},"Klassen")),l.createElement("dd",null,[...t.classes].map(((e,t)=>l.createElement(d.Z,{key:`cl-${t}`,text:e}))))),t.departments.length>0&&l.createElement(l.Fragment,null,l.createElement("dt",null,l.createElement(N.Z,{id:"event.departments",description:"for a single event: departments"},"Departemente")),l.createElement("dd",null,t.departments.map(((e,t)=>l.createElement(d.Z,{key:`gr-${t}`,text:e.name,color:e.color})))))),t.affectedLessonsByClass.some((e=>e.lessons.length>0))&&l.createElement(l.Fragment,null,l.createElement("dt",null,l.createElement(N.Z,{id:"event.affectedLessons",description:"for a single event: affected lessons"},"Betroffene Lektionen")),t.affectedLessonsByClass.map(((e,t)=>l.createElement(l.Fragment,{key:`kl-${t}`},l.createElement("dt",null,e.class),l.createElement("dd",{className:(0,s.Z)(r.lessons)},e.lessons.map(((e,t)=>l.createElement(y,{lesson:e,key:e.id})))))))))),l.createElement("div",{className:(0,s.Z)("card__footer")},l.createElement(E.Z,{text:(0,N.I)({message:"Alle betroffenen Lektionen anzeigen",id:"event.button.showAllLessons",description:"for a single event: button to show all affected lessons"}),icon:o.e_F,onClick:()=>{c.checkUnpersistedEvent(t.props)}})))}))},9372:(e,t,n)=>{n.d(t,{Z:()=>m,g:()=>i});var a=n(7294),l=n(6010),s=n(2323),r=n(6363),c=n(5736);const i=e=>({text:e.text,iconSide:e.iconSide,noOutline:e.noOutline,disabled:e.disabled,color:e.color,size:e.size}),d=e=>{const t=(e.children||e.text)&&e.icon;if(!e.icon)return null;let n=e.icon;return"string"==typeof n&&(n=a.createElement(r.JO,{path:n,size:e.size})),a.createElement("span",{className:(0,l.Z)(t&&s.Z.inlineIcon,s.Z.icon)},n)},o=e=>{const t=(e.children||e.text)&&e.icon,n=e.iconSide??"right";return a.createElement(a.Fragment,null,e.icon&&"left"===n&&a.createElement(d,e),a.createElement("span",{className:(0,l.Z)(t&&s.Z.border)},e.text&&a.createElement("span",null,e.text),e.children&&e.children),e.icon&&"right"===n&&a.createElement(d,e))},m=e=>{const t=e.text&&!(e.children||e.icon),n=e.icon&&!(e.children||e.text),r=(0,c.pv)(e.color,e.color?void 0:"secondary"),i={};e.color&&!r&&(i["--ifm-badge-background-color"]=e.color,i["--ifm-badge-border-color"]=e.color,i["--ifm-badge-color"]="white",i.color="white");const d=(0,l.Z)(s.Z.badge,n&&s.Z.soloIcon,e.icon&&!n&&("left"===e.iconSide?s.Z.iconLeft:s.Z.iconRight),t&&s.Z.soloText,"badge",r,e.className,e.disabled&&s.Z.disabled);return a.createElement("span",{className:(0,l.Z)(d),style:i,title:e.title},a.createElement(o,e))}},7989:(e,t,n)=>{n.d(t,{Z:()=>E});var a=n(7294),l=n(6010);const s="checkbox_gJbf",r="label_D_bl",c="disabled_xuMP",i="partialChecked_Zohe",d="checked_OLMX";var o=n(6670),m=n(8949);const E=(0,o.Pi)((e=>a.createElement("div",{className:(0,l.Z)(s,e.checked&&d,e.partialChecked&&i,e.className)},a.createElement("label",{className:(0,l.Z)(r,e.disabled&&c)},a.createElement("input",{className:s,type:"checkbox",disabled:e.disabled,onChange:(0,m.aD)((t=>{e.onChange(!e.checked,t.nativeEvent.shiftKey)})),checked:e.checked}),e.label))))},6093:(e,t,n)=>{n.d(t,{Z:()=>r});var a=n(7294),l=n(6010);const s="definitionList_H1Qd";const r=(0,n(6670).Pi)((e=>a.createElement("dl",{className:(0,l.Z)(s)},e.children)))},1243:(e,t,n)=>{n.d(t,{Z:()=>r});var a=n(7294),l=n(6010);const s="section_Ytos";const r=(0,n(6670).Pi)((e=>a.createElement("div",{className:(0,l.Z)("hero","shadow--lw",s)},a.createElement("div",{className:(0,l.Z)("container")},e.title&&a.createElement("h1",{className:(0,l.Z)("hero__title")},e.title),e.subtitle&&a.createElement("p",{className:(0,l.Z)("hero__subtitle")},e.subtitle),a.createElement("div",null,e.children)))))},4435:(e,t,n)=>{n.d(t,{Z:()=>c});var a=n(7294),l=n(6010);const s="textarea_o3BM",r=(e,t,n,l)=>{(0,a.useEffect)((()=>{if(e){e.style.height="auto";const t=e.scrollHeight,a=16*(n??1);e.style.height=`${t<a?a:t}px`}}),[e,t,l??[]])},c=e=>{const[t,n]=a.useState(null);return r(t,e.text,e.rows||3),a.createElement("div",{className:(0,l.Z)(s)},a.createElement("textarea",{value:e.text,ref:n,rows:e.rows||3,onChange:t=>e.onChange(t.target.value)}))}},8129:(e,t,n)=>{n.r(t),n.d(t,{default:()=>m});var a=n(7294),l=n(6670),s=n(1314),r=n(6910),c=n(6550),i=n(4887),d=n(4091),o=n(1243);const m=(0,l.Pi)((e=>{const t=(0,c.TH)(),n=(0,s.oR)("eventStore"),l=i.Z.parse(t.search),m=n.byIds(l.id),E=m.length>1?"Termine":"Termin";return a.createElement(r.Z,null,a.createElement(o.Z,{title:E},m.map(((e,t)=>a.createElement(d.Z,{event:e,key:t})))))}))},2323:(e,t,n)=>{n.d(t,{Z:()=>a});const a={badge:"badge_AKes",soloIcon:"soloIcon_opdt",soloText:"soloText_iKfE",iconRight:"iconRight_csRp",inlineIcon:"inlineIcon_aeGj",border:"border_Klou",icon:"icon_MxrW",iconLeft:"iconLeft_s_Zi",disabled:"disabled_bco4"}}}]);