"use strict";(self.webpackChunkevents_app=self.webpackChunkevents_app||[]).push([[611],{1770:(e,t,l)=>{l.d(t,{Z:()=>T});var n=l(7476),a=l(1314),r=l(6010),c=l(1217),s=l(7294);const o="toggleFilter_QPPE",d="toggle_svt3",u="active_bQ42",m=(0,c.Pi)((e=>{const{values:t,onChange:l}=e;return s.createElement("div",{className:(0,r.default)(o)},t.map(((e,t)=>s.createElement("div",{key:t,style:{"--color":e.color||"var(--ifm-color-primary)"},onClick:()=>l(e.value),className:(0,r.default)("badge",d,e.active&&u)},e.label||e.value))))})),i="container_TWki",E="navbar_aGTL",v="button_gHpc",f="scrollContainer_HXqy",g="fullscreen_bB_W",p="table_g8Gw",h="td_QWnF",k="cell_fHhb",b="locked_oWCQ",w=e=>{const[t,l]=s.useState(!1);return s.createElement("td",{onMouseDown:n=>{e.locked||(t||n.preventDefault(),l(!0))},className:(0,r.default)(h)},t?s.createElement("form",null,s.createElement("textarea",{name:e.name,value:e.description,onChange:t=>{t.preventDefault(),e.onChange(t,e.id)},onBlur:e=>{e.preventDefault(),l(!1)},autoFocus:t,disabled:e.locked})):s.createElement("span",{className:(0,r.default)(k,e.locked&&b)},e.description||"-"))};var y=l(5141);const C={datePicker:"datePicker_zkfG",gym:"gym_DUtE",fms:"fms_yGUT",wms:"wms_wtpb"},_=(0,c.Pi)(s.forwardRef(((e,t)=>{const{event:l}=e;return s.createElement(s.Fragment,null,s.createElement("td",null,l.kw),s.createElement("td",null,l.weekday),s.createElement(w,{id:l.id,name:"description",description:l.description,onChange:e.onChange,locked:e.locked}),s.createElement("td",{style:{marginRight:"15px"},colSpan:2},l.isEditable?s.createElement(y.Z,{className:(0,r.default)(C.datePicker),onChange:e=>{l.setDateRange(e[0],e[1]),l.save(),console.log(e)},disableClock:!0,showLeadingZeros:!0,format:"dd.MM.yyyy HH:mm",clearIcon:null,"data-testid":"datePicker",value:[l.localStart,l.localEnd],locale:"gsw-u-sd-chzh"}):s.createElement("span",null,l.startDate)),s.createElement("td",null,l.location),s.createElement("td",null,l.departements.map(((e,t)=>s.createElement("span",{key:t,className:(0,r.default)("badge","badge--primary",C.badge,C[e.toLowerCase()])},e)))),s.createElement("td",null,l.classes.map(((e,t)=>s.createElement("span",{key:t,className:(0,r.default)("badge","badge--secondary")},e)))),s.createElement(w,{id:l.id,name:"descriptionLong",description:l.descriptionLong,onChange:e.onChange,locked:e.locked}))}))),N=(0,c.Pi)(s.forwardRef(((e,t)=>{const{event:l}=e;return s.createElement(s.Fragment,null,s.createElement("td",null,l.kw),s.createElement("td",null,l.weekday),s.createElement("td",null,l.description),s.createElement("td",null,`${l.startDate} ${l.startTime}`),s.createElement("td",null,`${l.endDate} ${l.endTime}`),s.createElement("td",null,l.location),s.createElement("td",null,l.departements.map(((e,t)=>s.createElement("span",{key:t,className:(0,r.default)("badge","badge--primary",C.badge,C[e.toLowerCase()])},e)))),s.createElement("td",null,l.classes.map(((e,t)=>s.createElement("span",{key:t,className:(0,r.default)("badge","badge--secondary")},e)))),s.createElement("td",null,l.descriptionLong))}))),S=(0,c.Pi)(s.forwardRef(((e,t)=>{const[l,n]=s.useState(!1),{event:a}=e;return s.createElement("tr",{ref:t,"data-id":a.id,onClick:()=>{e.locked||l||n(!0)},onBlur:()=>{n(!1)}},l?s.createElement(_,{event:a,onChange:e.onChange,locked:e.locked}):s.createElement(N,{event:a,locked:e.locked}))})));var F=l(8949),P=l(8517);const T=(0,c.Pi)((e=>{var t;const l=(0,a.o)("eventStore"),c=(0,a.o)("viewStore"),o=s.useRef(null);s.useEffect((()=>{const t=c.fullscreen;return e.showFullscreenButton&&c.setShowFullscreenButton(!0),()=>c.setShowFullscreenButton(t)}),[]),s.useEffect((()=>(0,F.U5)((()=>c.fullscreen),(e=>{var t;e?null==(t=o.current)||t.requestFullscreen():document.fullscreenElement&&document.exitFullscreen();console.log("fullscreen",c.fullscreen)}))),[]),s.useEffect((()=>{const e=()=>{!!document.fullscreenElement!==c.fullscreen&&c.setFullscreen(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",e),()=>document.removeEventListener("fullscreenchange",e)}),[]);const d=(e,t)=>{const n={};n[e.target.name]=e.target.value,l.updateEvent(t,n)},u=null==(t=(0,a.o)("userStore").current)?void 0:t.id;return s.createElement("div",{className:(0,r.default)(i),ref:o},c.fullscreen&&s.createElement("div",{className:(0,r.default)(E)},s.createElement("div",{className:(0,r.default)(v)},s.createElement(P.Z,null))),s.createElement("div",{className:(0,r.default)(f,c.fullscreen&&g)},s.createElement("table",{className:(0,r.default)(p)},s.createElement("thead",null,s.createElement("tr",null,s.createElement("th",null,"KW"),s.createElement("th",null,"Wochentag"),s.createElement("th",null,"Stichwort"),s.createElement("th",null,"Start"),s.createElement("th",null,"Ende"),s.createElement("th",null,"Ort"),s.createElement("th",null,s.createElement("div",null,"Schulen"),s.createElement(m,{values:Object.values(n.mT).map((e=>({value:e,active:c.eventTable.departments.has(e),color:`var(--${e.toLowerCase()})`}))),onChange:e=>{c.eventTable.departments.has(e)?c.eventTable.departments.delete(e):c.eventTable.departments.add(e)}})),s.createElement("th",null,"Klassen"),s.createElement("th",null,"Beschreibung"))),s.createElement("tbody",null,e.events.map((e=>s.createElement(S,{key:e.id,event:e,onChange:d,locked:e.authorId!==u})))))))}))},7657:(e,t,l)=>{l.r(t),l.d(t,{default:()=>o});var n=l(7294),a=l(1217),r=l(1314),c=l(4424),s=l(1770);const o=(0,a.Pi)((()=>{const e=(0,r.o)("viewStore");(0,r.o)("userStore");return n.createElement(c.Z,null,n.createElement("div",null,n.createElement(s.Z,{events:e.eventTable.events,showFullscreenButton:!0})))}))}}]);