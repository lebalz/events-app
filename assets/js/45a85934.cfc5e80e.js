"use strict";(self.webpackChunkevents_app=self.webpackChunkevents_app||[]).push([[203],{4673:(e,t,n)=>{n.d(t,{Z:()=>g});var a=n(7462),l=n(7294),r=n(6010),c=n(2389),s=n(6043);const o="details_lb9f",d="isBrowser_bmU9",m="collapsibleContent_i85q";function u(e){return!!e&&("SUMMARY"===e.tagName||u(e.parentElement))}function i(e,t){return!!e&&(e===t||i(e.parentElement,t))}function E(e){let{summary:t,children:n,...E}=e;const p=(0,c.Z)(),g=(0,l.useRef)(null),{collapsed:v,setCollapsed:f}=(0,s.u)({initialState:!E.open}),[k,b]=(0,l.useState)(E.open);return l.createElement("details",(0,a.Z)({},E,{ref:g,open:k,"data-collapsed":v,className:(0,r.default)(o,p&&d,E.className),onMouseDown:e=>{u(e.target)&&e.detail>1&&e.preventDefault()},onClick:e=>{e.stopPropagation();const t=e.target;u(t)&&i(t,g.current)&&(e.preventDefault(),v?(f(!1),b(!0)):f(!0))}}),t??l.createElement("summary",null,"Details"),l.createElement(s.z,{lazy:!1,collapsed:v,disableSSRStyle:!0,onCollapseTransitionEnd:e=>{f(e),b(!e)}},l.createElement("div",{className:m},n)))}const p="details_b_Ee";function g(e){let{...t}=e;return l.createElement(E,(0,a.Z)({},t,{className:(0,r.default)("alert alert--info",p,t.className)}))}},2597:(e,t,n)=>{n.d(t,{Z:()=>f});var a=n(1314),l=n(6010),r=n(1217),c=n(7294);const s="table_g8Gw",o="td_QWnF",d="cell_fHhb",m="locked_oWCQ",u=e=>{const[t,n]=c.useState(!1);return c.createElement("td",{onMouseDown:a=>{e.locked||(t||a.preventDefault(),n(!0))},className:(0,l.default)(o)},t?c.createElement("form",null,c.createElement("textarea",{name:e.name,value:e.description,onChange:t=>{t.preventDefault(),e.onChange(t,e.id)},onBlur:e=>{e.preventDefault(),n(!1)},autoFocus:t,disabled:e.locked})):c.createElement("span",{className:(0,l.default)(d,e.locked&&m)},e.description||"-"))};var i=n(5141);const E={datePicker:"datePicker_zkfG",gym:"gym_DUtE",fms:"fms_yGUT",wms:"wms_wtpb"},p=(0,r.Pi)(c.forwardRef(((e,t)=>{const{event:n}=e;return c.createElement(c.Fragment,null,c.createElement("td",null,n.kw),c.createElement("td",null,n.weekday),c.createElement(u,{id:n.id,name:"description",description:n.description,onChange:e.onChange,locked:e.locked}),c.createElement("td",{style:{marginRight:"15px"},colSpan:2},n.isEditable?c.createElement(i.Z,{className:(0,l.default)(E.datePicker),onChange:e=>{n.setDateRange(e[0],e[1]),n.save(),console.log(e)},disableClock:!0,showLeadingZeros:!0,format:"dd.MM.yyyy HH:mm",clearIcon:null,"data-testid":"datePicker",value:[n.localStart,n.localEnd],locale:"gsw-u-sd-chzh"}):c.createElement("span",null,n.startDate)),c.createElement("td",null,n.location),c.createElement("td",null,n.departements.map(((e,t)=>c.createElement("span",{key:t,className:(0,l.default)("badge","badge--primary",E.badge,E[e.toLowerCase()])},e)))),c.createElement("td",null,n.classes.map(((e,t)=>c.createElement("span",{key:t,className:(0,l.default)("badge","badge--secondary")},e)))),c.createElement(u,{id:n.id,name:"descriptionLong",description:n.descriptionLong,onChange:e.onChange,locked:e.locked}))}))),g=(0,r.Pi)(c.forwardRef(((e,t)=>{const{event:n}=e;return c.createElement(c.Fragment,null,c.createElement("td",null,n.kw),c.createElement("td",null,n.weekday),c.createElement("td",null,n.description),c.createElement("td",null,`${n.startDate} ${n.startTime}`),c.createElement("td",null,`${n.endDate} ${n.endTime}`),c.createElement("td",null,n.location),c.createElement("td",null,n.departements.map(((e,t)=>c.createElement("span",{key:t,className:(0,l.default)("badge","badge--primary",E.badge,E[e.toLowerCase()])},e)))),c.createElement("td",null,n.classes.map(((e,t)=>c.createElement("span",{key:t,className:(0,l.default)("badge","badge--secondary")},e)))),c.createElement("td",null,n.descriptionLong))}))),v=(0,r.Pi)(c.forwardRef(((e,t)=>{const[n,a]=c.useState(!1),{event:l}=e;return c.createElement("tr",{ref:t,"data-id":l.id,onClick:()=>{e.locked||n||a(!0)},onBlur:()=>{a(!1)}},n?c.createElement(p,{event:l,onChange:e.onChange,locked:e.locked}):c.createElement(g,{event:l,locked:e.locked}))}))),f=(0,r.Pi)((e=>{var t;const n=(0,a.o)("eventStore"),r=(e,t)=>{const a={};a[e.target.name]=e.target.value,n.updateEvent(t,a)},o=null==(t=(0,a.o)("userStore").current)?void 0:t.id;return c.createElement("table",{className:(0,l.default)(s)},c.createElement("thead",null,c.createElement("tr",null,c.createElement("th",null,"KW"),c.createElement("th",null,"Wochentag"),c.createElement("th",null,"Stichwort"),c.createElement("th",null,"Start"),c.createElement("th",null,"Ende"),c.createElement("th",null,"Ort"),c.createElement("th",null,"Schulen"),c.createElement("th",null,"Klassen"),c.createElement("th",null,"Beschreibung"))),c.createElement("tbody",null,e.events.map((e=>c.createElement(v,{key:e.id,event:e,onChange:r,locked:e.authorId!==o})))))}))},6862:(e,t,n)=>{n.d(t,{Z:()=>s});var a=n(7294),l=n(6010),r=n(1217),c=n(1314);const s=(0,r.Pi)((e=>{const t=(0,c.o)("eventStore");return a.createElement("div",null,a.createElement("button",{onClick:()=>{t.newEvent()},className:(0,l.default)("button","button--primary")},"+ Neues Event"))}))},4841:(e,t,n)=>{n.r(t),n.d(t,{default:()=>m});var a=n(7294),l=n(1217),r=n(5229),c=n(6862),s=n(2597),o=n(1314),d=n(4673);const m=(0,l.Pi)((()=>{var e;const t=(0,o.o)("eventStore"),n=(0,o.o)("userStore"),l=(0,o.o)("jobStore"),m=null==(e=n.current)?void 0:e.id;return a.createElement(r.Z,null,a.createElement("div",null,a.createElement(c.Z,null),a.createElement(s.Z,{events:t.byUser(m).filter((e=>!e.jobId))}),l.jobs.map(((e,t)=>{var n;return a.createElement(d.Z,{key:t,summary:a.createElement("summary",null,null==(n=e.user)?void 0:n.email," - ",e.filename||"|"," - ",e.state," - ",e.events.length)},a.createElement("div",null,a.createElement("button",{"aria-label":"Close",className:"clean-btn close",type:"button",onClick:()=>{l.destroy(e)}},a.createElement("span",{"aria-hidden":"true"},"\xd7")),a.createElement(s.Z,{events:e.events})))}))))}))}}]);