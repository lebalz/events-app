"use strict";(self.webpackChunkevents_app=self.webpackChunkevents_app||[]).push([[203],{4673:(e,t,n)=>{n.d(t,{Z:()=>p});var a=n(7462),l=n(7294),r=n(6010),c=n(2389),s=n(6043);const o="details_lb9f",d="isBrowser_bmU9",m="collapsibleContent_i85q";function u(e){return!!e&&("SUMMARY"===e.tagName||u(e.parentElement))}function i(e,t){return!!e&&(e===t||i(e.parentElement,t))}function E(e){let{summary:t,children:n,...E}=e;const v=(0,c.Z)(),p=(0,l.useRef)(null),{collapsed:f,setCollapsed:g}=(0,s.u)({initialState:!E.open}),[b,h]=(0,l.useState)(E.open);return l.createElement("details",(0,a.Z)({},E,{ref:p,open:b,"data-collapsed":f,className:(0,r.default)(o,v&&d,E.className),onMouseDown:e=>{u(e.target)&&e.detail>1&&e.preventDefault()},onClick:e=>{e.stopPropagation();const t=e.target;u(t)&&i(t,p.current)&&(e.preventDefault(),f?(g(!1),h(!0)):g(!0))}}),t??l.createElement("summary",null,"Details"),l.createElement(s.z,{lazy:!1,collapsed:f,disableSSRStyle:!0,onCollapseTransitionEnd:e=>{g(e),h(!e)}},l.createElement("div",{className:m},n)))}const v="details_b_Ee";function p(e){let{...t}=e;return l.createElement(E,(0,a.Z)({},t,{className:(0,r.default)("alert alert--info",v,t.className)}))}},1770:(e,t,n)=>{n.d(t,{Z:()=>P});var a=n(7476),l=n(1314),r=n(6010),c=n(1217),s=n(7294);const o="toggleFilter_QPPE",d="toggle_svt3",m="active_bQ42",u=(0,c.Pi)((e=>{const{values:t,onChange:n}=e;return s.createElement("div",{className:(0,r.default)(o)},t.map(((e,t)=>s.createElement("div",{key:t,style:{"--color":e.color||"var(--ifm-color-primary)"},onClick:()=>n(e.value),className:(0,r.default)("badge",d,e.active&&m)},e.label||e.value))))})),i="container_TWki",E="fullscreenButton_ReOE",v="table_g8Gw",p="td_QWnF",f="cell_fHhb",g="locked_oWCQ",b=e=>{const[t,n]=s.useState(!1);return s.createElement("td",{onMouseDown:a=>{e.locked||(t||a.preventDefault(),n(!0))},className:(0,r.default)(p)},t?s.createElement("form",null,s.createElement("textarea",{name:e.name,value:e.description,onChange:t=>{t.preventDefault(),e.onChange(t,e.id)},onBlur:e=>{e.preventDefault(),n(!1)},autoFocus:t,disabled:e.locked})):s.createElement("span",{className:(0,r.default)(f,e.locked&&g)},e.description||"-"))};var h=n(5141);const k={datePicker:"datePicker_zkfG",gym:"gym_DUtE",fms:"fms_yGUT",wms:"wms_wtpb"},y=(0,c.Pi)(s.forwardRef(((e,t)=>{const{event:n}=e;return s.createElement(s.Fragment,null,s.createElement("td",null,n.kw),s.createElement("td",null,n.weekday),s.createElement(b,{id:n.id,name:"description",description:n.description,onChange:e.onChange,locked:e.locked}),s.createElement("td",{style:{marginRight:"15px"},colSpan:2},n.isEditable?s.createElement(h.Z,{className:(0,r.default)(k.datePicker),onChange:e=>{n.setDateRange(e[0],e[1]),n.save(),console.log(e)},disableClock:!0,showLeadingZeros:!0,format:"dd.MM.yyyy HH:mm",clearIcon:null,"data-testid":"datePicker",value:[n.localStart,n.localEnd],locale:"gsw-u-sd-chzh"}):s.createElement("span",null,n.startDate)),s.createElement("td",null,n.location),s.createElement("td",null,n.departements.map(((e,t)=>s.createElement("span",{key:t,className:(0,r.default)("badge","badge--primary",k.badge,k[e.toLowerCase()])},e)))),s.createElement("td",null,n.classes.map(((e,t)=>s.createElement("span",{key:t,className:(0,r.default)("badge","badge--secondary")},e)))),s.createElement(b,{id:n.id,name:"descriptionLong",description:n.descriptionLong,onChange:e.onChange,locked:e.locked}))}))),C=(0,c.Pi)(s.forwardRef(((e,t)=>{const{event:n}=e;return s.createElement(s.Fragment,null,s.createElement("td",null,n.kw),s.createElement("td",null,n.weekday),s.createElement("td",null,n.description),s.createElement("td",null,`${n.startDate} ${n.startTime}`),s.createElement("td",null,`${n.endDate} ${n.endTime}`),s.createElement("td",null,n.location),s.createElement("td",null,n.departements.map(((e,t)=>s.createElement("span",{key:t,className:(0,r.default)("badge","badge--primary",k.badge,k[e.toLowerCase()])},e)))),s.createElement("td",null,n.classes.map(((e,t)=>s.createElement("span",{key:t,className:(0,r.default)("badge","badge--secondary")},e)))),s.createElement("td",null,n.descriptionLong))}))),w=(0,c.Pi)(s.forwardRef(((e,t)=>{const[n,a]=s.useState(!1),{event:l}=e;return s.createElement("tr",{ref:t,"data-id":l.id,onClick:()=>{e.locked||n||a(!0)},onBlur:()=>{a(!1)}},n?s.createElement(y,{event:l,onChange:e.onChange,locked:e.locked}):s.createElement(C,{event:l,locked:e.locked}))})));var N=n(8849),S=n.n(N),_=n(5317);const P=(0,c.Pi)((e=>{var t;const n=(0,l.o)("eventStore"),c=(0,l.o)("viewStore"),o=s.useRef(null),[d,m]=s.useState(!1);s.useEffect((()=>{function e(){m(Boolean(document.fullscreenElement))}return document.addEventListener("fullscreenchange",e),()=>document.removeEventListener("fullscreenchange",e)}),[]);const p=(e,t)=>{const a={};a[e.target.name]=e.target.value,n.updateEvent(t,a)},f=null==(t=(0,l.o)("userStore").current)?void 0:t.id;return s.createElement("div",{className:(0,r.default)(i),ref:o},s.createElement("table",{className:(0,r.default)(v)},s.createElement("thead",null,s.createElement("div",{className:(0,r.default)(E),onClick:()=>{if(o.current)try{if(d)document.exitFullscreen();else{const e=o.current.requestFullscreen;e&&e.call(o.current)}}catch(e){console.error(e)}}},s.createElement(S(),{path:d?_.v2$:_.h40,size:1})),s.createElement("tr",null,s.createElement("th",null,"KW"),s.createElement("th",null,"Wochentag"),s.createElement("th",null,"Stichwort"),s.createElement("th",null,"Start"),s.createElement("th",null,"Ende"),s.createElement("th",null,"Ort"),s.createElement("th",null,s.createElement("div",null,"Schulen"),s.createElement(u,{values:Object.values(a.mT).map((e=>({value:e,active:c.eventTable.departments.has(e),color:`var(--${e.toLowerCase()})`}))),onChange:e=>{c.eventTable.departments.has(e)?c.eventTable.departments.delete(e):c.eventTable.departments.add(e)}})),s.createElement("th",null,"Klassen"),s.createElement("th",null,"Beschreibung"))),s.createElement("tbody",null,e.events.map((e=>s.createElement(w,{key:e.id,event:e,onChange:p,locked:e.authorId!==f}))))))}))},6662:(e,t,n)=>{n.r(t),n.d(t,{default:()=>u});var a=n(7294),l=n(1217),r=n(4424),c=n(6010),s=n(1314);const o=(0,l.Pi)((e=>{const t=(0,s.o)("eventStore");return a.createElement("div",null,a.createElement("button",{onClick:()=>{t.newEvent()},className:(0,c.default)("button","button--primary")},"+ Neues Event"))}));var d=n(1770),m=n(4673);const u=(0,l.Pi)((()=>{var e;const t=(0,s.o)("eventStore"),n=(0,s.o)("userStore"),l=(0,s.o)("jobStore"),c=null==(e=n.current)?void 0:e.id;return a.createElement(r.Z,null,a.createElement("div",null,a.createElement(o,null),a.createElement(d.Z,{events:t.byUser(c).filter((e=>!e.jobId))}),l.jobs.map(((e,t)=>{var n;return a.createElement(m.Z,{key:t,summary:a.createElement("summary",null,null==(n=e.user)?void 0:n.email," - ",e.filename||"|"," - ",e.state," - ",e.events.length)},a.createElement("div",null,a.createElement("button",{"aria-label":"Close",className:"clean-btn close",type:"button",onClick:()=>{l.destroy(e)}},a.createElement("span",{"aria-hidden":"true"},"\xd7")),a.createElement(d.Z,{events:e.events})))}))))}))}}]);