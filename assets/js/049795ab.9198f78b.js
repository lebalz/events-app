"use strict";(self.webpackChunkevents_app=self.webpackChunkevents_app||[]).push([[392],{2825:(e,t,l)=>{l.d(t,{Z:()=>m});var n=l(7294),a=l(6010);const r="container_X8RJ",c="select_S5Gz";var s=l(6670),i=l(1314),o=l(8749);const m=(0,s.Pi)((e=>{const t=(0,i.oR)("untisStore"),{user:l}=e;return l?n.createElement("div",{className:(0,a.Z)(r)},n.createElement(o.ZP,{menuPortalTarget:document.body,styles:{menuPortal:e=>({...e,zIndex:9999}),valueContainer:e=>({...e,flexBasis:"12em"})},className:(0,a.Z)(c),classNamePrefix:"select",value:{value:l.untisId,label:l.untisTeacher?`${l.shortName} - ${l.untisTeacher?.longName}`:"-"},options:t.teachers.slice().map((e=>({value:e.id,label:`${e.shortName} - ${e.longName}`}))),onChange:e=>{l.linkUntis(e?.value)},isMulti:!1,isSearchable:!0,isClearable:!!l.untisTeacher})):null}))},6871:(e,t,l)=>{l.d(t,{Z:()=>o});var n=l(7462),a=l(7294),r=l(6010),c=l(8542),s=l(6363),i=l(9346);const o=e=>{const t=a.useRef(null),[l,o]=a.useState(!1),m=()=>{o(!1),document.removeEventListener("click",m)};a.useEffect((()=>()=>{document.removeEventListener("click",m)}),[]),a.useEffect((()=>{l&&t.current&&t.current.scrollIntoView({behavior:"smooth",block:"center"})}),[l,t]);const d=l?a.createElement(i.Z,{className:(0,r.Z)(c.Z.confirm),color:"red",onClick:t=>{t.stopPropagation(),t.preventDefault(),e.onClick()},text:"Ja"}):null;return a.createElement("span",{className:(0,r.Z)(c.Z.delete,l&&c.Z.expanded,e.className),ref:t},"left"===(e.flyoutSide??"left")&&d,a.createElement(i.Z,(0,n.Z)({title:"L\xf6schen"},(0,i.g)(e),{className:(0,r.Z)(e.className,c.Z.delete,"right"===e.flyoutSide&&c.Z.right,e.className),onClick:e=>{o(!l),document.addEventListener("click",m),e.stopPropagation(),e.preventDefault()},color:"red",icon:a.createElement(s.pJ,{size:e.size??s.yd})})),"right"===e.flyoutSide&&d)}},2624:(e,t,l)=>{l.d(t,{Z:()=>o});var n=l(7462),a=l(7294),r=l(6010),c=l(8542),s=l(6363),i=l(9346);const o=e=>a.createElement(i.Z,(0,n.Z)({title:"\xc4nderungen verwerfen"},(0,i.g)(e),{className:(0,r.Z)(c.Z.discard,"button--sm",e.className),color:"secondary",onClick:e.onClick,icon:a.createElement(s.wq,{size:e.size??s.yd})}))},4655:(e,t,l)=>{l.d(t,{Z:()=>o});var n=l(7462),a=l(7294),r=l(6010),c=l(8542),s=l(6363),i=l(9346);const o=e=>a.createElement(i.Z,(0,n.Z)({title:"Bearbeiten"},(0,i.g)(e),{className:(0,r.Z)(c.Z.edit,e.className),color:"orange",onClick:e.onClick,icon:a.createElement(s.dY,{size:e.size??s.yd})}))},1687:(e,t,l)=>{l.d(t,{Z:()=>o});var n=l(7462),a=l(7294),r=l(6010),c=l(8542),s=l(6363),i=l(9346);const o=e=>a.createElement(i.Z,(0,n.Z)({title:"Speichern"},(0,i.g)(e),{className:(0,r.Z)(c.Z.save,e.className),color:"green",onClick:e.onClick,icon:a.createElement(s.N,{size:e.size??s.yd,disabled:e.disabled})}))},1923:(e,t,l)=>{l.d(t,{Z:()=>a});var n=l(7294);const a=e=>n.createElement("div",null,n.createElement("input",{type:"text",value:e.text,onChange:t=>{e.onChange(t.currentTarget.value)}}))},3255:(e,t,l)=>{l.r(t),l.d(t,{default:()=>H});var n=l(7294),a=l(6010);const r="layout_mSig",c="tabs_lcx4";var s=l(6670),i=l(2135),o=l(4866),m=l(5162),d=l(1314);const u="table_eTTt",E="semester_kUGh",p="dirty_LUW9";var h=l(1923),Z=l(6330),C=l(8949);const S=e=>{const[t,l]=n.useState((0,Z.g7)(e.date).toISOString().substring(0,10));return n.useEffect((0,C.aD)((()=>{try{const l=new Date(t);e.onChange((0,Z.g7)(l))}catch(l){}})),[t]),n.createElement("div",null,n.createElement("input",{type:"date",value:t,onChange:e=>{l(e.currentTarget.value)}}))};var g=l(6871),v=l(2624),b=l(1687);const y=(0,s.Pi)((e=>{const{semester:t}=e,l=n.useRef(null);return n.useEffect((()=>{l.current&&l.current.scrollIntoView({behavior:"smooth",block:"center"})}),[l]),n.createElement("tr",{className:(0,a.Z)(E,t.isDirty&&p)},n.createElement("td",null,n.createElement(h.Z,{text:t.name,onChange:e=>{t.update({name:e})}})),n.createElement("td",null,n.createElement(S,{date:t.start,onChange:e=>{t.update({start:e.toISOString()})}})),n.createElement("td",null,n.createElement(S,{date:t.end,onChange:e=>{t.update({end:e.toISOString()})}})),n.createElement("td",null,n.createElement("div",{ref:l},t.isDirty&&n.createElement(v.Z,{onClick:()=>t.reset()}),n.createElement(b.Z,{disabled:!t.isDirty,onClick:()=>t.save(),apiState:t.apiStateFor(`save-${t.id}`)}),n.createElement(g.Z,{onClick:()=>t.destroy(),flyoutSide:"left",apiState:t.apiStateFor(`destroy-${t.id}`)}))))}));var k=l(4655);const N=(0,s.Pi)((e=>{const{semester:t}=e;return n.createElement("tr",{className:(0,a.Z)(E,t.isDirty&&p)},n.createElement("td",null,t.name),n.createElement("td",null,t.fStartDate),n.createElement("td",null,t.fEndDate),n.createElement("td",null,n.createElement(k.Z,{onClick:()=>t.setEditing(!0)})))})),f=(0,s.Pi)((e=>{const t=(0,d.oR)("semesterStore");return n.createElement("div",null,n.createElement("table",{className:(0,a.Z)(u)},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",null,"Name"),n.createElement("th",null,"Start Date"),n.createElement("th",null,"End Date"),n.createElement("th",null,"Edit"))),n.createElement("tbody",null,t.semesters.map(((e,t)=>e.isEditing?n.createElement(y,{semester:e,key:e.id}):n.createElement(N,{semester:e,key:e.id}))))))}));var D=l(9346),x=l(6363),A=l(5317);const T="user_IBUF",I="role_AuJ8";var z=l(9372),P=l(8106),_=l(2825),w=l(1684);const R=(0,s.Pi)((e=>{const t=(0,d.oR)("userStore"),{user:l}=e;return n.createElement("tr",{className:(0,a.Z)(T)},n.createElement("td",null,l.email),n.createElement("td",null,n.createElement("div",{className:(0,a.Z)(I)},Object.keys(P.uU).map(((e,a)=>n.createElement(D.Z,{text:P.uU[e],disabled:t.apiStateFor(`save-role-${l.id}`)===w.gQ.LOADING,active:l.role===P.uU[e],color:l.role===P.uU[e]?"primary":"secondary",onClick:()=>t.setRole(l,P.uU[e]),key:a}))))),n.createElement("td",null,n.createElement(_.Z,{user:l})),n.createElement("td",null,(0,Z.o0)(l.createdAt)),n.createElement("td",null,(0,Z.o0)(l.updatedAt)),n.createElement("td",null,n.createElement(z.Z,{text:l.id})))}));var U=l(5999);const F=(0,s.Pi)((e=>{const{adminUserTable:t}=(0,d.oR)("viewStore"),{users:l}=e,a="asc"===t.sortDirection?A.BcN:A.D8s;return n.createElement("div",null,n.createElement("table",null,n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",null,n.createElement(D.Z,{size:x.yd,iconSide:"left",icon:"email"===t.sortColumn&&a,text:(0,U.I)({message:"Email",id:"admin.userTable.th.email",description:"th: email"}),onClick:()=>t.setSortColumn("email")})),n.createElement("th",null,n.createElement(D.Z,{size:x.yd,iconSide:"left",icon:"role"===t.sortColumn&&a,text:(0,U.I)({message:"Rolle",id:"admin.userTable.th.role",description:"th: role"}),onClick:()=>t.setSortColumn("role")})),n.createElement("th",null,n.createElement(D.Z,{size:x.yd,iconSide:"left",icon:"shortName"===t.sortColumn&&a,text:(0,U.I)({message:"K\xfcrzel",id:"admin.userTable.th.shortName",description:"th: shortName"}),onClick:()=>t.setSortColumn("shortName")})),n.createElement("th",null,n.createElement(D.Z,{size:x.yd,iconSide:"left",icon:"createdAt"===t.sortColumn&&a,text:(0,U.I)({message:"Erstellt",id:"admin.userTable.th.createdAt",description:"th: createdAt"}),onClick:()=>t.setSortColumn("createdAt")})),n.createElement("th",null,n.createElement(D.Z,{size:x.yd,iconSide:"left",icon:"updatedAt"===t.sortColumn&&a,text:(0,U.I)({message:"Aktualisiert",id:"admin.userTable.th.updatedAt",description:"th: updatedAt"}),onClick:()=>t.setSortColumn("updatedAt")})),n.createElement("th",null,n.createElement(D.Z,{size:x.yd,iconSide:"left",icon:"id"===t.sortColumn&&a,text:(0,U.I)({message:"Id",id:"admin.userTable.th.id",description:"th: id"}),onClick:()=>t.setSortColumn("id")})))),n.createElement("tbody",null,l.map(((e,t)=>n.createElement(R,{key:e.id,user:e}))))))})),B="department_ZgH2",O="colorData_lVoi",L="color_q8xy",$="actions_59Ek",J="description_XpT3";var j=l(4435),G=l(8749);const M=(0,s.Pi)((e=>{const t=(0,d.oR)("departmentStore"),{department:l}=e;return n.createElement("tr",{className:(0,a.Z)(B)},n.createElement("td",null,n.createElement(h.Z,{text:l.name,onChange:e=>l.update({name:e})})),n.createElement("td",{className:(0,a.Z)(J)},n.createElement(j.Z,{text:l.description,onChange:e=>l.update({description:e}),rows:2})),n.createElement("td",null,n.createElement(G.ZP,{menuPortalTarget:document.body,styles:{menuPortal:e=>({...e,zIndex:9999})},value:{value:l.letter,label:l.letter},options:"abcdefghijklmnopqrstufwxyzABCDEFGHIJKLMNOPQRSTUFWXYZ".split("").map((e=>({value:e,label:e}))),onChange:e=>{l.update({letter:e?.value})},isMulti:!1,isSearchable:!0,isClearable:!1})),n.createElement("td",{className:(0,a.Z)(O)},n.createElement("label",{className:(0,a.Z)(L)},n.createElement(z.Z,{text:l.color,color:l.color}),n.createElement("input",{type:"color",value:l.color,onChange:e=>l.update({color:e.target.value})}))),n.createElement("td",null,(0,Z.o0)(l.createdAt)),n.createElement("td",null,(0,Z.o0)(l.updatedAt)),n.createElement("td",null,n.createElement(z.Z,{text:l.id})),n.createElement("td",null,n.createElement("div",{className:(0,a.Z)($)},l.isDirty&&n.createElement(v.Z,{onClick:()=>l.reset()}),l.isDirty&&n.createElement(b.Z,{onClick:()=>t.save(l)}),n.createElement(g.Z,{onClick:()=>t.destroy(l),disabled:l.events.length>0||l.classes.length>0}))))})),q=(0,s.Pi)((e=>{const t=(0,d.oR)("departmentStore"),{adminDepartmentTable:l}=(0,d.oR)("viewStore"),{departments:a}=e,r="asc"===l.sortDirection?A.BcN:A.D8s;return n.createElement("div",null,n.createElement(D.Z,{text:(0,U.I)({message:"Neue Abteilung",description:"Create a new department",id:"admin.DepartmentTable.create"}),onClick:()=>t.create({name:" "}),iconSide:"left",icon:A.jxF,apiState:t.apiStateFor("create")}),n.createElement("table",null,n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",null,n.createElement(D.Z,{size:x.yd,iconSide:"left",icon:"name"===l.sortColumn&&r,text:(0,U.I)({message:"Name",description:"th: name",id:"admin.DepartmentTable.th.name"}),onClick:()=>l.setSortColumn("name")})),n.createElement("th",null,n.createElement(U.Z,{id:"admin.DepartmentTable.th.description",description:"th: description"},"Beschreibung")),n.createElement("th",null,n.createElement(D.Z,{size:x.yd,iconSide:"left",icon:"letter"===l.sortColumn&&r,text:(0,U.I)({message:"Buchstabe",description:"th: department letter",id:"admin.DepartmentTable.th.letter"}),onClick:()=>l.setSortColumn("letter")})),n.createElement("th",null,n.createElement(D.Z,{size:x.yd,iconSide:"left",icon:"color"===l.sortColumn&&r,text:(0,U.I)({message:"Farbe",description:"th: color",id:"admin.DepartmentTable.th.color"}),onClick:()=>l.setSortColumn("color")})),n.createElement("th",null,n.createElement(D.Z,{size:x.yd,iconSide:"left",icon:"createdAt"===l.sortColumn&&r,text:(0,U.I)({message:"Erstellt",description:"th: created At",id:"admin.DepartmentTable.th.createdAt"}),onClick:()=>l.setSortColumn("createdAt")})),n.createElement("th",null,n.createElement(D.Z,{size:x.yd,iconSide:"left",icon:"updatedAt"===l.sortColumn&&r,text:(0,U.I)({message:"Aktualisiert",description:"th: updatedAt",id:"admin.DepartmentTable.th.updatedAt"}),onClick:()=>l.setSortColumn("updatedAt")})),n.createElement("th",null,n.createElement(U.Z,{id:"admin.DepartmentTable.th.id",description:"th: id"},"Id")),n.createElement("th",null,n.createElement(U.Z,{id:"admin.DepartmentTable.th.actions",description:"th: actions"},"Aktionen")))),n.createElement("tbody",null,a.map(((e,t)=>n.createElement(M,{key:e.id,department:e}))))))})),H=(0,s.Pi)((()=>{const e=(0,d.oR)("userStore"),t=(0,d.oR)("semesterStore"),l=(0,d.oR)("viewStore");(0,d.oR)("registrationPeriodStore");return e.current?.role!==P.uU.ADMIN?n.createElement(i.Z,null,n.createElement("main",null,n.createElement("div",{className:"hero hero--primary"},n.createElement("div",{className:"container"},n.createElement("h1",{className:"hero__title"},"Nur f\xfcr Admins"),n.createElement("p",{className:"hero__subtitle"},"Nur f\xfcr Administratoren zug\xe4nglicher Bereich"))))):n.createElement(i.Z,{wrapperClassName:(0,a.Z)(r)},n.createElement(o.Z,{className:(0,a.Z)(c)},n.createElement(m.Z,{value:"users",label:"Users",default:!0},n.createElement(F,{users:l.adminUserTable.users})),n.createElement(m.Z,{value:"semesters",label:"Semester"},n.createElement(D.Z,{title:"Semester Hinzuf\xfcgen",text:"Neues Semester",iconSide:"left",icon:n.createElement(x.JO,{path:A.jxF}),color:"primary",apiState:t.apiStateFor("create"),onClick:()=>{t.create({name:"New",start:new Date(Date.now()+7776e6).toISOString(),end:new Date(Date.now()+23328e6).toISOString()})}}),n.createElement(f,null)),n.createElement(m.Z,{value:"departments",label:"Abteilungen"},n.createElement(q,{departments:l.adminDepartmentTable.departments})),n.createElement(m.Z,{value:"reg-periods",label:"Registrierungs Perioden"},"This is a banana \ud83c\udf4c")))}))}}]);