"use strict";(self.webpackChunkevents_app=self.webpackChunkevents_app||[]).push([[203],{4673:(e,t,l)=>{l.d(t,{Z:()=>v});var n=l(7462),a=l(7294),r=l(6010),c=l(2389),s=l(6043);const o="details_lb9f",u="isBrowser_bmU9",d="collapsibleContent_i85q";function m(e){return!!e&&("SUMMARY"===e.tagName||m(e.parentElement))}function i(e,t){return!!e&&(e===t||i(e.parentElement,t))}function E(e){let{summary:t,children:l,...E}=e;const f=(0,c.Z)(),v=(0,a.useRef)(null),{collapsed:p,setCollapsed:g}=(0,s.u)({initialState:!E.open}),[b,h]=(0,a.useState)(E.open);return a.createElement("details",(0,n.Z)({},E,{ref:v,open:b,"data-collapsed":p,className:(0,r.default)(o,f&&u,E.className),onMouseDown:e=>{m(e.target)&&e.detail>1&&e.preventDefault()},onClick:e=>{e.stopPropagation();const t=e.target;m(t)&&i(t,v.current)&&(e.preventDefault(),p?(g(!1),h(!0)):g(!0))}}),t??a.createElement("summary",null,"Details"),a.createElement(s.z,{lazy:!1,collapsed:p,disableSSRStyle:!0,onCollapseTransitionEnd:e=>{g(e),h(!e)}},a.createElement("div",{className:d},l)))}const f="details_b_Ee";function v(e){let{...t}=e;return a.createElement(E,(0,n.Z)({},t,{className:(0,r.default)("alert alert--info",f,t.className)}))}},1770:(e,t,l)=>{l.d(t,{Z:()=>D});var n=l(1314),a=l(6010),r=l(1217),c=l(7294);const s="toggleFilter_QPPE",o="toggle_svt3",u="active_bQ42",d=(0,r.Pi)((e=>{const{values:t,onChange:l}=e;return c.createElement("div",{className:(0,a.default)(s)},t.map(((e,t)=>c.createElement("div",{key:t,style:{"--color":e.color||"var(--ifm-color-primary)"},onClick:()=>l(e.value),className:(0,a.default)("badge",o,e.active&&u)},e.label||e.value))))})),m="container_TWki",i="navbar_aGTL",E="button_gHpc",f="scrollContainer_HXqy",v="fullscreen_bB_W",p="table_g8Gw",g="td_QWnF",b="cell_fHhb",h="locked_oWCQ",k=e=>{const[t,l]=c.useState(!1);return c.createElement("td",{onMouseDown:n=>{e.locked||(t||n.preventDefault(),l(!0))},className:(0,a.default)(g)},t?c.createElement("form",null,c.createElement("textarea",{name:e.name,value:e.description,onChange:t=>{t.preventDefault(),e.onChange(t,e.id)},onBlur:e=>{e.preventDefault(),l(!1)},autoFocus:t,disabled:e.locked})):c.createElement("span",{className:(0,a.default)(b,e.locked&&h)},e.description||"-"))};var y=l(5141);const w={datePicker:"datePicker_zkfG",gbsl:"gbsl_cyU4",fms:"fms_yGUT",wms:"wms_wtpb"},C=(0,r.Pi)(c.forwardRef(((e,t)=>{const{event:l}=e;return c.createElement(c.Fragment,null,c.createElement("td",null,l.kw),c.createElement("td",null,l.weekday),c.createElement(k,{id:l.id,name:"description",description:l.description,onChange:e.onChange,locked:e.locked}),c.createElement("td",{style:{marginRight:"15px"},colSpan:2},l.isEditable?c.createElement(y.Z,{className:(0,a.default)(w.datePicker),onChange:e=>{l.setDateRange(e[0],e[1]),l.save(),console.log(e)},disableClock:!0,showLeadingZeros:!0,format:"dd.MM.yyyy HH:mm",clearIcon:null,"data-testid":"datePicker",value:[l.localStart,l.localEnd],locale:"gsw-u-sd-chzh"}):c.createElement("span",null,l.startDate)),c.createElement("td",null,l.location),c.createElement("td",null,l.departments.map(((e,t)=>c.createElement("span",{key:t,className:(0,a.default)("badge","badge--primary",w.badge,w[e.toLowerCase()])},e)))),c.createElement("td",null,l.classes.map(((e,t)=>c.createElement("span",{key:t,className:(0,a.default)("badge","badge--secondary")},e)))),c.createElement(k,{id:l.id,name:"descriptionLong",description:l.descriptionLong,onChange:e.onChange,locked:e.locked}))}))),S=(0,r.Pi)(c.forwardRef(((e,t)=>{const{event:l}=e;return c.createElement(c.Fragment,null,c.createElement("td",null,l.kw),c.createElement("td",null,l.weekday),c.createElement("td",null,l.description),c.createElement("td",null,`${l.startDate} ${l.startTime}`),c.createElement("td",null,`${l.endDate} ${l.endTime}`),c.createElement("td",null,l.location),c.createElement("td",null,l.departments.map(((e,t)=>c.createElement("span",{key:t,className:(0,a.default)("badge","badge--primary",w.badge,w[e.toLowerCase()])},e)))),c.createElement("td",null,l.classes.map(((e,t)=>c.createElement("span",{key:t,className:(0,a.default)("badge","badge--secondary")},e)))),c.createElement("td",null,l.descriptionLong))}))),_=(0,r.Pi)(c.forwardRef(((e,t)=>{const[l,n]=c.useState(!1),{event:a}=e;return c.createElement("tr",{ref:t,"data-id":a.id,onClick:()=>{e.locked||l||n(!0)},onBlur:()=>{n(!1)}},l?c.createElement(C,{event:a,onChange:e.onChange,locked:e.locked}):c.createElement(S,{event:a,locked:e.locked}))})));var N=l(8949),F=l(8517),P=l(8433);const D=(0,r.Pi)((e=>{var t;const l=(0,n.o)("eventStore"),r=(0,n.o)("viewStore"),s=c.useRef(null);c.useEffect((()=>{const t=r.fullscreen;return e.showFullscreenButton&&r.setShowFullscreenButton(!0),()=>r.setShowFullscreenButton(t)}),[]),c.useEffect((()=>(0,N.U5)((()=>r.fullscreen),(e=>{var t;e?null==(t=s.current)||t.requestFullscreen():document.fullscreenElement&&document.exitFullscreen();console.log("fullscreen",r.fullscreen)}))),[]),c.useEffect((()=>{const e=()=>{!!document.fullscreenElement!==r.fullscreen&&r.setFullscreen(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",e),()=>document.removeEventListener("fullscreenchange",e)}),[]);const o=(e,t)=>{const n={};n[e.target.name]=e.target.value,l.updateEvent(t,n)},u=null==(t=(0,n.o)("userStore").current)?void 0:t.id;return c.createElement("div",{className:(0,a.default)(m),ref:s},r.fullscreen&&c.createElement("div",{className:(0,a.default)(i)},c.createElement("div",{className:(0,a.default)(E)},c.createElement(F.Z,null))),c.createElement("div",{className:(0,a.default)(f,r.fullscreen&&v)},c.createElement("table",{className:(0,a.default)(p)},c.createElement("thead",null,c.createElement("tr",null,c.createElement("th",null,"KW"),c.createElement("th",null,"Wochentag"),c.createElement("th",null,"Stichwort"),c.createElement("th",null,"Start"),c.createElement("th",null,"Ende"),c.createElement("th",null,"Ort"),c.createElement("th",null,c.createElement("div",null,"Schulen"),c.createElement(d,{values:["GYM","FMS","WMS"].map((e=>({value:e,active:r.eventTable.departments.has((0,P.tk)(e)[0]),color:`var(--${e.toLowerCase()})`}))),onChange:e=>{r.eventTable.departments.has((0,P.tk)(e)[0])?(0,P.tk)(e).forEach((e=>{r.eventTable.departments.delete(e)})):(0,P.tk)(e).forEach((e=>{r.eventTable.departments.add(e)}))}})),c.createElement("th",null,"Klassen"),c.createElement("th",null,"Beschreibung"))),c.createElement("tbody",null,e.events.map((e=>c.createElement(_,{key:e.id,event:e,onChange:o,locked:e.authorId!==u})))))))}))},6662:(e,t,l)=>{l.r(t),l.d(t,{default:()=>m});var n=l(7294),a=l(1217),r=l(4424),c=l(6010),s=l(1314);const o=(0,a.Pi)((e=>{const t=(0,s.o)("eventStore");return n.createElement("div",null,n.createElement("button",{onClick:()=>{t.newEvent()},className:(0,c.default)("button","button--primary")},"+ Neues Event"))}));var u=l(1770),d=l(4673);const m=(0,a.Pi)((()=>{var e;const t=(0,s.o)("eventStore"),l=(0,s.o)("userStore"),a=(0,s.o)("jobStore"),c=null==(e=l.current)?void 0:e.id;return n.createElement(r.Z,null,n.createElement("div",null,n.createElement(o,null),n.createElement(u.Z,{events:t.byUser(c).filter((e=>!e.jobId)),showFullscreenButton:!1}),a.jobs.map(((e,t)=>{var l;return n.createElement(d.Z,{key:t,summary:n.createElement("summary",null,null==(l=e.user)?void 0:l.email," - ",e.filename||"|"," - ",e.state," - ",e.events.length)},n.createElement("div",null,n.createElement("button",{"aria-label":"Close",className:"clean-btn close",type:"button",onClick:()=>{a.destroy(e)}},n.createElement("span",{"aria-hidden":"true"},"\xd7")),n.createElement(u.Z,{events:e.events,showFullscreenButton:!1})))}))))}))}}]);