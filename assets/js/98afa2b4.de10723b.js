"use strict";(self.webpackChunkevents_app=self.webpackChunkevents_app||[]).push([[611],{1997:(e,t,a)=>{a.d(t,{Z:()=>T});var n=a(1314),l=a(6010),s=a(1217),r=a(7294);const c="container_UHDD",o="navbar_diMJ",i="button_jVKi",d="scrollContainer_A12N",m="fullscreen_y9b4",u="table_vwM1",E="editMode_fWke";var v=a(4655);const p={datePicker:"datePicker_t_wz",gbsl:"gbsl_NEvy",fms:"fms_DQ2z",wms:"wms_Jav2",eventRow:"eventRow_JClS",kw:"kw_oYUj",weekday:"weekday_oD07",description:"description_ymu7",location:"location_WWN0",descriptionLong:"descriptionLong_UX1h",classes:"classes_ygPH",departmentNames:"departmentNames_zFY4",editMode:"editMode_V7Fu",expanded:"expanded_WZ86"},h=(0,s.Pi)((e=>{const[t,a]=r.useState(!1),s=(0,n.o)("viewStore"),{eventTable:c}=s,{event:o}=e;return r.createElement("tr",{"data-id":o.id,onClick:()=>{t||a(!0)},onBlur:()=>{a(!1)},className:(0,l.W)(p.eventRow,t&&p.expanded,e.editMode&&p.editMode)},r.createElement("td",{className:(0,l.W)(p.kw)},o.kw),r.createElement("td",{className:(0,l.W)(p.weekday)},o.weekday),r.createElement("td",{style:{maxWidth:c.maxWidthDescription},className:(0,l.W)(p.description)},o.description),r.createElement("td",{className:(0,l.W)(p.startDate)},o.fStartDate),r.createElement("td",{className:(0,l.W)(p.startTime)},o.fStartTime),r.createElement("td",{className:(0,l.W)(p.endDate)},o.fEndDate),r.createElement("td",{className:(0,l.W)(p.endTime)},o.fEndTime),r.createElement("td",{className:(0,l.W)(p.location),style:{maxWidth:c.maxWidthLocation}},o.location),r.createElement("td",{className:(0,l.W)(p.departmentNames)},o.departmentNames.map(((e,t)=>r.createElement("span",{key:t,className:(0,l.W)("badge","badge--primary",p.badge,p[e.toLowerCase()])},e)))),r.createElement("td",{className:(0,l.W)(p.classes)},o.classes.map(((e,t)=>r.createElement("span",{key:t,className:(0,l.W)("badge","badge--secondary")},e)))),r.createElement("td",{className:(0,l.W)(p.descriptionLong),style:{maxWidth:c.maxWidthDescriptionLong}},o.descriptionLong),o.isEditable&&r.createElement("td",null,r.createElement(v.Z,{onClick:()=>o.setEditing(!0)})))}));var g=a(8949),f=a(8517),N=a(6871),Z=a(2624),b=a(1687);const k="container_u2Ul",w="select_SnI8";var C=a(9740);const W=(0,s.Pi)((e=>{const t=(0,n.o)("eventStore"),a=(0,n.o)("untisStore"),s=t.find(e.eventId);return r.createElement("div",{className:(0,l.Z)(k)},r.createElement(C.ZP,{menuPortalTarget:document.body,styles:{menuPortal:e=>({...e,zIndex:9999}),valueContainer:e=>({...e,flexBasis:"12em"})},className:(0,l.Z)(w),classNamePrefix:"select",value:s.classes.map((e=>{var t;return{label:e,value:(null==(t=a.findClassByName(e))?void 0:t.id)||"-"}})),options:a.sortedClasses.slice().map((e=>({value:e.id,label:`${e.name}`}))),onChange:(0,g.aD)((e=>{e&&s.classes.replace(e.map((e=>e.label)))})),isMulti:!0,isSearchable:!0,isClearable:!0}))}));var y=a(6330);const S=e=>r.createElement("div",null,r.createElement("input",{type:"datetime-local",value:(0,y.g7)(e.date).toISOString().substring(0,16),onChange:t=>{const a=new Date(t.currentTarget.value);e.onChange((0,y.g7)(a))}})),x="container_aNPG",_="select_EFlv",L=(0,s.Pi)((e=>{const t=(0,n.o)("eventStore"),a=(0,n.o)("departmentStore"),s=t.find(e.eventId);return r.createElement("div",{className:(0,l.Z)(x)},r.createElement(C.ZP,{menuPortalTarget:document.body,styles:{menuPortal:e=>({...e,zIndex:9999}),valueContainer:e=>({...e,flexBasis:"12em"})},className:(0,l.Z)(_),classNamePrefix:"select",value:s.departmentIds.map((e=>({label:a.find(e).name,value:e}))),options:a.departments.slice().map((e=>({value:e.id,label:`${e.name}`}))),onChange:(0,g.aD)((e=>{e&&s.departmentIds.replace(e.map((e=>e.value)))})),isMulti:!0,isSearchable:!0,isClearable:!0}))})),D=e=>{const t=e.maxChars||80,{text:a}=e,n=Math.ceil(a.length/t);return r.createElement("div",null,r.createElement("textarea",{value:e.text,wrap:"soft",rows:Math.max(2,n),onChange:t=>{e.onChange(t.currentTarget.value.replace(/\n\r?/g," ").replace(/\s+/g," "))}}))};var P=a(1923);const I=(0,s.Pi)((e=>{const{event:t}=e,a=(0,n.o)("viewStore"),{eventTable:s}=a,c=r.useRef(null);return r.useEffect((()=>{c.current&&c.current.scrollIntoView({behavior:"smooth",block:"center"})}),[c]),r.createElement("tr",{"data-id":t.id,className:(0,l.W)(p.eventRow,p.editMode)},r.createElement("td",{className:(0,l.W)(p.kw)},t.kw),r.createElement("td",{className:(0,l.W)(p.weekday)},t.weekday),r.createElement("td",{style:{maxWidth:s.maxWidthDescription},className:(0,l.W)(p.description)},r.createElement(D,{maxChars:20,text:t.description,onChange:e=>t.update({description:e})})),r.createElement("td",{className:(0,l.W)(p.startDate),colSpan:2},r.createElement(S,{date:t.start,onChange:e=>t.update({start:e.toISOString()})})),r.createElement("td",{className:(0,l.W)(p.endDate),colSpan:2},r.createElement(S,{date:t.end,onChange:e=>t.update({end:e.toISOString()})})),r.createElement("td",{className:(0,l.W)(p.location),style:{maxWidth:s.maxWidthLocation}},r.createElement(P.Z,{text:t.location,onChange:e=>t.update({location:e})})),r.createElement("td",{className:(0,l.W)(p.departmentNames)},r.createElement(L,{eventId:t.id})),r.createElement("td",{className:(0,l.W)(p.classes)},r.createElement(W,{eventId:t.id})),r.createElement("td",{className:(0,l.W)(p.descriptionLong),style:{maxWidth:s.maxWidthDescriptionLong}},r.createElement(D,{maxChars:30,text:t.descriptionLong,onChange:e=>t.update({descriptionLong:e})})),r.createElement("td",null,r.createElement("div",{ref:c},r.createElement(Z.Z,{onClick:()=>t.reset()}),r.createElement(b.Z,{disabled:!t.isDirty,onClick:()=>t.save(),apiState:t.apiStateFor(`save-${t.id}`)}),r.createElement(N.Z,{onClick:()=>t.destroy(),apiState:t.apiStateFor(`destroy-${t.id}`)}))))})),T=(0,s.Pi)((e=>{var t;const a=(0,n.o)("viewStore"),s=r.useRef(null);r.useEffect((()=>{const t=a.fullscreen;return e.showFullscreenButton&&a.setShowFullscreenButton(!0),()=>a.setShowFullscreenButton(t)}),[]),r.useEffect((()=>{const e=()=>{if(s.current){a.eventTable.setClientWidth(s.current.clientWidth);const e=parseFloat(getComputedStyle(s.current).fontSize);a.eventTable.setBaseFontSize(e)}};return s.current&&(window.addEventListener("resize",e),e()),()=>window.removeEventListener("resize",e)}),[s,a]),r.useEffect((()=>(0,g.U5)((()=>a.fullscreen),(e=>{var t;e?null==(t=s.current)||t.requestFullscreen():document.fullscreenElement&&document.exitFullscreen();console.log("fullscreen",a.fullscreen)}))),[]),r.useEffect((()=>{const e=()=>{!!document.fullscreenElement!==a.fullscreen&&a.setFullscreen(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",e),()=>document.removeEventListener("fullscreenchange",e)}),[]);const v=null==(t=(0,n.o)("userStore").current)?void 0:t.id,p=e.events.some((e=>e.editing));return r.createElement("div",{className:(0,l.Z)(c),ref:s},a.fullscreen&&r.createElement("div",{className:(0,l.Z)(o)},r.createElement("div",{className:(0,l.Z)(i)},r.createElement(f.Z,null))),r.createElement("div",{className:(0,l.Z)(d,a.fullscreen&&m)},r.createElement("table",{className:(0,l.Z)(u)},r.createElement("thead",null,r.createElement("tr",{className:(0,l.Z)(p&&E)},r.createElement("th",null,"KW"),r.createElement("th",null,"Tag"),r.createElement("th",null,"Stichwort"),r.createElement("th",null,"Start"),r.createElement("th",null,"Zeit"),r.createElement("th",null,"Ende"),r.createElement("th",null,"Zeit"),r.createElement("th",null,"Ort"),r.createElement("th",null,"Schulen"),r.createElement("th",null,"Klassen"),r.createElement("th",null,"Beschreibung"))),r.createElement("tbody",null,e.events.map((e=>e.editing?r.createElement(I,{key:e.id,event:e,locked:e.authorId!==v}):r.createElement(h,{key:e.id,event:e,locked:e.authorId!==v,editMode:p})))))))}))},6871:(e,t,a)=>{a.d(t,{Z:()=>i});var n=a(7462),l=a(7294),s=a(6010),r=a(8542),c=a(6363),o=a(9346);const i=e=>{const t=l.useRef(null),[a,i]=l.useState(!1),d=()=>{i(!1),document.removeEventListener("click",d)};l.useEffect((()=>()=>{document.removeEventListener("click",d)}),[]),l.useEffect((()=>{a&&t.current&&t.current.scrollIntoView({behavior:"smooth",block:"center"})}),[a,t]);const m=a?l.createElement(o.Z,{className:(0,s.Z)(r.Z.confirm,"button","button--danger"),onClick:t=>{t.stopPropagation(),t.preventDefault(),e.onClick()},text:"Ja, L\xf6schen!"}):null;return l.createElement("span",{className:(0,s.Z)(r.Z.delete,a&&r.Z.expanded,e.className),ref:t},"left"===(e.flyoutSide??"left")&&m,l.createElement(o.Z,(0,n.Z)({},(0,o.g)(e),{className:(0,s.Z)(e.className,r.Z.delete,"right"===e.flyoutSide&&r.Z.right),title:"L\xf6schen",onClick:e=>{i(!a),document.addEventListener("click",d),e.stopPropagation(),e.preventDefault()},icon:l.createElement(c.pJ,{size:c.yd})})),"right"===e.flyoutSide&&m)}},2624:(e,t,a)=>{a.d(t,{Z:()=>i});var n=a(7462),l=a(7294),s=a(6010),r=a(8542),c=a(6363),o=a(9346);const i=e=>l.createElement(o.Z,(0,n.Z)({},(0,o.g)(e),{className:(0,s.Z)(r.Z.discard,"button--secondary","button--sm"),title:"\xc4nderungen verwerfen",onClick:e.onClick,icon:l.createElement(c.wq,{size:c.yd})}))},4655:(e,t,a)=>{a.d(t,{Z:()=>i});var n=a(7462),l=a(7294),s=a(6010),r=a(8542),c=a(6363),o=a(9346);const i=e=>l.createElement(o.Z,(0,n.Z)({},(0,o.g)(e),{className:(0,s.Z)(r.Z.edit,"button--warning"),title:"Bearbeiten",onClick:e.onClick,icon:l.createElement(c.dY,{size:c.yd})}))},1687:(e,t,a)=>{a.d(t,{Z:()=>i});var n=a(7462),l=a(7294),s=a(6010),r=a(8542),c=a(6363),o=a(9346);const i=e=>l.createElement(o.Z,(0,n.Z)({},(0,o.g)(e),{className:(0,s.Z)(r.Z.save),title:"Speichern",onClick:e.onClick,icon:l.createElement(c.N,{size:c.yd,disabled:e.disabled})}))},1923:(e,t,a)=>{a.d(t,{Z:()=>l});var n=a(7294);const l=e=>n.createElement("div",null,n.createElement("input",{type:"text",value:e.text,onChange:t=>{e.onChange(t.currentTarget.value)}}))},7657:(e,t,a)=>{a.r(t),a.d(t,{default:()=>o});var n=a(7294),l=a(1217),s=a(1314),r=a(6910),c=a(1997);const o=(0,l.Pi)((()=>{const e=(0,s.o)("viewStore");return n.createElement(r.Z,null,n.createElement("div",null,n.createElement(c.Z,{events:e.eventTable.events,showFullscreenButton:!0})))}))}}]);