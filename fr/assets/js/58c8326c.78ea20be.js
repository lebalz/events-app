"use strict";(self.webpackChunkevents_app=self.webpackChunkevents_app||[]).push([[712],{6871:(e,t,l)=>{l.d(t,{Z:()=>i});var n=l(7462),a=l(7294),r=l(6010),s=l(8542),c=l(6363),o=l(9346);const i=e=>{const t=a.useRef(null),[l,i]=a.useState(!1),m=()=>{i(!1),document.removeEventListener("click",m)};a.useEffect((()=>()=>{document.removeEventListener("click",m)}),[]),a.useEffect((()=>{l&&t.current&&t.current.scrollIntoView({behavior:"smooth",block:"center"})}),[l,t]);const d=l?a.createElement(o.Z,{className:(0,r.Z)(s.Z.confirm),color:"red",onClick:t=>{t.stopPropagation(),t.preventDefault(),e.onClick()},text:"Ja"}):null;return a.createElement("span",{className:(0,r.Z)(s.Z.delete,l&&s.Z.expanded,e.className),ref:t},"left"===(e.flyoutSide??"left")&&d,a.createElement(o.Z,(0,n.Z)({title:"L\xf6schen"},(0,o.g)(e),{className:(0,r.Z)(e.className,s.Z.delete,"right"===e.flyoutSide&&s.Z.right,e.className),onClick:e=>{i(!l),document.addEventListener("click",m),e.stopPropagation(),e.preventDefault()},color:"red",icon:a.createElement(c.pJ,{size:e.size??c.yd})})),"right"===e.flyoutSide&&d)}},3962:(e,t,l)=>{l.d(t,{Z:()=>E});var n=l(7462),a=l(7294),r=l(6010),s=l(2389),c=l(6043);const o="details_XTtI",i="isBrowser_Z1r4",m="collapsibleContent_dVni";function d(e){return!!e&&("SUMMARY"===e.tagName||d(e.parentElement))}function u(e,t){return!!e&&(e===t||u(e.parentElement,t))}const E=e=>{let{summary:t,children:l,...E}=e;const p=(0,s.Z)(),Z=(0,a.useRef)(null),{collapsed:y,setCollapsed:b}=(0,c.u)({initialState:!E.open}),[g,N]=(0,a.useState)(E.open),v=a.isValidElement(t)?t:a.createElement("summary",null,t??"Details");return a.createElement("details",(0,n.Z)({},E,{ref:Z,open:g,"data-collapsed":y,className:(0,r.Z)("alert","alert--info",o,p&&i,E.className),onMouseDown:e=>{d(e.target)&&e.detail>1&&e.preventDefault()},onClick:e=>{e.stopPropagation();const t=e.target;d(t)&&u(t,Z.current)&&(e.preventDefault(),y?(b(!1),N(!0)):b(!0))}}),v,a.createElement(c.z,{lazy:!0,collapsed:y,disableSSRStyle:!0,onCollapseTransitionEnd:e=>{b(e),N(!e)}},a.createElement("div",{className:m},l)))}},1243:(e,t,l)=>{l.d(t,{Z:()=>s});var n=l(7294),a=l(6010);const r="section_Ytos";const s=(0,l(6670).Pi)((e=>n.createElement("div",{className:(0,a.Z)("hero","shadow--lw",r)},n.createElement("div",{className:(0,a.Z)("container")},e.title&&n.createElement("h1",{className:(0,a.Z)("hero__title")},e.title),e.subtitle&&n.createElement("p",{className:(0,a.Z)("hero__subtitle")},e.subtitle),n.createElement("div",null,e.children)))))},8238:(e,t,l)=>{l.r(t),l.d(t,{default:()=>z});var n=l(2135),a=l(7294);const r="details_Jpqp";var s=l(6010);const c="dropArea__uqL";var o=l(6670),i=l(1314),m=l(9346),d=l(5317),u=l(6363);const E=(0,o.Pi)((()=>{const[e,t]=(0,a.useState)(null),[l,n]=(0,a.useState)(1),r=(0,i.oR)("jobStore");return a.createElement("label",{className:(0,s.Z)(c),htmlFor:"excel-import"},a.createElement("input",{className:(0,s.Z)("button","button--secondary"),key:l,type:"file",id:"excel-import",name:"terminplan",accept:".xlsx",style:{marginBottom:"12px"},multiple:!1,onChange:e=>t(e.currentTarget.files[0])}),a.createElement(m.Z,{text:"Upload",title:"Importiere Excel-Datei",disabled:!e,color:"primary",onClick:a=>{if(a.preventDefault(),a.stopPropagation(),!e)throw"No file was selected";return r.importExcel(e),t(null),n(l+1),!1},icon:a.createElement(u.JO,{path:d.weJ,size:u.yd})}))}));var p=l(3962),Z=l(1243);const y="details_UDt6",b="summary_j7r8",g="spacer_g4So";var N=l(1921),v=l(7462),f=l(2323),S=l(9372);const h=e=>a.createElement(S.Z,(0,v.Z)({title:"Erfolgreich"},(0,S.g)(e),{className:(0,s.Z)(f.Z.save,e.className),icon:a.createElement(u.fB,{size:e.size??u.yd,disabled:e.disabled})})),x=e=>a.createElement(S.Z,(0,v.Z)({title:"Fehler"},(0,S.g)(e),{className:(0,s.Z)(f.Z.save,e.className),icon:a.createElement(u.jj,{size:e.size??u.yd,disabled:e.disabled})})),P=e=>a.createElement(S.Z,(0,v.Z)({title:"Laden"},(0,S.g)(e),{className:(0,s.Z)(f.Z.load,e.className),icon:a.createElement(u.gb,{size:e.size??u.yd,disabled:e.disabled})})),O=e=>{const t=e.text&&("string"==typeof e.text?e.text:e.text[e.state]),l=e.title&&("string"==typeof e.title?e.title:e.title[e.state]);switch(e.state){case"success":return a.createElement(h,(0,v.Z)({},e,{text:t,title:l}));case"error":return a.createElement(x,(0,v.Z)({},e,{text:t,title:l}));case"loading":return a.createElement(P,(0,v.Z)({},e,{text:t,title:l}))}};var C=l(6871);const k={[N.Z.PENDING]:"loading",[N.Z.DONE]:"success",[N.Z.ERROR]:"error",[N.Z.REVERTED]:"loading"},R={[N.O.SYNC_UNTIS]:"Sync Untis",[N.O.IMPORT]:"Import",[N.O.CLONE]:"Klonen"},_={[N.O.SYNC_UNTIS]:"orange",[N.O.IMPORT]:"blue",[N.O.CLONE]:"lightBlue"},D=(0,o.Pi)((e=>{const t=(0,i.oR)("semesterStore"),l=(0,i.oR)("jobStore"),{job:n}=e;return a.createElement("summary",{className:(0,s.Z)(b)},a.createElement(O,{state:k[n.state],size:u.yd}),a.createElement(S.Z,{text:R[n.type],color:_[n.type]}),a.createElement(S.Z,{text:n.createdAt.toLocaleDateString()}),a.createElement("div",{className:(0,s.Z)(g)}),n.type===N.O.IMPORT&&a.createElement(S.Z,{text:`${n.events.length}`,color:"blue"}),a.createElement("div",{className:(0,s.Z)(g)}),n.type===N.O.IMPORT&&a.createElement(C.Z,{onClick:()=>{n.destroy()},apiState:n.apiState(`destroy-${n.id}`),disabled:n.state===N.Z.PENDING}),n.type===N.O.SYNC_UNTIS&&n.id===l.syncJobs[0].id&&a.createElement(m.Z,{disabled:l.hasPendingSyncJobs,onClick:e=>{e.preventDefault(),e.stopPropagation();const{currentSemester:l}=t;return l&&t.syncUntis(l),!1},text:"Sync Untis",icon:a.createElement(u.fo,{spin:l.hasPendingSyncJobs}),color:"primary"}))}));var j=l(6093),I=l(614);const J=(0,o.Pi)((e=>{const{job:t}=e;return a.createElement("div",null,a.createElement("div",null,a.createElement(j.Z,null,a.createElement("dt",null,"Id"),a.createElement("dd",null,t.id),a.createElement("dt",null,"State"),a.createElement("dd",null,t.state),t.type===N.O.IMPORT&&a.createElement(a.Fragment,null,a.createElement("dt",null,"Filename"),a.createElement("dd",null,t.filename),a.createElement("dt",null,"Events"),a.createElement("dd",null,t.events.length)),a.createElement("dt",null,"Created At"),a.createElement("dd",null,t.createdAt.toLocaleString()),a.createElement("dt",null,"Updated At"),a.createElement("dd",null,t.updatedAt.toLocaleString()))),t.fLog.length>0&&a.createElement(I.Z,{language:"json",title:"log.json"},t.fLog))})),L=(0,o.Pi)((e=>{const{job:t}=e;return a.createElement(p.Z,{className:(0,s.Z)(y),summary:a.createElement(D,{job:t})},a.createElement(J,{job:t}))})),z=(0,o.Pi)((()=>{const e=(0,i.oR)("untisStore"),t=(0,i.oR)("jobStore");return a.createElement(n.Z,null,a.createElement(Z.Z,{title:"Sync Untis",subtitle:"Synchronisiere die Stundenpl\xe4ne, Klassen und Lehrpersonen von WebUntis."},t.syncJobs.length>0?a.createElement(p.Z,{className:(0,s.Z)(r),summary:a.createElement(D,{job:t.syncJobs[0]})},a.createElement("div",null,a.createElement(J,{job:t.syncJobs[0]}),t.syncJobs.slice(1).map(((e,t)=>a.createElement(L,{key:t,job:e}))))):a.createElement(m.Z,{onClick:t=>{t.preventDefault(),t.stopPropagation(),e.sync()},text:"Sync Untis",icon:a.createElement(u.fo,{spin:t.hasPendingSyncJobs}),className:"button--primary"})),a.createElement(Z.Z,{title:a.createElement("span",null,"Excel Import ",a.createElement(u.JO,{path:d.Wee,size:2,color:"green"})),subtitle:"Importiere Daten aus Excel-Dateien."},a.createElement(E,null),a.createElement("div",null,t.importJobs.map(((e,t)=>a.createElement(L,{key:e.id,job:e}))))))}))}}]);