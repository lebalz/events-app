"use strict";(self.webpackChunkevents_app=self.webpackChunkevents_app||[]).push([[392],{2825:(e,t,n)=>{n.d(t,{Z:()=>m});var a=n(7294),l=n(6010);const r="container_X8RJ",c="select_S5Gz";var s=n(6670),i=n(1314),o=n(8749);const m=(0,s.Pi)((e=>{const t=(0,i.oR)("untisStore"),{user:n}=e;return n?a.createElement("div",{className:(0,l.Z)(r)},a.createElement(o.ZP,{menuPortalTarget:document.body,styles:{menuPortal:e=>({...e,zIndex:9999}),valueContainer:e=>({...e,flexBasis:"12em"})},className:(0,l.Z)(c),classNamePrefix:"select",value:{value:n.untisId,label:n.untisTeacher?`${n.shortName} - ${n.untisTeacher?.longName}`:"-"},options:t.teachers.slice().map((e=>({value:e.id,label:`${e.shortName} - ${e.longName}`}))),onChange:e=>{n.linkUntis(e?.value)},isMulti:!1,isSearchable:!0,isClearable:!!n.untisTeacher})):null}))},6871:(e,t,n)=>{n.d(t,{Z:()=>o});var a=n(7462),l=n(7294),r=n(6010),c=n(8542),s=n(6363),i=n(9346);const o=e=>{const t=l.useRef(null),[n,o]=l.useState(!1),m=()=>{o(!1),document.removeEventListener("click",m)};l.useEffect((()=>()=>{document.removeEventListener("click",m)}),[]),l.useEffect((()=>{n&&t.current&&t.current.scrollIntoView({behavior:"smooth",block:"center"})}),[n,t]);const d=n?l.createElement(i.Z,{className:(0,r.Z)(c.Z.confirm),color:"red",onClick:t=>{t.stopPropagation(),t.preventDefault(),e.onClick()},text:"Ja"}):null;return l.createElement("span",{className:(0,r.Z)(c.Z.delete,n&&c.Z.expanded,e.className),ref:t},"left"===(e.flyoutSide??"left")&&d,l.createElement(i.Z,(0,a.Z)({title:"L\xf6schen"},(0,i.g)(e),{className:(0,r.Z)(e.className,c.Z.delete,"right"===e.flyoutSide&&c.Z.right,e.className),onClick:e=>{o(!n),document.addEventListener("click",m),e.stopPropagation(),e.preventDefault()},color:"red",icon:l.createElement(s.pJ,{size:e.size??s.yd})})),"right"===e.flyoutSide&&d)}},2624:(e,t,n)=>{n.d(t,{Z:()=>o});var a=n(7462),l=n(7294),r=n(6010),c=n(8542),s=n(6363),i=n(9346);const o=e=>l.createElement(i.Z,(0,a.Z)({title:"\xc4nderungen verwerfen"},(0,i.g)(e),{className:(0,r.Z)(c.Z.discard,"button--sm",e.className),color:"secondary",onClick:e.onClick,icon:l.createElement(s.wq,{size:e.size??s.yd})}))},1687:(e,t,n)=>{n.d(t,{Z:()=>o});var a=n(7462),l=n(7294),r=n(6010),c=n(8542),s=n(6363),i=n(9346);const o=e=>l.createElement(i.Z,(0,a.Z)({title:"Speichern"},(0,i.g)(e),{className:(0,r.Z)(c.Z.save,e.className),color:"green",onClick:e.onClick,icon:l.createElement(s.N,{size:e.size??s.yd,disabled:e.disabled})}))},1923:(e,t,n)=>{n.d(t,{Z:()=>l});var a=n(7294);const l=e=>a.createElement("div",null,a.createElement("input",{type:"text",value:e.text,onChange:t=>{e.onChange(t.currentTarget.value)}}))},3255:(e,t,n)=>{n.r(t),n.d(t,{default:()=>q});var a=n(7294),l=n(6010);const r="layout_mSig",c="tabs_lcx4";var s=n(6670),i=n(6910),o=n(4866),m=n(5162),d=n(1314);const u="table_eTTt",E="semester_kUGh",p="dirty_LUW9";var h=n(1923),Z=n(6330),S=n(8949);const C=e=>{const[t,n]=a.useState((0,Z.g7)(e.date).toISOString().substring(0,10));return a.useEffect((0,S.aD)((()=>{try{const n=new Date(t);e.onChange((0,Z.g7)(n))}catch(n){}})),[t]),a.createElement("div",null,a.createElement("input",{type:"date",value:t,onChange:e=>{n(e.currentTarget.value)}}))};var g=n(6871),v=n(2624),b=n(1687);const y=(0,s.Pi)((e=>{const{semester:t}=e,n=a.useRef(null);return a.useEffect((()=>{n.current&&n.current.scrollIntoView({behavior:"smooth",block:"center"})}),[n]),a.createElement("tr",{className:(0,l.Z)(E,t.isDirty&&p)},a.createElement("td",null,a.createElement(h.Z,{text:t.name,onChange:e=>{t.update({name:e})}})),a.createElement("td",null,a.createElement(C,{date:t.start,onChange:e=>{t.update({start:e.toISOString()})}})),a.createElement("td",null,a.createElement(C,{date:t.end,onChange:e=>{t.update({end:e.toISOString()})}})),a.createElement("td",null,a.createElement("div",{ref:n},t.isDirty&&a.createElement(v.Z,{onClick:()=>t.reset()}),a.createElement(b.Z,{disabled:!t.isDirty,onClick:()=>t.save(),apiState:t.apiStateFor(`save-${t.id}`)}),a.createElement(g.Z,{onClick:()=>t.destroy(),flyoutSide:"left",apiState:t.apiStateFor(`destroy-${t.id}`)}))))}));var N=n(4655);const k=(0,s.Pi)((e=>{const{semester:t}=e;return a.createElement("tr",{className:(0,l.Z)(E,t.isDirty&&p)},a.createElement("td",null,t.name),a.createElement("td",null,t.fStartDate),a.createElement("td",null,t.fEndDate),a.createElement("td",null,a.createElement(N.Z,{onClick:()=>t.setEditing(!0)})))})),f=(0,s.Pi)((e=>{const t=(0,d.oR)("semesterStore");return a.createElement("div",null,a.createElement("table",{className:(0,l.Z)(u)},a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null,"Name"),a.createElement("th",null,"Start Date"),a.createElement("th",null,"End Date"),a.createElement("th",null,"Edit"))),a.createElement("tbody",null,t.semesters.map(((e,t)=>e.isEditing?a.createElement(y,{semester:e,key:e.id}):a.createElement(k,{semester:e,key:e.id}))))))}));var D=n(9346),x=n(6363),A=n(5317);const T="user_IBUF",I="role_AuJ8";var z=n(9372),_=n(8106),w=n(2825),P=n(1684);const R=(0,s.Pi)((e=>{const t=(0,d.oR)("userStore"),{user:n}=e;return a.createElement("tr",{className:(0,l.Z)(T)},a.createElement("td",null,n.email),a.createElement("td",null,a.createElement("div",{className:(0,l.Z)(I)},Object.keys(_.uU).map(((e,l)=>a.createElement(D.Z,{text:_.uU[e],disabled:t.apiStateFor(`save-role-${n.id}`)===P.gQ.LOADING,active:n.role===_.uU[e],color:n.role===_.uU[e]?"primary":"secondary",onClick:()=>t.setRole(n,_.uU[e]),key:l}))))),a.createElement("td",null,a.createElement(w.Z,{user:n})),a.createElement("td",null,(0,Z.o0)(n.createdAt)),a.createElement("td",null,(0,Z.o0)(n.updatedAt)),a.createElement("td",null,a.createElement(z.Z,{text:n.id})))}));var U=n(5999);const F=(0,s.Pi)((e=>{const{adminUserTable:t}=(0,d.oR)("viewStore"),{users:n}=e,l="asc"===t.sortDirection?A.BcN:A.D8s;return a.createElement("div",null,a.createElement("table",null,a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null,a.createElement(D.Z,{size:x.yd,iconSide:"left",icon:"email"===t.sortColumn&&l,text:(0,U.I)({message:"Email",id:"admin.userTable.th.email",description:"th: email"}),onClick:()=>t.setSortColumn("email")})),a.createElement("th",null,a.createElement(D.Z,{size:x.yd,iconSide:"left",icon:"role"===t.sortColumn&&l,text:(0,U.I)({message:"Rolle",id:"admin.userTable.th.role",description:"th: role"}),onClick:()=>t.setSortColumn("role")})),a.createElement("th",null,a.createElement(D.Z,{size:x.yd,iconSide:"left",icon:"shortName"===t.sortColumn&&l,text:(0,U.I)({message:"K\xfcrzel",id:"admin.userTable.th.shortName",description:"th: shortName"}),onClick:()=>t.setSortColumn("shortName")})),a.createElement("th",null,a.createElement(D.Z,{size:x.yd,iconSide:"left",icon:"createdAt"===t.sortColumn&&l,text:(0,U.I)({message:"Erstellt",id:"admin.userTable.th.createdAt",description:"th: createdAt"}),onClick:()=>t.setSortColumn("createdAt")})),a.createElement("th",null,a.createElement(D.Z,{size:x.yd,iconSide:"left",icon:"updatedAt"===t.sortColumn&&l,text:(0,U.I)({message:"Aktualisiert",id:"admin.userTable.th.updatedAt",description:"th: updatedAt"}),onClick:()=>t.setSortColumn("updatedAt")})),a.createElement("th",null,a.createElement(D.Z,{size:x.yd,iconSide:"left",icon:"id"===t.sortColumn&&l,text:(0,U.I)({message:"Id",id:"admin.userTable.th.id",description:"th: id"}),onClick:()=>t.setSortColumn("id")})))),a.createElement("tbody",null,n.map(((e,t)=>a.createElement(R,{key:e.id,user:e}))))))})),O="department_ZgH2",$="colorData_lVoi",B="color_q8xy",L="actions_59Ek",J="description_XpT3";var j=n(4435);const G=(0,s.Pi)((e=>{const t=(0,d.oR)("departmentStore"),{department:n}=e;return a.createElement("tr",{className:(0,l.Z)(O)},a.createElement("td",null,a.createElement(h.Z,{text:n.name,onChange:e=>n.update({name:e})})),a.createElement("td",{className:(0,l.Z)(J)},a.createElement(j.Z,{text:n.description,onChange:e=>n.update({description:e}),rows:2})),a.createElement("td",{className:(0,l.Z)($)},a.createElement("label",{className:(0,l.Z)(B)},a.createElement(z.Z,{text:n.color,color:n.color}),a.createElement("input",{type:"color",value:n.color,onChange:e=>n.update({color:e.target.value})}))),a.createElement("td",null,(0,Z.o0)(n.createdAt)),a.createElement("td",null,(0,Z.o0)(n.updatedAt)),a.createElement("td",null,a.createElement(z.Z,{text:n.id})),a.createElement("td",null,a.createElement("div",{className:(0,l.Z)(L)},n.isDirty&&a.createElement(v.Z,{onClick:()=>n.reset()}),n.isDirty&&a.createElement(b.Z,{onClick:()=>t.save(n)}),a.createElement(g.Z,{onClick:()=>t.destroy(n),disabled:n.events.length>0||n.classes.length>0}))))})),V=(0,s.Pi)((e=>{const t=(0,d.oR)("departmentStore"),{adminDepartmentTable:n}=(0,d.oR)("viewStore"),{departments:l}=e,r="asc"===n.sortDirection?A.BcN:A.D8s;return a.createElement("div",null,a.createElement(D.Z,{text:(0,U.I)({message:"Neue Abteilung",description:"Create a new department",id:"admin.DepartmentTable.create"}),onClick:()=>t.create({name:" "}),iconSide:"left",icon:A.jxF,apiState:t.apiStateFor("create")}),a.createElement("table",null,a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null,a.createElement(D.Z,{size:x.yd,iconSide:"left",icon:"name"===n.sortColumn&&r,text:(0,U.I)({message:"Name",description:"th: name",id:"admin.DepartmentTable.th.name"}),onClick:()=>n.setSortColumn("name")})),a.createElement("th",null,a.createElement(U.Z,{id:"admin.DepartmentTable.th.description",description:"th: description"},"Beschreibung")),a.createElement("th",null,a.createElement(D.Z,{size:x.yd,iconSide:"left",icon:"color"===n.sortColumn&&r,text:(0,U.I)({message:"Farbe",description:"th: color",id:"admin.DepartmentTable.th.color"}),onClick:()=>n.setSortColumn("color")})),a.createElement("th",null,a.createElement(D.Z,{size:x.yd,iconSide:"left",icon:"createdAt"===n.sortColumn&&r,text:(0,U.I)({message:"Erstellt",description:"th: created At",id:"admin.DepartmentTable.th.createdAt"}),onClick:()=>n.setSortColumn("createdAt")})),a.createElement("th",null,a.createElement(D.Z,{size:x.yd,iconSide:"left",icon:"updatedAt"===n.sortColumn&&r,text:(0,U.I)({message:"Aktualisiert",description:"th: updatedAt",id:"admin.DepartmentTable.th.updatedAt"}),onClick:()=>n.setSortColumn("updatedAt")})),a.createElement("th",null,a.createElement(U.Z,{id:"admin.DepartmentTable.th.id",description:"th: id"},"Id")),a.createElement("th",null,a.createElement(U.Z,{id:"admin.DepartmentTable.th.actions",description:"th: actions"},"Aktionen")))),a.createElement("tbody",null,l.map(((e,t)=>a.createElement(G,{key:e.id,department:e}))))))})),q=(0,s.Pi)((()=>{const e=(0,d.oR)("userStore"),t=(0,d.oR)("semesterStore"),n=(0,d.oR)("viewStore");(0,d.oR)("registrationPeriodStore");return e.current?.role!==_.uU.ADMIN?a.createElement(i.Z,null,a.createElement("main",null,a.createElement("div",{className:"hero hero--primary"},a.createElement("div",{className:"container"},a.createElement("h1",{className:"hero__title"},"Nur f\xfcr Admins"),a.createElement("p",{className:"hero__subtitle"},"Nur f\xfcr Administratoren zug\xe4nglicher Bereich"))))):a.createElement(i.Z,{wrapperClassName:(0,l.Z)(r)},a.createElement(o.Z,{className:(0,l.Z)(c)},a.createElement(m.Z,{value:"users",label:"Users",default:!0},a.createElement(F,{users:n.adminUserTable.users})),a.createElement(m.Z,{value:"semesters",label:"Semester"},a.createElement(D.Z,{title:"Semester Hinzuf\xfcgen",text:"Neues Semester",iconSide:"left",icon:a.createElement(x.JO,{path:A.jxF}),color:"primary",apiState:t.apiStateFor("create"),onClick:()=>{t.create({name:"New",start:new Date(Date.now()+7776e6).toISOString(),end:new Date(Date.now()+23328e6).toISOString()})}}),a.createElement(f,null)),a.createElement(m.Z,{value:"departments",label:"Abteilungen"},a.createElement(V,{departments:n.adminDepartmentTable.departments})),a.createElement(m.Z,{value:"reg-periods",label:"Registrierungs Perioden"},"This is a banana \ud83c\udf4c")))}))}}]);