"use strict";(self.webpackChunkevents_app=self.webpackChunkevents_app||[]).push([["7662"],{55750:function(e,t,s){s.d(t,{Z:()=>n});let n={bulk:"bulk_BjmH",stateActions:"stateActions_Zpyz",success:"success_BGHQ",red:"red_NMOD",revoke:"revoke_V7Y_",blue:"blue_xNLm",badge:"badge_zSdE",close:"close_v7Fh",spacer:"spacer_fLJd"}},56863:function(e,t,s){s.d(t,{Z:()=>T});var n=s(85893),i=s(67294),l=s(67026),a=s(55750),r=s(96877),o=s(2565),d=s(23443),c=s(57731),u=s(68949),m=s(91281),v=s(88093),h=s(55317),p=s(30813),x=s(96025),f=s(23157),g=s(92220),b=s(73515);let w={downlaod:!0},Z=(0,r.Pi)(e=>{let t=(0,o.oR)("departmentStore"),s={...w,...e.actionConfig||{}},{eventTable:i}=e;return(0,n.jsxs)("div",{className:(0,l.Z)(a.Z.bulk,"card",e.className),children:[e.leftActions,(0,n.jsx)(d.Z,{text:`${i.events.length}`,className:(0,l.Z)(a.Z.badge),icon:h.RaG,size:p.yd,iconSide:"left",color:"primary",title:(0,x.I)({message:"{num} Termine",id:"event.bulk_actions.stats.total_events"},{num:i.events.length})}),(0,n.jsx)("div",{className:(0,l.Z)(a.Z.spacer)}),!e.noFilter&&(0,n.jsx)(b.ZP,{eventTable:i,hideMine:!0,flexWidth:!0,showCurrentAndFuture:!1,showSelectLocation:"advanced"}),e.middleActions,(0,n.jsx)("div",{className:(0,l.Z)(a.Z.spacer)}),s.downlaod&&(0,n.jsx)(v.ZP,{onClick:()=>{(0,g._)(i.events,t.departments).then(e=>{let t=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),s=URL.createObjectURL(t),n=document.createElement("a");document.body.appendChild(n),n.href=s,n.download="events.xlsx",n.click(),document.body.removeChild(n)})},color:"blue",icon:h.NjS,title:(0,x.I)({id:"event.bulk_actions.download",message:"Download {number} Termine als Excel"},{number:i.events.length})}),e.rightActions]})});var k=s(97406),j=s(88759),y=s(92345),S=s(64021),_=s(24502),C=s(8849),I=s.n(C);let E=(0,r.Pi)(e=>{let t=(0,o.oR)("eventGroupStore"),[s,a]=i.useState(""),[r,d]=i.useState("");return(0,n.jsxs)("div",{className:(0,l.Z)("card"),children:[(0,n.jsx)("div",{className:(0,l.Z)("card__header"),children:(0,n.jsxs)("h4",{children:[(0,n.jsx)(I(),{path:h.fr_,size:.8,className:"groupIcon_JJhG"}),"Neue Gruppe"]})}),(0,n.jsxs)("div",{className:(0,l.Z)("card__body"),children:[(0,n.jsx)(S.Z,{className:(0,l.Z)("textInput_anLd"),text:s,placeholder:(0,x.I)({id:"group.name.placeholder",message:"Name der Gruppe"}),onChange:a}),(0,n.jsx)(_.Z,{text:r,onChange:d,placeholder:(0,x.I)({id:"group.description.placeholder",message:"Beschreibung der Gruppe"})})]}),(0,n.jsx)("div",{className:(0,l.Z)("card__footer"),children:(0,n.jsxs)("div",{className:(0,l.Z)("button-group","button-group--block"),children:[(0,n.jsx)(v.ZP,{color:"secondary",onClick:t=>{t.stopPropagation(),t.preventDefault(),e.onDone()},text:(0,x.I)({message:"Abbrechen",id:"share.button.deleteGroup.confirm.no",description:"Text of the button confirm no"}),icon:h.lY3,iconSide:"left",noWrap:!0}),(0,n.jsx)(v.ZP,{color:"green",onClick:n=>{n.stopPropagation(),n.preventDefault(),t.create({event_ids:e.eventIds,name:s,description:r}).then(()=>{e.onDone()})},apiState:t.apiStateFor("create"),text:(0,x.I)({message:"Erstellen",id:"eventGroup.createGroup"}),icon:h.jxF,iconSide:"left",noWrap:!0})]})})]})});var F=s(16550),N=s(4757),A=s(45808);let P={delete:!0,downlaod:!0,groups:!0,share:!0,stateActions:!0,unsubscribe:!0},T=(0,r.Pi)(e=>{let{eventTable:t}=e,s=(0,o.oR)("userStore"),r=(0,o.oR)("eventStore"),w=(0,o.oR)("eventGroupStore"),S=(0,o.oR)("departmentStore"),{current:_}=s,C=i.useRef(null),I=(0,F.k6)(),T=(0,N.ZP)("/user?user-tab=events&events-tab=reviewed"),z=(0,N.ZP)("/user?user-tab=events&events-tab=my-events"),D=(0,A.Z)(870),L=(0,A.Z)(1142);if(t.selectedEvents.length<1)return(0,n.jsx)(Z,{eventTable:t,leftActions:e.leftActions,middleActions:e.middleActions,rightActions:e.rightActions,className:(0,l.Z)(e.className),actionConfig:e.actionConfig,noFilter:e.noFilter});let R={...P,...e.actionConfig||{}},M=1===t.selectedStates.length,W=R.unsubscribe&&M&&t.selectedStates[0]===m.he.Published,G=W&&t.selectedSubscriptionIgnored;return(0,n.jsxs)("div",{className:(0,l.Z)(a.Z.bulk,"card",e.className),children:[(0,n.jsx)(d.Z,{text:`${t.selectedEvents.length}`,color:"primary",icon:(0,n.jsx)(v.ZP,{onClick:(0,u.aD)(()=>{t.setSelectedEvents([...t.selectedEventIds],!1)}),icon:h.r5M,size:p.OW,color:"primary",className:(0,l.Z)(a.Z.close),noOutline:!0,title:(0,x.I)({message:"Auswahl aufheben",id:"event.bulk_actions.clear_selection"})})}),!e.noFilter&&(0,n.jsx)(b.ZP,{eventTable:t,hideMine:!0,flexWidth:!0,showCurrentAndFuture:!1,showSelectLocation:"advanced"}),M&&R.stateActions&&(0,n.jsxs)("div",{className:(0,l.Z)(a.Z.stateActions),children:[(0,n.jsx)(j.Z,{events:t.selectedEvents}),t.selectedStates[0]===m.he.Draft&&(0,n.jsx)(v.ZP,{text:D?void 0:(0,x.I)({message:"\xdcberpr\xfcfung anfordern",id:"event.bulk_actions.request_review",description:"Request Review"}),title:t.selectedTransitionIssues.size>0?[...t.selectedTransitionIssues].map(e=>`\u{26A0}\u{FE0F} ${k.m[e]}`).join("\n"):D?(0,x.I)({message:"\xdcberpr\xfcfung anfordern",id:"event.bulk_actions.request_review",description:"Request Review"}):void 0,icon:h.UPM,color:"blue",size:p.yd,className:(0,l.Z)(a.Z.blue),iconSide:"left",onClick:()=>{let e=t.selectedEvents.map(e=>e.id);t.setSelectedEvents(e,!1),r.requestState(e,m.he.Review).then(()=>{I.location.search.includes("user-tab=groups")||I.push(T)})},disabled:!t.selectedTransitionable}),t.selectedStates[0]===m.he.Review&&(0,n.jsxs)(n.Fragment,{children:[!e.hideRecallAction&&(0,n.jsx)(v.ZP,{text:L?void 0:(0,x.I)({message:"Zur\xfcckziehen",id:"event.bulk_actions.editing",description:"Edit Event"}),title:(0,x.I)({message:"Termin zur\xfcckziehen zum bearbeiten.",id:"event.bulk_actions.editing.title",description:"Edit Event"}),disabled:t.selectedEvents.some(e=>e.authorId!==_?.id),icon:(0,n.jsx)(p.JO,{path:h.WIm,color:"red",size:p.yd}),className:(0,l.Z)(a.Z.red),iconSide:"left",onClick:()=>{let e=[...t.selectedEvents];r.updateBatched(e.map(e=>({id:e.id}))).then(t=>{t.forEach(e=>{r.find(e.id)?.setEditing(!0)}),I.push(z),r.destroyMany(e)})}}),s.current?.isAdmin&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(v.ZP,{text:L?void 0:(0,x.I)({message:"Ver\xf6ffentlichen",id:"event.bulk_actions.publish",description:"Publish Event"}),title:L?(0,x.I)({message:"Ver\xf6ffentlichen",id:"event.bulk_actions.publish",description:"Publish Event"}):void 0,size:p.yd,icon:h.wo$,color:"green",iconSide:"left",className:(0,l.Z)(a.Z.success),onClick:()=>{r.requestState(t.selectedEvents.map(e=>e.id),m.he.Published)}}),(0,n.jsx)(v.ZP,{text:L?void 0:(0,x.I)({message:"Zur\xfcckweisen",id:"event.bulk_actions.refuse",description:"Refuse Event review"}),title:L?(0,x.I)({message:"Zur\xfcckweisen",id:"event.bulk_actions.refuse",description:"Refuse Event review"}):void 0,size:p.yd,icon:h.Tsh,color:"orange",iconSide:"left",className:(0,l.Z)(a.Z.revoke),onClick:()=>{r.requestState(t.selectedEvents.map(e=>e.id),m.he.Refused)}})]})]})]}),R.share&&(0,n.jsx)(v.ZP,{text:L?void 0:(0,x.I)({id:"event.bulk_actions.share",message:"\xdcbersicht \xd6ffnen"}),title:L?(0,x.I)({id:"event.bulk_actions.share",message:"\xdcbersicht \xd6ffnen"}):void 0,icon:h.wxf,size:p.OW,iconSide:"left",color:"primary",href:`/event?${t.selectedEvents.map(e=>e.queryParam).join("&")}`}),R.groups&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(y.Z,{ref:C,trigger:(0,n.jsx)("span",{children:(0,n.jsx)(v.ZP,{text:L?void 0:(0,x.I)({message:"Neue Gruppe",id:"bulkActions.newGroup.text"}),title:L?(0,x.I)({message:"Neue Gruppe",id:"bulkActions.newGroup.text"}):void 0,icon:h.fr_,size:p.OW,iconSide:"left"})}),modal:!0,lockScroll:!0,nested:!0,overlayStyle:{background:"rgba(0, 0, 0, 0.2)"},children:(0,n.jsx)("div",{children:(0,n.jsx)(E,{onDone:()=>{C.current?.close()},eventIds:t.selectedEvents.map(e=>e.id)})})}),(0,n.jsx)(f.ZP,{isMulti:!0,isSearchable:!0,isClearable:!0,menuPortalTarget:document.body,styles:{menuPortal:e=>({...e,zIndex:"var(--ifm-z-index-overlay)"}),container:e=>({...e,minWidth:"15em"})},onChange:(e,s)=>{switch(s.action){case"select-option":let n=w.find(s.option.value);n&&n.addEvents(t.selectedEvents);break;case"remove-value":let i=w.find(s.removedValue?.value);i&&i.removeEvents(t.selectedEvents);break;case"clear":t.selectedEvents.forEach(e=>e.groups.forEach(t=>t.removeEvents([e])))}},options:w.eventGroups.map(e=>({value:e.id,label:e.name})),value:t.selectedEvents.reduce((e,t)=>{let s=new Set(t.groups.map(e=>e.id));return e.filter(({id:e})=>s.has(e))},t.selectedEvents[0]?.groups?.map(e=>({id:e.id,name:e.name}))||[]).map(e=>({value:e.id,label:e.name}))})]}),W&&(0,n.jsx)(n.Fragment,{children:G?(0,n.jsx)(v.ZP,{icon:h.yF0,text:L?void 0:(0,x.I)({message:"Wieder abonnieren",id:"event.bulk_actions.resubscribe"}),onClick:()=>{let{subscription:e}=_;e&&(e.unignoreEvents(t.selectedEvents.map(e=>e.id)),t.setSelectedEvents([...t.selectedEventIds],!1))},color:"green"}):(0,n.jsx)(v.ZP,{icon:h.BMJ,text:L?void 0:(0,x.I)({message:"Deabonnieren",id:"event.bulk_actions.unsubscribe"}),title:L?(0,x.I)({message:"Deabonnieren",id:"event.bulk_actions.unsubscribe"}):void 0,onClick:()=>{let{subscription:s}=_;s&&(s.ignoreEvents(t.selectedEvents.map(e=>e.id)),t.setSelectedEvents([...t.selectedEventIds],!1),e.eventTable.setShowSelect(!1))},color:"red"})}),R.downlaod&&(0,n.jsx)(v.ZP,{onClick:()=>{(0,g._)(t.selectedEvents,S.departments).then(e=>{let t=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),s=URL.createObjectURL(t),n=document.createElement("a");document.body.appendChild(n),n.href=s,n.download="events.xlsx",n.click(),document.body.removeChild(n)})},color:"blue",icon:h.NjS,size:p.yd,title:(0,x.I)({id:"event.bulk_actions.download",message:"Download {number} Termine als Excel"},{number:t.selectedEvents.length})}),t.selectedDeletable&&R.delete&&(0,n.jsx)(c.Z,{onClick:(0,u.aD)(()=>{r.destroyMany(t.selectedEvents)})})]})})},73515:function(e,t,s){s.d(t,{Cj:()=>y,ZP:()=>C,fz:()=>S,_b:()=>_});var n=s(85893),i=s(67294),l=s(67026);let a={filter:"filter_qD68",basic:"basic_t4OQ",spacer:"spacer_qI_4",audience:"audience_nVNp",flexWidth:"flexWidth_OtUm",input:"input_JA9W",showMore:"showMore_pLh5",showAdvancedFilter:"showAdvancedFilter_kBHk",dirty:"dirty_RftN",icon:"icon_MiLD",advanced:"advanced_Vqsq",selects:"selects_es0U",fuzzyFilter:"fuzzyFilter_h2YF",indicatorsContainer:"indicatorsContainer_sOr1",multiValue:"multiValue_riDV",dates:"dates_la2P",date:"date_bdzb",buttonGroup:"buttonGroup_XGT8",control:"control_DD5p"};var r=s(96877),o=s(2565),d=s(88093),c=s(55317),u=s(64021),m=s(55484),v=s(30813),h=s(17),p=s(96025),x=s(23157),f=s(96486),g=s.n(f),b=s(8849),w=s.n(b),Z=s(55750);let k=(0,r.Pi)(e=>{let t=(0,o.oR)("viewStore");return(0,n.jsx)("div",{className:(0,l.Z)(Z.Z.showSelect),children:(0,n.jsx)(d.ZP,{icon:c.o7Z,text:e.label,size:v.yd,onClick:()=>t.eventTable.toggleShowSelect(),title:(0,p.I)({id:"event.bulkActions.show_select",message:"Terminauswahl anzeigen"})})})});var j=s(91281);let y={option:(e,{data:t,isFocused:s})=>({...e,color:t?.color,backgroundColor:s?"var(--docusaurus-collapse-button-bg-hover)":void 0}),multiValue:(e,{data:t})=>({...e,color:t?.color}),multiValueLabel:(e,{data:t})=>({...e,color:t?.color}),valueContainer:e=>({...e,padding:"0px",paddingLeft:"4px"}),menuPortal:e=>({...e,zIndex:"var(--ifm-z-index-overlay)"})},S={indicatorsContainer:()=>a.indicatorsContainer,multiValue:()=>a.multiValue,control:()=>a.control,menu:()=>a.control},_=e=>({...e,colors:{...e.colors,primary25:"var(--ifm-color-primary-lightest)",primary50:"var(--ifm-color-primary-lighter)",primary75:"var(--ifm-color-primary-light)",primary:"var(--ifm-color-primary)"}}),C=(0,r.Pi)(e=>{let t=(0,o.oR)("viewStore"),{eventTable:s}=e,r=(0,o.oR)("departmentStore"),f=(0,o.oR)("untisStore");i.useEffect(()=>{if(s&&!e.showCurrentAndFuture&&s.onlyCurrentWeekAndFuture)return s.setOnlyCurrentWeekAndFuture(!1),()=>s.setOnlyCurrentWeekAndFuture(!0)},[s,e.showCurrentAndFuture]);let b=e.showSelectLocation||"quick";return(0,n.jsxs)("div",{className:(0,l.Z)(a.filter),children:[(0,n.jsxs)("div",{className:(0,l.Z)(a.basic),children:[e.showSelects&&!s.showSelect&&"quick"===b&&(0,n.jsx)(k,{}),(0,n.jsx)("div",{className:(0,l.Z)(a.spacer)}),(0,n.jsxs)("div",{className:(0,l.Z)(a.audience,"button-group","button-group--block"),children:[!!t.user&&!e.hideMine&&(0,n.jsx)(d.ZP,{text:(0,p.I)({message:"Meine",id:"event.filter.mine",description:"Filter: Only events affecting me"}),title:(0,p.I)({message:"Nur die f\xfcr mich relevanten Termine anzeigen",id:"event.filter.mine.title"}),active:s.onlyMine,color:"primary",onClick:()=>s.toggleOnlyMine(),noWrap:!0}),s.showCurrentAndFutureFilter&&e.showCurrentAndFuture&&(0,n.jsx)(d.ZP,{text:(0,p.I)({message:"K\xfcnftige",id:"event.filter.future",description:"Filter: Only current and future events"}),title:(0,p.I)({message:"Vergangene Termine ausblenden.",id:"event.filter.future.title",description:"Filter: Only current and future events"}),active:s.onlyCurrentWeekAndFuture,color:"primary",onClick:()=>s.setOnlyCurrentWeekAndFuture(!s.onlyCurrentWeekAndFuture),noWrap:!0})]}),(0,n.jsx)("div",{className:(0,l.Z)(a.fuzzyFilter,e.flexWidth&&a.flexWidth),children:(0,n.jsx)(u.Z,{placeholder:(0,p.I)({message:"Suche",id:"event.filter.search"}),inputClassName:(0,l.Z)(a.input),onChange:e=>s.setTextFilter(e),text:s.klassFilter})}),(0,n.jsxs)("div",{className:(0,l.Z)(a.showMore),children:[(0,n.jsx)(d.ZP,{icon:v.v9,size:v.yd,active:s.showAdvancedFilter,className:(0,l.Z)(a.showAdvancedFilter),color:s.hasAdvancedFilters?"primary":void 0,title:(0,p.I)({id:"event.filter.showAdvanced",message:"Erweiterte Filter anzeigen",description:"Button: Show advanced filter"}),onClick:()=>s.setShowAdvancedFilter(!s.showAdvancedFilter)}),s.hasAdvancedFilters&&(0,n.jsxs)("span",{className:(0,l.Z)(a.dirty),children:[(0,n.jsx)(w(),{path:c.mdD,size:v.OW,color:"var(--ifm-background-surface-color)",className:a.icon}),(0,n.jsx)(w(),{path:c.Vip,size:.9*v.OW,color:"var(--ifm-color-primary)",className:a.icon})]})]}),(0,n.jsx)("div",{className:(0,l.Z)(a.spacer)})]}),s.showAdvancedFilter&&(0,n.jsxs)("div",{className:(0,l.Z)(a.advanced),children:[(0,n.jsxs)("div",{className:(0,l.Z)(a.selects),children:[(0,n.jsx)("div",{className:(0,l.Z)(a.department),children:(0,n.jsx)(x.ZP,{isMulti:!0,closeMenuOnSelect:!1,placeholder:(0,p.I)({message:"Abteilungen",id:"event.filter.departments",description:"Filter: Departments"}),name:"departments-filter",menuPortalTarget:document.body,options:g().orderBy(r.usedDepartments,["name"]).map(e=>({value:e.id,label:e.name,color:e?.color})),styles:y,className:(0,l.Z)(a.select),classNames:S,value:[...s.departmentIds].map(e=>{let t=r.find(e);return{value:e,label:t?.name||"",color:t?.color||"#ccc"}}),onChange:e=>{let t=e.map(e=>e.value);s.setDepartmentIds(t)},theme:_})}),(0,n.jsx)("div",{className:(0,l.Z)(a.classes),children:(0,n.jsx)(x.ZP,{isMulti:!0,closeMenuOnSelect:!1,placeholder:(0,p.I)({message:"Klassen",id:"event.filter.classes",description:"Filter: Classes"}),name:"class-filter",menuPortalTarget:document.body,options:g().orderBy(f.classes,["name"]).map(e=>({value:e.name,label:e.displayName,color:e.department?.color})),styles:y,className:(0,l.Z)(a.select),classNames:S,value:[...s.classNames].map(e=>{let t=f.findClassByName(e);return{value:e,label:t?.displayName||"",color:t?.department?.color||"#ccc"}}),onChange:e=>{let t=e.map(e=>e.value);s.setClassNames(t)},theme:_})})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{children:(0,n.jsx)(p.Z,{id:"event.filter.advanced.filterAudience",children:"Nach Zielgruppe filtern"})}),(0,n.jsx)("div",{className:(0,l.Z)(a.buttonGroup,"button-group","button-group--block"),children:Object.keys(j.E1).map(e=>(0,n.jsx)(d.ZP,{text:j.E[e],active:s.audienceFilter.has(e),color:"primary",onClick:()=>s.toggleAudienceFilter(e),noWrap:!0},e))})]}),(0,n.jsx)("div",{children:(0,n.jsx)(h.Z,{label:(0,p.I)({message:"Gel\xf6schte Verstecken?",id:"event.filter.deleted",description:"Filter: deleted"}),checked:s.hideDeleted,onChange:e=>s.setHideDeleted(e),labelSide:"left"})}),e.showSelects&&!s.showSelect&&"advanced"===b&&(0,n.jsx)("div",{children:(0,n.jsx)(k,{label:(0,p.I)({id:"event.filter.show_select",message:"Termine ausw\xe4hlen"})})}),(0,n.jsxs)("div",{className:(0,l.Z)(a.dates),children:[(0,n.jsx)("div",{className:(0,l.Z)(a.date,a.start),children:s.start?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(m.Z,{date:s.start||new Date,onChange:e=>s.setStartFilter(e),time:"start"}),(0,n.jsx)(d.ZP,{icon:c.VxL,iconSide:"left",text:(0,p.I)({message:"Start",id:"event.filter.index.button.start",description:"Text of button start time"}),onClick:()=>s.setStartFilter(null)})]}):(0,n.jsx)(d.ZP,{icon:c.jxF,iconSide:"left",text:(0,p.I)({message:"Start",id:"event.filter.index.button.start",description:"Text of button start time"}),onClick:()=>s.setStartFilter(new Date)})}),(0,n.jsx)("div",{className:(0,l.Z)(a.date,a.end),children:s.end?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(m.Z,{date:s.end||new Date,onChange:e=>s.setEndFilter(e),time:"end"}),(0,n.jsx)(d.ZP,{icon:c.VxL,iconSide:"left",text:(0,p.I)({message:"Ende",id:"event.filter.index.button.end",description:"Text of button end time"}),onClick:()=>s.setEndFilter(null)})]}):(0,n.jsx)(d.ZP,{icon:c.jxF,iconSide:"left",text:(0,p.I)({message:"Ende",id:"event.filter.index.button.end",description:"Text of button end time"}),onClick:()=>s.setEndFilter(new Date)})})]})]})]})})},64021:function(e,t,s){s.d(t,{Z:()=>a});var n=s(85893),i=s(67294),l=s(67026);let a=e=>{let t=i.useRef(null);return i.useEffect(()=>{t.current&&e.autoFocus&&t.current.focus()},[t,e.autoFocus]),(0,n.jsx)("div",{className:(0,l.Z)(e.className,"textInput_K1iv"),children:(0,n.jsx)("input",{ref:t,type:e.htmlType??(e.search?"search":"text"),value:e.text,placeholder:e.placeholder,autoFocus:e.autoFocus,className:e.inputClassName,onChange:t=>{e.onChange(t.currentTarget.value)}})})}},45808:function(e,t,s){s.d(t,{Z:()=>a});var n=s(96486),i=s.n(n),l=s(67294);let a=(e=768)=>{let[t,s]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{let t=i().debounce(()=>{s(window.innerWidth<=e)},50);return window.addEventListener("resize",t),t(),()=>{t.cancel(),window.removeEventListener("resize",t)}},[e]),t}},86426:function(e,t,s){s.r(t),s.d(t,{default:()=>g});var n=s(85893),i=s(67294),l=s(96877),a=s(2565),r=s(74874),o=s(88093),d=s(55317),c=s(73515),u=s(67026),m=s(78894),v=s(92220),h=s(56863),p=s(48082),x=s(30813),f=s(96025);let g=(0,l.Pi)(()=>{let[e,t]=i.useState(void 0),s=(0,a.oR)("viewStore"),l=(0,a.oR)("departmentStore"),g=i.useCallback(e=>{t(e.getBoundingClientRect().width)},[]),b=(0,p.Z)(g);return(0,n.jsx)(r.Z,{children:(0,n.jsxs)("div",{className:(0,u.Z)("table__mvs"),children:[(0,n.jsxs)("div",{style:{width:`${e}px`||"min(95vw, 800px)"},children:[(0,n.jsx)(c.ZP,{showCurrentAndFuture:!0,showSelects:!0,showSelectLocation:e>410?"quick":"advanced",eventTable:s.eventTable}),s.eventTable.showSelect&&(0,n.jsx)(h.Z,{eventTable:s.eventTable,className:(0,u.Z)("bulkActions_sgMI"),noFilter:!0,leftActions:[(0,n.jsx)(o.ZP,{icon:d.PKH,size:x.yd,color:"red",title:(0,f.I)({id:"event.bulk_actions.hide_select",message:"Terminauswahl verbergen"}),onClick:()=>s.eventTable.toggleShowSelect()},"show_select")]})]}),(0,n.jsx)(m.ZP,{eventTable:s.eventTable,ref:b,groupBy:"yearsKw"}),(0,n.jsx)(o.ZP,{onClick:()=>{(0,v._)(s.eventTable.events,l.departments).then(e=>{let t=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),s=URL.createObjectURL(t),n=document.createElement("a");document.body.appendChild(n),n.href=s,n.download="events.xlsx",n.click(),document.body.removeChild(n)})},color:"primary",iconSide:"left",icon:d.NjS,text:(0,f.I)({message:"Download",id:"table.button.download",description:"Text of the button download xlsx"})})]})})})},92220:function(e,t,s){s.d(t,{_:()=>d});var n=s(74295),i=s.n(n),l=s(73583),a=s(96025),r=s(35078);let o=["GYMD","GYMD/GYMF","GYMF","GYMF/GYMD","FMS","ECG","ECG/FMS","WMS","ESC","FMP\xe4d","MSOP","Passerelle"],d=async(e,t)=>{let s=new(i()).Workbook;s.creator="Events-App",s.model.contentStatus="V1";let n=s.addWorksheet((0,a.I)({id:"xlsx.events",message:"Termine"})),d=t.map(e=>e.name),c=[...o.filter(e=>d.includes(e)),...d.filter(e=>!d.includes(e)).sort()];(0,a.I)({id:"kw",message:"KW",description:"Calendar week"});let u=[{header:(0,a.I)({id:"xlsx.kw",message:"KW"}),key:"kw",width:7,outlineLevel:1},{header:(0,a.I)({id:"xlsx.weekday",message:"Wochentag"}),key:"weekday",width:15,outlineLevel:1},{header:(0,a.I)({id:"xlsx.description",message:"Titel"}),key:"description",width:42,outlineLevel:1},{header:(0,a.I)({id:"xlsx.dateStart",message:"Datum Beginn"}),key:"date_s",width:15,outlineLevel:1},{header:(0,a.I)({id:"xlsx.timeStart",message:"Zeit Beginn"}),key:"time_s",width:12,outlineLevel:1},{header:(0,a.I)({id:"xlsx.dateEnd",message:"Datum Ende"}),key:"date_e",width:15,outlineLevel:1},{header:(0,a.I)({id:"xlsx.timeEnd",message:"Zeit Ende"}),key:"time_e",width:12,outlineLevel:1},{header:(0,a.I)({id:"xlsx.location",message:"Ort"}),key:"location",width:20,outlineLevel:1},{header:(0,a.I)({id:"xlsx.descriptionLong",message:"Beschreibung"}),key:"location",width:20,outlineLevel:1},...c.map(e=>({header:e,key:e,width:4,outlineLevel:1,alignment:{textRotation:90}})),{header:(0,a.I)({id:"xlsx.bilingueLPsAffected",message:"Bilingue LP's betroffen"})},{header:(0,a.I)({id:"xlsx.classes",message:"Klassen"}),key:"classes",width:10,outlineLevel:1},{header:(0,a.I)({id:"xlsx.affects",message:"Betrifft"}),key:"audience",width:10,outlineLevel:1},{header:(0,a.I)({id:"xlsx.teachingAffected",message:"Unterricht betroffen?"}),key:"teachingAffected",width:10,outlineLevel:1},{header:(0,a.I)({id:"xlsx.deletedAt",message:"Gel\xf6scht am"}),key:"deletedAt",width:15,outlineLevel:1}];return n.addTable({name:(0,a.I)({id:"xlsx.events",message:"Termine"}),ref:"A1",headerRow:!0,totalsRow:!1,style:{theme:"TableStyleMedium2",showRowStripes:!0},columns:u.map(e=>({name:e.header,filterButton:!0})),rows:e.sort((e,t)=>e.start.getTime()-t.start.getTime()).map(e=>[e.kw,e.dayStart,e.description,(0,r.g7)(e.start),e.isAllDay?"":e.fStartTime.padStart(5,"0"),(0,r.g7)(e.end),e.isAllDay?"":e.fEndTime.padStart(5,"0"),e.location,e.descriptionLong,...c.map(t=>e.departments.find(e=>e.name===t)?1:""),+!!e.affectsDepartment2,[...[...e.classGroups].map(e=>`${e}*`),...e.classes].join(", "),e.audience,e.teachingAffected,e.deletedAt?l.ZP.fDate(e.deletedAt):""])}),n.columns=u,c.forEach((e,t)=>{n.getCell(1,10+t).alignment={textRotation:-90,vertical:"top",horizontal:"left"}}),await s.xlsx.writeBuffer()}}}]);