import Tabs from '@theme/Tabs';
import styles from './styles.module.scss';
import TabItem from '@theme/TabItem';
import TeachingAffectedField from './components/TeachingAffectedField'
import AudienceOptionsField from './components/AudienceOptionsField'
import Badge from '@site/src/components/shared/Badge';
import { EventState, EventStateButton, EventStateColor, EventStateTranslation } from '@site/src/api/event';
import VideoGrid from '@site/src/components/VideoGrid';
import Steps from '@site/src/components/Steps';
import { mdiArrowDownThick } from '@mdi/js';

# Termine erfassen

:::note[Ãœbersicht]
Auf dieser Seite wird erklÃ¤rt
- wie ein neuer Termin erfasst wird
- wie Termine zur ÃœberprÃ¼fung eingereicht werden
- wie die Eingabemaske aufgebaut ist
- welche Felder es gibt und was zu beachten ist
:::

## Ãœbersicht

<Steps>
1. ### Anmelden
    Um einen neuen Termin zu erfassen, muss man angemeldet sein.

    ![Anmelden --width=700px](./images/login.png)

    ![Erfolgreich angemeldet: Der Name ist oben rechts zu sehen. --width=700px](./images/login-success.png)

2. ### PersÃ¶nlicher Bereich
    Eigene Termine findet man unter dem MenÃ¼punkt __PersÃ¶nlich__, dort kÃ¶nnen auch neue Termine erstellt werden.
    ![__PersÃ¶nlich > :mdi[plus-circle-outline] Neuer Termin__ [ğŸ‘‰ Neuen Termin erstellen](/user?user-tab=events&events-tab=my-events) --width=850px](./images/new-event.png)

3. ### Ansicht der Eingabemaske
    Die Eingabemaske Ã¶ffnet sich und der Termin kann erfasst werden. Je nach BildschirmgrÃ¶sse wird die Eingabemaske direkt in der Zeile oder im Fenster angezeigt.
    
    <Tabs groupId="edit-mode">
        <TabItem value="row-mask" label="Zeilenmodus" default>
            ![--width=100%](./images/event-row-mask.jpg)

            <details>
                <summary>
                    Ganz rechts in der Zeile kann Ã¼ber die Optionen __:mdi[dots-horizontal-circle-outline] > :mdi[arrow-expand-all] Ã–ffnen__  in den Fenstermodus gewechselt werden.
                </summary>
                ![--width=150px](./images/open-window-mode.png)
            </details>
        </TabItem>
        <TabItem value="window-mask" label="Fenstermodus">
            
            ![--width=450px](./images/event-mask.png)
        </TabItem>
    </Tabs>

4. ### Termin erfassen

    - Alle wichtigen Termininformationen kÃ¶nnen nun erfasst werden.
    - Eine Beschreibung aller Felder ist [ğŸ‘‰ weiter unten](#eingabemaske) zu finden.
    - Ã„nderungen kÃ¶nnen Ã¼ber die SchaltflÃ¤che __:mdi[content-save]{.green} Speichern__ gespeichert werden. Ein Termin muss also nicht auf anhieb vollstÃ¤ndig erfasst werden. Er kann gespeichert und zu einem spÃ¤teren Zeitpunkt weiter bearbeitet werden.
        ![--width=600px](./images/save-event.png)
    
    :::warning[Speichern :mdi[not-equal-variant] Einreichen]
    Gespeicherte Termin-EntwÃ¼rfe werden nicht automatisch verÃ¶ffentlicht! Sie mÃ¼ssen im nÃ¤chsten Schritt zur ÃœberprÃ¼fung eingereicht werden. 
    :::
5. ### Zur ÃœberprÃ¼fung einreichen
    Ein neuer Termin kann wÃ¤hrend einem [ğŸ‘‰ offenen Eingabefenster](#eingabefenster) zur ÃœberprÃ¼fung eingereicht werden. Eine Administrator\:in prÃ¼ft und verÃ¶ffentlicht den Termin. Erst nach der VerÃ¶ffentlichung wird der Termin im Kalender angezeigt.

    <Tabs groupId="edit-mode">
        <TabItem value="row-mask" label="Zeilenmodus" default>
            ![--width=100%](./images/change-state-row-mode.png)
        </TabItem>
        <TabItem value="window-mask" label="Fenstermodus">            
                ![--width=300px](./images/change-state-window-mode.png)
        </TabItem>
    </Tabs>

6. ### Kontrolle
    Nach dem Einreichen muss die finale Version nochmals auf Richtigkeit kontrolliert werden.

    ![--width=700px](./images/check-draft.png)

    <details>
        <summary>
            Eingereichter Termin zurÃ¼ckziehen
        </summary>
        ![--width=700px](./images/check-draft-2.png)
    </details>

</Steps>



## Eingabemaske

### Felder

:::info[Pflichtfelder]
Die Felder __Titel__ und __Publikum__ sind Pflichtfelder.
:::

<Dl>
    <dt>Titel\*</dt>
    <dd>Kurze Beschreibung des Termins, in der Regel weniger als *80* Zeichen.</dd>
    <dt>Beschreibung</dt>
    <dd>Detaillierte Beschreibung des Termins. Kann auch mehrere AbsÃ¤tze enthalten.</dd>
    <dt>Start</dt>
    <dd>Datum und Uhrzeit, wann der Termin beginnt.</dd>
    <dt>Ende</dt>
    <dd>Datum und Uhrzeit, wann der Termin endet. Der Termin kann auch ganztÃ¤gig sein.</dd>
    <dt>Ort</dt>
    <dd>Wo findet der Termin statt? Darf auch leer bleiben.</dd>
    <dt>Publikum\*</dt>
    <dd>
        Wer ist vom Termin betroffen?
    </dd>
    <dd>
        ![--width=400px](./images/audience.png)
        Betrifft
        - :mdi[office-building]{.info} eine ganze Abteilung.
        - :mdi[google-classroom]{.orange} eine bekannte Klasse.
        - :mdi[account-question]{.red} eine kÃ¼nftige Klasse, die noch nicht in WebUntis gefÃ¼hrt wird.
        - :mdi[account-multiple]{.blue} ein ganzer Klassenjahrgang. 

        :::danger[Eine Klasse wird nicht angezeigt?]
        - ÃœberprÃ¼fen des **Datums**: Gibt es die Klasse zu diesem Zeitpunkt (noch) an der Schule?
        - Ist es eine **neue Klasse** und WebUntis zeigt die Klasse noch nicht an? Die Klasse [ğŸ‘‰ manuell eingegeben](#kÃ¼nftige-klassen).
        :::
    </dd>
    <dt>Betrifft</dt>
    <dd style={{marginBottom: '1.2em 0'}}>
        <Badge text="interaktiv!" icon={mdiArrowDownThick} color="orange" iconSide="left" title="Klicke auf die verschiedenen Optionen um die betroffenen Gruppen anzuzeigen." />
        <AudienceOptionsField />
        Eine detailliertere Ãœbersicht findet sich [ğŸ‘‰ weiter unten](#betrifft).
    </dd>
    <dt>Unterricht betroffen?</dt>
    <dd>
        <Badge text="interaktiv!" icon={mdiArrowDownThick} color="orange" iconSide="left" title="Klicke auf die verschiedenen Optionen um die Beispiele anzuzeigen." />
        <TeachingAffectedField />
    </dd>
    <dt>Status</dt>
    <dd>
    Gibt an, ob der Termin verÃ¶ffentlicht wurde oder nicht.
    </dd>
    <dd>
        <Badge 
            icon={EventStateButton.DRAFT}
            color={EventStateColor.DRAFT}
            title={EventStateTranslation.DRAFT}
            text={EventStateTranslation.DRAFT}
            iconSide='left'
            className={styles.badge}
        />  *Ein Termin, der noch nicht verÃ¶ffentlicht wurde. Er ist nur fÃ¼r die Autor\:in sichtbar.*
    </dd>
    <dd>
        <Badge 
            icon={EventStateButton.REVIEW}
            color={EventStateColor.REVIEW}
            title={EventStateTranslation.REVIEW}
            text={EventStateTranslation.REVIEW}
            iconSide='left'
            className={styles.badge}
        /> *Ein Termin, der zur ÃœberprÃ¼fung eingereicht wurde. Er ist nur fÃ¼r die Autor\:in und die Admins sichtbar.*
    </dd>
    <dd>
        <Badge 
            icon={EventStateButton.PUBLISHED}
            color={EventStateColor.PUBLISHED}
            title={EventStateTranslation.PUBLISHED}
            text={EventStateTranslation.PUBLISHED}
            iconSide='left'
            className={styles.badge}
        /> *Ein verÃ¶ffentlichter Termin, der fÃ¼r alle sichtbar ist.*
    </dd>
    <dd>
        <Badge 
            icon={EventStateButton.REFUSED}
            color={EventStateColor.REFUSED}
            title={EventStateTranslation.REFUSED}
            text={EventStateTranslation.REFUSED}
            iconSide='left'
            className={styles.badge}
        /> *Ein Termin, der abgelehnt wurde. Ist nur fÃ¼r die Autor\:in und die Admins sichtbar.*
    </dd>
    <dd>
        :::warning[VerÃ¶ffentlichte Termine]
        Ist ein Termin einmal verÃ¶ffentlicht, so kann er nicht mehr direkt bearbeitet oder komplett gelÃ¶scht werden.
        - GelÃ¶schte Termine werden in der Ãœbersicht nicht mehr angezeigt, erscheinen aber weiterhin im abonnierten Kalender als gelÃ¶schter Termin.
        - Ã„nderungen bei verÃ¶ffentlichten Terminen fÃ¼hren stets zu einer neuen Version, wobei stets die aktuellste Version angezeigt wird.
        Anpassungen sind dadurch transparent nachvollziehbar.
        :::
    </dd>
</Dl>

\* Pflichtfelder, die zwingend eingetragen werden mÃ¼ssen.

### Betrifft
Schulische Termine betreffen __Lehrpersonen__, __Klassenlehrpersonen__, die __SchÃ¼lerschaft__ oder __Alle__. AbhÃ¤ngig davon, fÃ¼r wen die Termine erfasst wurden und ob der stundenplanmÃ¤ssige Unterricht betroffen ist, werden sie im Terminplan angezeigt.

Die folgende Tabelle zeigt eine Ãœbersicht, wann ein Termin fÃ¼r die verschiedenen Zielgruppen angezeigt wird.

<table className={styles.audience}>
	<tbody>
		<tr>
			<td rowSpan="2" className={styles.left}><b>Der Termin...</b></td>
			<td colSpan="4">wird angezeigt fÃ¼r:</td>
		</tr>
		<tr>
			<td colSpan="2">Lehrpersonen</td>
			<td rowSpan="2">KLP, der <br />betroffenen <br />Klasse</td>
			<td rowSpan="2">SchÃ¼ler\:innen</td>
		</tr>
		<tr>
            <td className={styles.left}>...ist wÃ¤hrend der Lektion?\*</td>
			<td>Ja</td>
			<td>Nein</td>
		</tr>
		<tr className={styles.line}>
			<td className={styles.left}>...fÃ¼r __Alle__</td>
			<td>âœ…</td>
			<td>âœ…</td>
			<td>âœ…</td>
			<td>âœ…</td>
		</tr>
		<tr>
			<td className={styles.left}>...fÃ¼r SchÃ¼ler\:innen __SuS__</td>
			<td>âœ…</td>
			<td>â—»ï¸</td>
			<td>âœ…</td>
			<td>âœ…</td>
		</tr>
		<tr>
			<td className={styles.left}>...fÃ¼r Lehrpersonen __LP__</td>
			<td>âœ…</td>
			<td>âœ…</td>
			<td>âœ…</td>
			<td>â—»ï¸</td>
		</tr>
		<tr>
			<td className={styles.left}>...fÃ¼r Klassenlehrpersonen __KLP__</td>
			<td>â—»ï¸</td>
			<td>â—»ï¸</td>
			<td>âœ…</td>
			<td>â—»ï¸</td>
		</tr>
	</tbody>
</table>

\* Wenn ein Termin wÃ¤hrend einer Lektion im Regelstundenplan stattfindet (auch, wenn er wÃ¤hrend der Lektion beginnt oder endet), wird er fÃ¼r betroffene Lehrpersonen angezeigt.

## Zur ÃœberprÃ¼fung einreichen

Ein **neuer Termin** kann wÃ¤hrend einem offenen Eingabefenster zur ÃœberprÃ¼fung eingereicht werden. Die Admins werden benachrichtigt und prÃ¼fen den Termin. Nach der VerÃ¶ffentlichung wird der Termin im Kalender angezeigt.

### Eingabefenster

![--width=700px](./images/event-window.png)

<Dl>
    <dt><Badge text="1" color="red" /></dt>
    <dd>Offene Eingabefenster sind schwarz hinterlegt.</dd>
    <dt><Badge text="2" color="red" /></dt>
    <dd>In dieser Zeitspanne kÃ¶nnen neue Termine zur ÃœberprÃ¼fung eingereicht werden.</dd>
    <dt><Badge text="3" color="red" /></dt>
    <dd>FÃ¼r diese Zeitspanne kÃ¶nnen die neuen Termine eingereicht werden.</dd>
    <dt><Badge text="4" color="red" /></dt>
    <dd>Eine dieser Abteilungen muss im eingereichten Termin vorkommen.</dd>
</Dl>

:::info[Festlegung der Eingabefenster]
Die Eingabefenster werden von der Administration festgelegt und wie bisher in einer Orientierung kommuniziert.
Ein Eingabefenster ist vom Start- bis zum Enddatum offen und ermÃ¶glicht in dieser Zeit, **neue Termine** einzureichen.
:::

:::tip[TerminÃ¤nderungen]
Bei **fehlerhaften** Terminen oder **unvollstÃ¤ndigen** Angaben (bspw. Zimmerzuteilungen) kann ein Ã„nderungsantrag an die Admins gemacht werden. Diese prÃ¼fen den Antrag und verÃ¶ffentlichen ggf. den aktualisierten Termin.
:::




## KÃ¼nftige Klassen

FÃ¼r Klassen oder JahrgÃ¤nge, die noch nicht in WebUntis gefÃ¼hrt werden, kÃ¶nnen entsprechende Klassen bereits im Voraus hinterlegt werden.

:::info[Jahrgang]
Ein Klassenjahrgang betrifft alle Klassen eines ganzen Jahrgangs. Dies wird mit einem `*` angezeigt. Z.B. <Badge text="29G*" inline /> fÃ¼r alle 29er Klassen des Gymnasiums oder <Badge text="29F*" inline/> fÃ¼r alle 29er Klassen der FMS.
:::


<VideoGrid
    videos={[
        {
            src: require('./images/event-new-class.mp4').default,
            title: 'ZukÃ¼nftige Klasse erfassen',
            autoplay: true,
            maxHeight: '300px',
            loop: true
        },
        {
            src: require('./images/event-new-class-group.mp4').default,
            title: 'ZukÃ¼nftigen Jahrgang erfassen',
            autoplay: true,
            maxHeight: '300px',
            loop: true
        }
    ]}
/>
