import Tabs from '@theme/Tabs';
import styles from './styles.module.scss';
import TabItem from '@theme/TabItem';
import TeachingAffectedField from './components/TeachingAffectedField'
import AudienceOptionsField from './components/AudienceOptionsField'
import Badge from '@site/src/components/shared/Badge';
import { EventState, EventStateButton, EventStateColor, EventStateTranslation } from '@site/src/api/event';
import VideoGrid from '@site/src/components/VideoGrid';

# Termine Erfassen

Neue Termine können jederzeit über __Persönlich > :mdi[plus-circle-outline] Neuer Termin__ erstellt werden.

![__Persönlich > :mdi[plus-circle-outline] Neuer Termin__ [👉 Neuen Termin erstellen](/user?user-tab=events&events-tab=my-events) --width=850px](./images/new-event.png)

## Eingabemaske

Die Eingabemaske kann am Laptop wahlweise direkt in der Zeile oder über ein Terminfeld angezeigt werden. Am Smartphone wird die Eingabemaske immer in einem Fenster angezeigt.

<Tabs>
  <TabItem value="row-mask" label="Zeilenmodus" default>
    
    ![--width=100%](./images/event-row-mask.jpg)
  </TabItem>
  <TabItem value="window-mask" label="Fenstermodus">
    
    ![--width=450px](./images/event-mask.png)
  </TabItem>
</Tabs>


:::info[Pflichtfelder]
Die Felder __Titel__ und __Publikum__ sind Pflichtfelder.
:::

## Felder

<Dl>
    <dt>Titel\*</dt>
    <dd>Kurze Beschreibung des Termins, in der Regel weniger als 80 Zeichen.</dd>
    <dt>Beschreibung</dt>
    <dd>Detaillierte Beschreibung des Termins. Kann auch mehrere Absätze enthalten.</dd>
    <dt>Start</dt>
    <dd>Datum und Uhrzeit, wann der Termin beginnt.</dd>
    <dt>Ende</dt>
    <dd>Datum und Uhrzeit, wann der Termin endet. Der Termin kann auch ganztägig sein.</dd>
    <dt>Ort</dt>
    <dd>Wo findet der Termin statt? Darf auch leer bleiben.</dd>
    <dt>Publikum\*</dt>
    <dd>
        Wer ist vom Termin betroffen?
    </dd>
    <dd>
        Zusätzlich zu den betroffenen Abteilungs- und Klassen(gruppen) kann auch angegeben werden, wer betroffen ist und ob der Regelunterricht tangiert wird.
    </dd>
    <dt>Betrifft</dt>
    <dd style={{marginBottom: '1.2em 0'}}>
        <AudienceOptionsField />
        Eine präzisere Übersicht findet sich [👉 weiter Unten](#betrifft)
    </dd>
    <dt>Unterricht betroffen?</dt>
    <dd>
        <TeachingAffectedField />
    </dd>
    <dt>Status</dt>
    <dd>
    Gibt an, ob der Termin veröffentlicht wurde oder nicht.
    </dd>
    <dd>
        <Badge 
            icon={EventStateButton.DRAFT}
            color={EventStateColor.DRAFT}
            title={EventStateTranslation.DRAFT}
            text={EventStateTranslation.DRAFT}
            iconSide='left'
            className={styles.badge}
        />  *Ein Termin, der noch nicht veröffentlicht wurde. Er ist nur für die Author\:in sichtbar.*
    </dd>
    <dd>
        <Badge 
            icon={EventStateButton.REVIEW}
            color={EventStateColor.REVIEW}
            title={EventStateTranslation.REVIEW}
            text={EventStateTranslation.REVIEW}
            iconSide='left'
            className={styles.badge}
        /> *Ein Termin, der zur Überprüfung eingereicht wurde. Er ist nur für die Author\:in und die Administratoren sichtbar.*
    </dd>
    <dd>
        <Badge 
            icon={EventStateButton.PUBLISHED}
            color={EventStateColor.PUBLISHED}
            title={EventStateTranslation.PUBLISHED}
            text={EventStateTranslation.PUBLISHED}
            iconSide='left'
            className={styles.badge}
        /> *Ein veröffentlichter Termin der für alle sichtbar ist.*
    </dd>
    <dd>
        <Badge 
            icon={EventStateButton.REFUSED}
            color={EventStateColor.REFUSED}
            title={EventStateTranslation.REFUSED}
            text={EventStateTranslation.REFUSED}
            iconSide='left'
            className={styles.badge}
        /> *Ein Termin, der abgelehnt wurde. Ist nur für die Author\:in und die Administratoren sichtbar.*
    </dd>
    <dd>
        :::warning[Veröffentlichte Termine]
        Ist ein Termin einmal veröffentlicht, so kann er nicht mehr direkt bearbeitet oder komplett gelöscht werden.
        - Gelöschte Termine werden in der Übersicht nicht mehr angezeigt, erscheinen aber weiterhin im abonnierten Kalender.
        - Änderungen führen stets zu einer neuen Version, wobei stets die aktuellste Version angezeigt wird.
        Anpassungen sind dadurch transparent nachvollziehbar.
        :::
    </dd>
</Dl>

\* Dies sind Pflichtfelder, die zwingend eingetragen werden müssen.

## Zur Überprüfung einreichen

Ein **neuer Termin** kann während einem offenen Eingabefenster zur Überprüfung eingereicht werden. Die Administrator\:innen werden benachrichtigt und prüfen den Termin. Nach der Veröffentlichung wird der Termin im Kalender angezeigt.

![](./images/event-window.png)

<Dl>
    <dt><Badge text="1" color="red" /></dt>
    <dd>Offene Eingabefenster sind farbig hinterlegt.</dd>
    <dt><Badge text="2" color="red" /></dt>
    <dd>In dieser Zeitspanne können neue Termine zur Überprüfung eingereicht werden</dd>
    <dt><Badge text="3" color="red" /></dt>
    <dd>Für diese Zeitspanne können die neuen Termine eingereicht werden.</dd>
    <dt><Badge text="4" color="red" /></dt>
    <dd>Eine dieser Abteilungen muss im eingereichten Termin vorkommen.</dd>
</Dl>

Die Eingabefenster werden von der Administration festgelegt und wie bisher in einer Orientierung kommuniziert.
Ein Eingabefenster ist vom Start- bis zum Enddatum offen und ermöglicht in dieser Zeit, **neue Termine** einzureichen. 

**Bestehende Termine** können auch ausserhalb der Eingabefenster aktualisiert werden, wobei Änderungen auch wieder von der Administration geprüft und veröffentlicht wird.

:::tip[Fehlerhafte Termine]
Wer fehlerhafte Angaben entdeckt, kann diese selber korrigieren und den Vorschlag zur Prüfung einreichen.
:::


## Betrifft
Schulische Termine betreffen __Lehrpersonen__, __Klassenlehrpersonen__, die __Schülerschaft__ oder __Alle__. Abhängig davon, für wen die Terimine erfasst wurden und ob der Stundenplanmässige Unterricht betroffen ist, werden sie im Terminplan angezeigt.

In der folgenden Tabelle ist eine Übersicht, wann ein Termin für die verschiedenen Zielgruppen angezeigt wird.

<table className={styles.audience}>
	<tbody>
		<tr>
			<td rowSpan="2" className={styles.left}><b>Der Termin...</b></td>
			<td colSpan="4">Wird der Termin für ... Angezeigt?</td>
		</tr>
		<tr>
			<td colSpan="2">Lehrperson</td>
			<td rowSpan="2">KLP der <br />betroffenen <br />Klasse</td>
			<td rowSpan="2">Schüler\:in</td>
		</tr>
		<tr>
            <td className={styles.left}>...ist während der Lektion?\*</td>
			<td>Ja</td>
			<td>Nein</td>
		</tr>
		<tr className={styles.line}>
			<td className={styles.left}>...für __Alle__</td>
			<td>✅</td>
			<td>✅</td>
			<td>✅</td>
			<td>✅</td>
		</tr>
		<tr>
			<td className={styles.left}>...für Schüler\:innen __SuS__</td>
			<td>✅</td>
			<td>◻️</td>
			<td>✅</td>
			<td>✅</td>
		</tr>
		<tr>
			<td className={styles.left}>...für Lehrpersonen __LP__</td>
			<td>✅</td>
			<td>✅</td>
			<td>✅</td>
			<td>◻️</td>
		</tr>
		<tr>
			<td className={styles.left}>...für Klassenlehrpersonen __KLP__</td>
			<td>◻️</td>
			<td>◻️</td>
			<td>✅</td>
			<td>◻️</td>
		</tr>
	</tbody>
</table>

\* Wenn ein Termin während einer Lektion im Regelstundenplan stattfindet (auch, wenn er während der Lektion Beginnt oder Endet), wird er für betroffene Lehrpersonen angezeigt.

## Künftige Klassen

Für Klassen oder Klassengruppen, die noch nicht in WebUntis geführt werden, können entsprechende Klassen bereits im Voraus hinterlegt werden.

<VideoGrid
    videos={[
        {
            src: require('./images/event-new-class.mp4').default,
            title: 'Zukünftige Klasse erfassen',
            autoplay: true,
            loop: true
        },
        {
            src: require('./images/event-new-class-group.mp4').default,
            title: 'Zukünftige Klassengruppe erfassen',
            autoplay: true,
            loop: true
        }
    ]}
/>