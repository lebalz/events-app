<!doctype html><html lang=de-CH dir=ltr class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-dev/events-api/api_web_server__express_js__" data-has-hydrated=false><meta charset=UTF-8><meta name=generator content="Docusaurus v3.7.0"><title data-rh=true>Chapter 3: API Web Server (Express.js) | Events</title><meta data-rh=true property=og:image content=https://events.gbsl.website/img/og-preview.jpeg><meta data-rh=true name=viewport content="width=device-width, initial-scale=1.0"><meta data-rh=true name=twitter:card content=summary_large_image><meta data-rh=true property=og:url content=https://events.gbsl.website/docs/dev/events-api/api_web_server__express_js__><meta data-rh=true property=og:locale content=de_CH><meta data-rh=true property=og:locale:alternate content=fr_CH><meta data-rh=true name=docusaurus_locale content=de><meta data-rh=true name=docsearch:language content=de><meta data-rh=true name=docusaurus_version content=current><meta data-rh=true name=docusaurus_tag content=docs-default-current><meta data-rh=true name=docsearch:version content=current><meta data-rh=true name=docsearch:docusaurus_tag content=docs-default-current><meta data-rh=true property=og:title content="Chapter 3: API Web Server (Express.js) | Events"><meta data-rh=true name=description content='Welcome back! In the first two chapters, we explored how our application stores data using Prisma (Database ORM (Prisma)) and how we organize the data-related logic within Models (Data Logic (Models)). These pieces handle the "behind-the-scenes" work with our database.'><meta data-rh=true property=og:description content='Welcome back! In the first two chapters, we explored how our application stores data using Prisma (Database ORM (Prisma)) and how we organize the data-related logic within Models (Data Logic (Models)). These pieces handle the "behind-the-scenes" work with our database.'><link data-rh=true rel=icon href=/img/favicon.ico><link data-rh=true rel=canonical href=https://events.gbsl.website/docs/dev/events-api/api_web_server__express_js__><link data-rh=true rel=alternate href=https://events.gbsl.website/docs/dev/events-api/api_web_server__express_js__ hreflang=de-CH><link data-rh=true rel=alternate href=https://events.gbsl.website/fr/docs/dev/events-api/api_web_server__express_js__ hreflang=fr-CH><link data-rh=true rel=alternate href=https://events.gbsl.website/docs/dev/events-api/api_web_server__express_js__ hreflang=x-default><link rel=icon href=/img/logo.png><link rel=manifest href=/manifest.json><meta name=theme-color content="rgb(0, 20, 117)"><meta name=apple-mobile-web-app-capable content=yes><meta name=apple-mobile-web-app-status-bar-style content=#000><link rel=apple-touch-icon href=/img/logo_x512.png><link rel=mask-icon href=/img/logo-light.svg color="rgb(0, 20, 117)"><meta name=msapplication-TileImage content=/img/logo_x512.png><meta name=msapplication-TileColor content=#000><script src="https://app.ruttl.com/plugin.js?id=zkNcmoSeOgS1ykIZJ5fl&e=1" id=ruttl-site-embed-script async defer></script><script src=https://umami.gbsl.website/tell-me.js data-website-id=575c1e8d-3c6d-45d9-a716-f7ad146761ab data-domains=events.gbsl.website async defer></script><link rel=stylesheet href=/assets/css/styles.140a09f7.css><script src=/assets/js/runtime~main.757f0ea7.js defer></script><script src=/assets/js/main.c5a95d79.js defer></script><body class=navigation-with-keyboard><script>!function(){var t,e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t=null!==e?e:"light",document.documentElement.setAttribute("data-theme",t)}(),function(){try{for(var[t,e]of new URLSearchParams(window.location.search).entries())if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id=__docusaurus><link rel=preload as=image href=/img/logo.svg><div data--isauthenticated=false></div><div role=region aria-label="Zum Hauptinhalt springen"><a class=skipToContent_fXgn href=#__docusaurus_skipToContent_fallback>Zum Hauptinhalt springen</a></div><div class=announcementBar_mb4j style=background-color:var(--color-current-week-odd-background);color:var(--ifm-font-color-base) role=banner><div class=announcementBarPlaceholder_vyr4></div><div class="content_knG7 announcementBarContent_xLdY">EinfÃ¼hrungsphase: rc-1.6</div><button type=button aria-label=SchlieÃŸen class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width=14 height=14><g stroke=currentColor stroke-width=3.1><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"/></g></svg></button></div><nav aria-label=Main class="navbar navbar--fixed-top"><div class=navbar__inner><div class=navbar__items><button aria-label="Toggle navigation bar" aria-expanded=false class="navbar__toggle clean-btn" type=button><svg width=30 height=30 viewBox="0 0 30 30" aria-hidden=true><path stroke=currentColor stroke-linecap=round stroke-miterlimit=10 stroke-width=2 d="M4 7h22M4 15h22M4 23h22"/></svg></button><a class=navbar__brand href=/><div class=navbar__logo><img src=/img/logo.svg alt="Events App" class="logo themedComponent_mlkZ themedComponent--light_NVdE"><img src=/img/logo.svg alt="Events App" class="logo themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Events</b></a><a class="navbar__item navbar__link" href=/calendar>Kalender</a><a class="navbar__item navbar__link" href=/table>Tabelle</a><a class="navbar__item navbar__link" href=/gantt>Zeitachse</a><a class="navbar__item navbar__link" href=/subscribe>Abonnieren</a></div><div class="navbar__items navbar__items--right"><a aria-current=page class="navbar__item navbar__link navbar__link--active" href=/docs>?</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href=# aria-haspopup=true aria-expanded=false role=button class=navbar__link><svg viewBox="0 0 24 24" width=20 height=20 aria-hidden=true class=iconLanguage_nlXk><path fill=currentColor d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"/></svg>Deutsch</a><ul class=dropdown__menu><li><a href=/docs/dev/events-api/api_web_server__express_js__ target=_self rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang=de-CH>Deutsch</a><li><a href=/fr/docs/dev/events-api/api_web_server__express_js__ target=_self rel="noopener noreferrer" class=dropdown__link lang=fr-CH>FranÃ§ais</a></ul></div><svg viewBox="0 0 24 24" style=width:1.5rem;height:1.5rem;transform:scaleX(-1);transform-origin:center role=presentation><style>@keyframes spin-inverse{0%{transform:rotate(0)}to{transform:rotate(-360deg)}}</style><g style="animation:spin-inverse linear 2s infinite;transform-origin:center"><path d="M12,4V2A10,10 0 0,0 2,12H4A8,8 0 0,1 12,4Z" style=fill:var(--ifm-color-primary) /></g></svg><div class=""><span aria-describedby=popup-56><span style=display:inline-block aria-describedby=popup-57><button type=button class="button__qfG reducedPadding_vpuK iconRight_alf5 button button--outline button--primary"><span class=spacer_lB2W></span><span class=icon_Ceyd><svg viewBox="0 0 24 24" style=width:1.5rem;height:1.5rem role=presentation><path d="M17.5,12A1.5,1.5 0 0,1 16,10.5A1.5,1.5 0 0,1 17.5,9A1.5,1.5 0 0,1 19,10.5A1.5,1.5 0 0,1 17.5,12M14.5,8A1.5,1.5 0 0,1 13,6.5A1.5,1.5 0 0,1 14.5,5A1.5,1.5 0 0,1 16,6.5A1.5,1.5 0 0,1 14.5,8M9.5,8A1.5,1.5 0 0,1 8,6.5A1.5,1.5 0 0,1 9.5,5A1.5,1.5 0 0,1 11,6.5A1.5,1.5 0 0,1 9.5,8M6.5,12A1.5,1.5 0 0,1 5,10.5A1.5,1.5 0 0,1 6.5,9A1.5,1.5 0 0,1 8,10.5A1.5,1.5 0 0,1 6.5,12M12,3A9,9 0 0,0 3,12A9,9 0 0,0 12,21A1.5,1.5 0 0,0 13.5,19.5C13.5,19.11 13.35,18.76 13.11,18.5C12.88,18.23 12.73,17.88 12.73,17.5A1.5,1.5 0 0,1 14.23,16H16A5,5 0 0,0 21,11C21,6.58 16.97,3 12,3Z" style=fill:currentColor /></svg></span><span class=spacer_lB2W></span></button></span></span></div><div><a href=/login>Login ðŸ”‘</a></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type=button disabled title="Umschalten zwischen dunkler und heller Ansicht (momentan heller Modus)" aria-label="Umschalten zwischen dunkler und heller Ansicht (momentan heller Modus)" aria-live=polite aria-pressed=false><svg viewBox="0 0 24 24" width=24 height=24 class=lightToggleIcon_pyhR><path fill=currentColor d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 class=darkToggleIcon_wfgR><path fill=currentColor d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"/></svg></button></div><div class=navbarSearchContainer_Bca1></div></div></div><div role=presentation class=navbar-sidebar__backdrop></div></nav><div id=__docusaurus_skipToContent_fallback class="main-wrapper mainWrapper_z2l0"><div class=docsWrapper_hBAB><button aria-label="ZurÃ¼ck nach oben scrollen" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type=button></button><div class=docRoot_UBD9><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class=sidebarViewport_aRkj><div class=sidebar_njMd><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/docs>Terminplan</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/docs/login>Anmelden</a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/docs/events>Termine</a><button aria-label="Expand sidebar category 'Termine'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/docs/betaphase>EinfÃ¼hrungsphase</a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role=button aria-expanded=true href=/docs/dev/intro>API Reference</a></div><ul style=display:block;overflow:visible;height:auto class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/dev/intro>Events App</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/dev/authentication>User Authentication</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/dev/database>Database</a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--active" tabindex=0 href=/docs/dev/events-api>Tutorial: events-api</a><button aria-label="Collapse sidebar category 'Tutorial: events-api'" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul style=display:block;overflow:visible;height:auto class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/dev/events-api/database_orm__prisma__>Chapter 1: Database ORM (Prisma)</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/dev/events-api/data_logic__models__>Chapter 2: Data Logic (Models)</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current=page tabindex=0 href=/docs/dev/events-api/api_web_server__express_js__>Chapter 3: API Web Server (Express.js)</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/dev/events-api/access_control__authentication___authorization__>Chapter 4: Access Control (Authentication & Authorization)</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/dev/events-api/request_handlers__controllers__>Chapter 5: Request Handlers (Controllers)</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/dev/events-api/external_data_sync_>Chapter 6: External Data Sync</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/dev/events-api/background_task_runner__bree__>Chapter 7: Background Task Runner (Bree)</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/dev/events-api/real_time_communication__socket_io__>real_time_communication__socket_io__</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/dev/events-api/notifications__email___socket_io__>Chapter 9: Notifications (Email & Socket.IO)</a></ul><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/dev/guide-fr>Mode d'emploi FR</a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" tabindex=0 href=/docs/dev/scenes>Scenes</a><button aria-label="Expand sidebar category 'Scenes'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false tabindex=0 href=/docs/dev/services/ics/images>Services</a></div></ul></ul></nav><button type=button title="Seitenleiste einklappen" aria-label="Seitenleiste einklappen" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width=20 height=20 aria-hidden=true class=collapseSidebarButtonIcon_kv0_><g fill=#7a7a7a><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"/><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"/></g></svg></button></div></div></aside><main class=docMainContainer_TBSr><div class="container padding-top--md padding-bottom--lg"><div class=row><div class="col docItemCol_VOVn"><div class=docItemContainer_Djhp><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label=Breadcrumbs><ul class=breadcrumbs itemscope itemtype=https://schema.org/BreadcrumbList><li class=breadcrumbs__item><a aria-label="Home page" class=breadcrumbs__link href=/><svg viewBox="0 0 24 24" class=breadcrumbHomeIcon_YNFT><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill=currentColor /></svg></a><li class=breadcrumbs__item><span class=breadcrumbs__link>API Reference</span><meta itemprop=position content=1><li itemscope itemprop=itemListElement itemtype=https://schema.org/ListItem class=breadcrumbs__item><a class=breadcrumbs__link itemprop=item href=/docs/dev/events-api><span itemprop=name>Tutorial: events-api</span></a><meta itemprop=position content=2><li itemscope itemprop=itemListElement itemtype=https://schema.org/ListItem class="breadcrumbs__item breadcrumbs__item--active"><span class=breadcrumbs__link itemprop=name>Chapter 3: API Web Server (Express.js)</span><meta itemprop=position content=3></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type=button class="clean-btn tocCollapsibleButton_TO0P">Auf dieser Seite</button></div><div class="theme-doc-markdown markdown"><header><h1>Chapter 3: API Web Server (Express.js)</h1></header>
<p>Welcome back! In the first two chapters, we explored how our application stores data using Prisma (<a href=/docs/dev/events-api/database_orm__prisma__>Database ORM (Prisma)</a>) and how we organize the data-related logic within Models (<a href=/docs/dev/events-api/data_logic__models__>Data Logic (Models)</a>). These pieces handle the "behind-the-scenes" work with our database.</p>
<p>But how does the outside world â€“ a user browsing a website or another application â€“ actually <em>tell</em> our <code>events-api</code> to perform tasks like "get all events" or "create a new department"?</p>
<p>This is where the <strong>API Web Server</strong> comes in.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=the-applications-front-door>The Application's Front Door<a href=#the-applications-front-door class=hash-link aria-label="Direkter Link zur The Application's Front Door" title="Direkter Link zur The Application's Front Door">â€‹</a></h2>
<p>Imagine our <code>events-api</code> project is like an office building containing different departments (the Models, the Prisma archive room, etc.). People outside the building (users, other apps) need a way to interact with it. They can't just walk directly into the Prisma archive room!</p>
<p>They need a clear channel for communication, a "front door" or a "receptionist" who:</p>
<ol>
<li><strong>Listens:</strong> Stands ready to receive incoming requests.</li>
<li><strong>Receives:</strong> Takes the request (like "I'd like to get a list of all public events").</li>
<li><strong>Understands:</strong> Figures out <em>what</em> the person is asking for and <em>where</em> they want to go. ("Okay, they want the list of events, that's handled by the Events department.").</li>
<li><strong>Directs:</strong> Sends the request to the correct department or expert worker within the building for processing.</li>
<li><strong>Sends Back:</strong> Receives the result from the department ("Here's the list of events") and sends it back to the person who asked for it.</li>
</ol>
<p>Our API Web Server plays this exact role. It's the engine that runs constantly, listening for inbound communication over the internet (HTTP requests), processing them, and sending back responses.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=introducing-expressjs-our-receptionist>Introducing Express.js: Our Receptionist<a href=#introducing-expressjs-our-receptionist class=hash-link aria-label="Direkter Link zur Introducing Express.js: Our Receptionist" title="Direkter Link zur Introducing Express.js: Our Receptionist">â€‹</a></h2>
<p>In the <code>events-api</code> project, we use <strong>Express.js</strong> as our web server framework. Express is a popular, minimalist framework for Node.js that makes it easy to build web applications and APIs. It provides the tools to handle the receptionist's tasks: listening, routing, and managing the flow of requests.</p>
<p>Think of Express as setting up our office building's front desk and internal mail system.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=how-express-works-simplified>How Express Works (Simplified)<a href=#how-express-works-simplified class=hash-link aria-label="Direkter Link zur How Express Works (Simplified)" title="Direkter Link zur How Express Works (Simplified)">â€‹</a></h2>
<p>Let's break down the core functions Express handles in our project:</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=1-listening-for-requests>1. Listening for Requests<a href=#1-listening-for-requests class=hash-link aria-label="Direkter Link zur 1. Listening for Requests" title="Direkter Link zur 1. Listening for Requests">â€‹</a></h3>
<p>Our application needs to start up and tell the computer to wait for incoming connections on a specific "port" number (like a phone extension).</p>
<p>This happens in <code>src/server.ts</code>:</p>
<div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-ts codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token comment" style=color:#999988;font-style:italic>// Simplified src\server.ts</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>import</span><span class="token plain"> app </span><span class="token keyword" style=color:#00009f>from</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>'./app'</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"> </span><span class="token comment" style=color:#999988;font-style:italic>// Our Express application instance</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>import</span><span class="token plain"> http </span><span class="token keyword" style=color:#00009f>from</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>'http'</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>import</span><span class="token plain"> Logger </span><span class="token keyword" style=color:#00009f>from</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>'./utils/logger'</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> </span><span class="token constant" style=color:#36acaa>PORT</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> process</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">env</span><span class="token punctuation" style=color:#393A34>.</span><span class="token constant" style=color:#36acaa>PORT</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>||</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>3002</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"> </span><span class="token comment" style=color:#999988;font-style:italic>// The port number the server will listen on</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> server </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> http</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>createServer</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">app</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"> </span><span class="token comment" style=color:#999988;font-style:italic>// Create an HTTP server using our Express app</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>// Start the server and make it listen on the specified port</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">server</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>listen</span><span class="token punctuation" style=color:#393A34>(</span><span class="token constant" style=color:#36acaa>PORT</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>||</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>3002</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    Logger</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>info</span><span class="token punctuation" style=color:#393A34>(</span><span class="token template-string template-punctuation string" style=color:#e3116c>`</span><span class="token template-string string" style=color:#e3116c>application is running at: http://localhost:</span><span class="token template-string interpolation interpolation-punctuation punctuation" style=color:#393A34>${</span><span class="token template-string interpolation constant" style=color:#36acaa>PORT</span><span class="token template-string interpolation interpolation-punctuation punctuation" style=color:#393A34>}</span><span class="token template-string template-punctuation string" style=color:#e3116c>`</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    Logger</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>info</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>'Press Ctrl+C to quit.'</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>// ... rest of the file setting up Socket.IO, etc.</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="In die Zwischenablage kopieren" title=Kopieren class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p><strong>Explanation:</strong></p>
<ul>
<li>We import the <code>app</code> instance, which is our configured Express application object.</li>
<li>We create a standard Node.js HTTP server using <code>http.createServer</code> and pass our Express <code>app</code> to it. Express basically acts as the handler for this server.</li>
<li><code>server.listen(PORT, ...)</code> is the command that tells the server to start listening on the specified port (commonly 3002 in development). From this moment on, it's ready to receive requests!</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=2-requests-and-responses-req-and-res>2. Requests and Responses (<code>req</code> and <code>res</code>)<a href=#2-requests-and-responses-req-and-res class=hash-link aria-label="Direkter Link zur 2-requests-and-responses-req-and-res" title="Direkter Link zur 2-requests-and-responses-req-and-res">â€‹</a></h3>
<p>When a request arrives (e.g., from your web browser fetching data), Express automatically creates two important objects for us:</p>
<ul>
<li><code>req</code> (Request): Contains all the information about the incoming request. This includes:<!-- -->
<ul>
<li>The URL the user is trying to access (e.g., <code>/api/v1/events</code>).</li>
<li>The HTTP method used (e.g., <code>GET</code>, <code>POST</code>, <code>PUT</code>).</li>
<li>Any data sent in the request body (e.g., details for creating a new event).</li>
<li>Information about the user's browser, cookies, etc.</li>
</ul>
</li>
<li><code>res</code> (Response): An object we use to build and send the response back to the user. We can use methods like:<!-- -->
<ul>
<li><code>res.status(200)</code>: Set the HTTP status code (e.g., 200 for success).</li>
<li><code>res.send('OK')</code>: Send a simple text response.</li>
<li><code>res.json({...})</code>: Send a JSON response (very common for APIs like ours).</li>
</ul>
</li>
</ul>
<p>These <code>req</code> and <code>res</code> objects are the standard way we interact with incoming requests and send responses in Express handlers.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=3-routing-directing-the-request>3. Routing: Directing the Request<a href=#3-routing-directing-the-request class=hash-link aria-label="Direkter Link zur 3. Routing: Directing the Request" title="Direkter Link zur 3. Routing: Directing the Request">â€‹</a></h3>
<p>The receptionist doesn't send <em>every</em> request to the same place. They look at <em>what</em> is being requested and then direct it. In Express, this is called <strong>Routing</strong>. Routing is the process of determining how an application responds to a client request to a particular endpoint, which is a URL path (like <code>/events</code> or <code>/users</code>) and a specific HTTP method (<code>GET</code>, <code>POST</code>, etc.).</p>
<p>In <code>events-api</code>, the core routing is defined in <code>src/routes/router.ts</code>. Requests typically come in with a prefix <code>/api/v1/</code>, which is handled slightly earlier in <code>src/app.ts</code>.</p>
<p>Let's look at a simplified piece of <code>src/app.ts</code> and <code>src/routes/router.ts</code>:</p>
<div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-ts codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token comment" style=color:#999988;font-style:italic>// Simplified src\app.ts</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>import</span><span class="token plain"> express </span><span class="token keyword" style=color:#00009f>from</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>'express'</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>// ... other imports like middleware ...</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>import</span><span class="token plain"> router </span><span class="token keyword" style=color:#00009f>from</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>'./routes/router'</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"> </span><span class="token comment" style=color:#999988;font-style:italic>// Our main router</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>// ... other imports ...</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> app </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>express</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"> </span><span class="token comment" style=color:#999988;font-style:italic>// Create the main Express application instance</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>export</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> </span><span class="token constant" style=color:#36acaa>API_VERSION</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>'v1'</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>export</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> </span><span class="token constant" style=color:#36acaa>API_URL</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style=color:#e3116c>`</span><span class="token template-string string" style=color:#e3116c>/api/</span><span class="token template-string interpolation interpolation-punctuation punctuation" style=color:#393A34>${</span><span class="token template-string interpolation constant" style=color:#36acaa>API_VERSION</span><span class="token template-string interpolation interpolation-punctuation punctuation" style=color:#393A34>}</span><span class="token template-string template-punctuation string" style=color:#e3116c>`</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"> </span><span class="token comment" style=color:#999988;font-style:italic>// Defines the common API prefix</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>// ... middleware setup (like express.json(), session, passport) ...</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>// This line tells Express to use our 'router' for any requests</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>// that start with the API_URL prefix (e.g., /api/v1/...)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">app</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>use</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token template-string template-punctuation string" style=color:#e3116c>`</span><span class="token template-string interpolation interpolation-punctuation punctuation" style=color:#393A34>${</span><span class="token template-string interpolation constant" style=color:#36acaa>API_URL</span><span class="token template-string interpolation interpolation-punctuation punctuation" style=color:#393A34>}</span><span class="token template-string template-punctuation string" style=color:#e3116c>`</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">req</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> res</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> next</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"> </span><span class="token comment" style=color:#999988;font-style:italic>/* ... authentication logic ... */</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>next</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">req</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> res</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> next</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"> </span><span class="token comment" style=color:#999988;font-style:italic>/* ... authorization logic via routeGuard(AccessRules) ... */</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>next</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    router </span><span class="token comment" style=color:#999988;font-style:italic>// Attach the router here</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>// ... error handling middleware ...</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>export</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>default</span><span class="token plain"> app</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"> </span><span class="token comment" style=color:#999988;font-style:italic>// Export the app for src/server.ts to use</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="In die Zwischenablage kopieren" title=Kopieren class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-ts codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token comment" style=color:#999988;font-style:italic>// Simplified src\routes\router.ts</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>import</span><span class="token plain"> express </span><span class="token keyword" style=color:#00009f>from</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>'express'</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>import</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    all </span><span class="token keyword" style=color:#00009f>as</span><span class="token plain"> allEvents</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token comment" style=color:#999988;font-style:italic>// This is the function that handles GET /events</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    create </span><span class="token keyword" style=color:#00009f>as</span><span class="token plain"> createEvent</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token comment" style=color:#999988;font-style:italic>// ... other event controller functions ...</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>from</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>'../controllers/events'</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"> </span><span class="token comment" style=color:#999988;font-style:italic>// Functions that handle specific requests are often called 'controllers'</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>// Initialize an Express Router instance</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> router </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> express</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Router</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>// Define a route:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>// When a GET request comes in for '/events',</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>// call the `allEvents` function.</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>// Remember, this router is already mounted under /api/v1 by app.ts,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>// so the full path is /api/v1/events</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">router</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>get</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>'/events'</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> allEvents</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>// Another example:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>// When a POST request comes in for '/events',</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>// call the `createEvent` function.</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">router</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>post</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>'/events'</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> createEvent</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>// ... many other routes defined here ...</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>export</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>default</span><span class="token plain"> router</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"> </span><span class="token comment" style=color:#999988;font-style:italic>// Export the router</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="In die Zwischenablage kopieren" title=Kopieren class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p><strong>Explanation:</strong></p>
<ul>
<li>In <code>src/app.ts</code>, we create the main <code>app</code> and specify that for any path starting with <code>/api/v1</code>, Express should hand over control to our <code>router</code> object <em>after</em> applying some middleware (we'll get to that next).</li>
<li>In <code>src/routes/router.ts</code>, we define specific routes on the <code>router</code> instance. <code>router.get('/events', allEvents)</code> tells Express: "If the request is a <code>GET</code> request and the <em>rest</em> of the path (after <code>/api/v1</code>) is <code>/events</code>, then execute the <code>allEvents</code> function".</li>
</ul>
<p>The <code>allEvents</code> function (and others like <code>createEvent</code>) contains the code logic to actually <em>do</em> something with the request, like fetching data from the database via a Model. These functions are often called <strong>Request Handlers</strong> or <strong>Controllers</strong>, and we'll discuss them fully in <a href=/docs/dev/events-api/request_handlers__controllers__>Request Handlers (Controllers)</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=4-middleware-processing-layers>4. Middleware: Processing Layers<a href=#4-middleware-processing-layers class=hash-link aria-label="Direkter Link zur 4. Middleware: Processing Layers" title="Direkter Link zur 4. Middleware: Processing Layers">â€‹</a></h3>
<p>The receptionist might have various quick tasks to perform before or after sending a request to a department. Maybe they log every incoming request, check if the visitor has an appointment (authentication), or make sure they understand who they are speaking to (session management).</p>
<p>In Express, this is handled by <strong>Middleware</strong>. Middleware are functions that have access to the <code>req</code> and <code>res</code> objects and the <code>next()</code> function in the application's request-response cycle. They can:</p>
<ul>
<li>Execute any code.</li>
<li>Make changes to the request and the response objects.</li>
<li>End the request-response cycle.</li>
<li>Call the next middleware function in the stack.</li>
</ul>
<p>Middleware functions are like layers that the request passes through on its way to the final route handler. They are typically applied using <code>app.use()</code> or <code>router.use()</code>.</p>
<p>Look again at the snippet from <code>src/app.ts</code>:</p>
<div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-ts codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token comment" style=color:#999988;font-style:italic>// from src\app.ts</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>// ... other imports ...</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>import</span><span class="token plain"> morganMiddleware </span><span class="token keyword" style=color:#00009f>from</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>'./middlewares/morgan.middleware'</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"> </span><span class="token comment" style=color:#999988;font-style:italic>// Our logging middleware</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>import</span><span class="token plain"> router </span><span class="token keyword" style=color:#00009f>from</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>'./routes/router'</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"> </span><span class="token comment" style=color:#999988;font-style:italic>// Our main router</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>// Authentication and Authorization middleware (Passport, routeGuard)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>import</span><span class="token plain"> passport </span><span class="token keyword" style=color:#00009f>from</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>'passport'</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>import</span><span class="token plain"> routeGuard</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"> createAccessRules </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>from</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>'./auth/guard'</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>import</span><span class="token plain"> authConfig </span><span class="token keyword" style=color:#00009f>from</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>'./routes/authConfig'</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>// Session middleware setup (simplified)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>import</span><span class="token plain"> session </span><span class="token keyword" style=color:#00009f>from</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>'express-session'</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>// JSON body parsing middleware</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>import</span><span class="token plain"> express </span><span class="token keyword" style=color:#00009f>from</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>'express'</span><span class="token plain"> </span><span class="token comment" style=color:#999988;font-style:italic>// already imported</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> app </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>express</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> AccessRules </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>createAccessRules</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">authConfig</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">accessMatrix</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>// --- Examples of Middleware ---</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>// Middleware 1: Enable CORS (allows requests from different origins)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">app</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>use</span><span class="token punctuation" style=color:#393A34>(</span><span class="token function" style=color:#d73a49>cors</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"> </span><span class="token comment" style=color:#999988;font-style:italic>/* ... config ... */</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>// Middleware 2: Parse incoming JSON request bodies</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">app</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>use</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">express</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>json</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>// Middleware 3: Log incoming requests</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">app</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>use</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">morganMiddleware</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>// Middleware 4 & 5: Setup session and passport for authentication</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">app</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>use</span><span class="token punctuation" style=color:#393A34>(</span><span class="token function" style=color:#d73a49>session</span><span class="token punctuation" style=color:#393A34>(</span><span class="token comment" style=color:#999988;font-style:italic>/* ... config ... */</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">app</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>use</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">passport</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>initialize</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">app</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>use</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">passport</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>session</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>// Middleware & Router: For paths starting /api/v1:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">app</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>use</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token template-string template-punctuation string" style=color:#e3116c>`</span><span class="token template-string interpolation interpolation-punctuation punctuation" style=color:#393A34>${</span><span class="token template-string interpolation constant" style=color:#36acaa>API_URL</span><span class="token template-string interpolation interpolation-punctuation punctuation" style=color:#393A34>}</span><span class="token template-string template-punctuation string" style=color:#e3116c>`</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token comment" style=color:#999988;font-style:italic>// The path this segment of middleware/router applies to</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">req</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> res</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> next</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"> </span><span class="token comment" style=color:#999988;font-style:italic>/* isAuthenticated logic using passport */</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>next</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token comment" style=color:#999988;font-style:italic>// Authentication check</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token function" style=color:#d73a49>routeGuard</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">AccessRules</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token comment" style=color:#999988;font-style:italic>// Authorization check using our guardian</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    router </span><span class="token comment" style=color:#999988;font-style:italic>// Our main router (if request passes previous middleware)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>// ... other app logic ...</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="In die Zwischenablage kopieren" title=Kopieren class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p><strong>Explanation:</strong></p>
<ul>
<li><code>app.use(cors(...))</code>: This middleware adds special headers to the response to allow web pages from other domains to talk to our API.</li>
<li><code>app.use(express.json())</code>: This essential middleware intercepts incoming requests with JSON data in the body, parses it, and makes it available on <code>req.body</code>. Without this, <code>req.body</code> would be undefined!</li>
<li><code>app.use(morganMiddleware)</code>: As seen in <code>src/middlewares/morgan.middleware.ts</code>, this middleware logs details about every incoming HTTP request (method, URL, status, response time) to the console.</li>
<li><code>app.use(session(...))</code> and <code>app.use(passport.initialize())</code>, <code>app.use(passport.session())</code>: These middlewares are part of setting up user sessions and authentication, allowing the server to remember who a user is across multiple requests. We'll cover authentication more in <a href=/docs/dev/events-api/access_control__authentication___authorization__>Access Control (Authentication & Authorization)</a>.</li>
<li>The middlewares applied specifically to the <code>API_URL</code> (<code>/api/v1</code>) handle authentication (checking if the user is logged in) and authorization (checking if the logged-in user has permission to access the specific path and method, using <code>routeGuard</code> based on <code>AccessRules</code>).</li>
</ul>
<p>Middleware forms a pipeline. A request arrives, passes through <code>cors</code>, then <code>express.json</code>, then <code>morganMiddleware</code>, then session/passport middleware, and then if the path starts with <code>/api/v1</code>, it hits the authentication, authorization (<code>routeGuard</code>), and finally, if authorized, the <code>router</code> to find the <em>specific</em> route handler.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=walking-through-a-request-get-apiv1events>Walking Through a Request: <code>GET /api/v1/events</code><a href=#walking-through-a-request-get-apiv1events class=hash-link aria-label="Direkter Link zur walking-through-a-request-get-apiv1events" title="Direkter Link zur walking-through-a-request-get-apiv1events">â€‹</a></h2>
<p>Let's trace what happens when a browser or client application sends a <code>GET</code> request to <code>http://your-api-url/api/v1/events</code>:</p>
<ol>
<li><strong>Server Receives:</strong> The <code>server.listen</code> in <code>src/server.ts</code> detects an incoming request on the specified port.</li>
<li><strong>Express Takes Over:</strong> The request is handed to our Express <code>app</code> instance.</li>
<li><strong>Middleware Pipeline:</strong> The request starts passing through the middleware defined in <code>src/app.ts</code>:<!-- -->
<ul>
<li><code>cors</code> processes (adds headers).</li>
<li><code>express.json</code> processes (finds no JSON body for a GET request, but is ready if there was one).</li>
<li><code>morganMiddleware</code> logs the request line (<code>GET /api/v1/events ...</code>).</li>
<li><code>session</code> and <code>passport</code> process (look for session cookie, try to identify the user - this is crucial before authorization).</li>
<li>The path <code>/api/v1/events</code> matches the <code>app.use(`${API_URL}`, ...)</code> block.</li>
<li>The authentication middleware checks if <code>req.isAuthenticated()</code> is true based on the session/passport work.</li>
<li>Assuming the user is authenticated, the <code>routeGuard(AccessRules)</code> middleware checks if this user's role/identity has permission to perform a <code>GET</code> request on <code>/api/v1/events</code> according to the rules defined in <code>authConfig</code>.</li>
</ul>
</li>
<li><strong>Routing:</strong> If the request passes the middleware (especially the <code>routeGuard</code>), it reaches the <code>router</code>. The <code>router</code> looks for a definition that matches <code>GET /events</code> (relative to its mount path <code>/api/v1</code>). It finds <code>router.get('/events', allEvents);</code>.</li>
<li><strong>Handler/Controller Executed:</strong> The <code>allEvents</code> function from <code>src/controllers/events.ts</code> is called. This function receives the <code>req</code> and <code>res</code> objects.</li>
<li><strong>Data Logic (Model):</strong> Inside <code>allEvents</code>, it will likely call <code>await Events.all(req.user)</code>, using the Model we discussed in <a href=/docs/dev/events-api/data_logic__models__>Data Logic (Models)</a>.</li>
<li><strong>Database Interaction (Prisma):</strong> The <code>Events.all()</code> Model function uses Prisma client methods like <code>prisma.event.findMany(...)</code> (<a href=/docs/dev/events-api/database_orm__prisma__>Database ORM (Prisma)</a>) to query the database.</li>
<li><strong>Response Built:</strong> The database results go back to the Model, potentially processed, then returned to the <code>allEvents</code> handler/controller. The controller then uses <code>res.json(...)</code> to format the data as JSON and sends it back.</li>
<li><strong>Response Sent:</strong> The response travels back through any <em>post</em>-processing middleware (none explicitly shown here, but possible) and eventually back over the internet to the client that made the request.</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=under-the-hood-the-flow>Under the Hood: The Flow<a href=#under-the-hood-the-flow class=hash-link aria-label="Direkter Link zur Under the Hood: The Flow" title="Direkter Link zur Under the Hood: The Flow">â€‹</a></h2>
<p>Here's a simple sequence diagram showing the journey of that <code>GET /api/v1/events</code> request through the layers we've discussed and will discuss:</p>
<!-- -->
<p>This diagram illustrates how Express acts as the central point, receiving the request and orchestrating its journey through middleware for processing before it reaches the specific code (the Controller -> Model -> Prisma) designed to fulfill the request's purpose.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=conclusion>Conclusion<a href=#conclusion class=hash-link aria-label="Direkter Link zur Conclusion" title="Direkter Link zur Conclusion">â€‹</a></h2>
<p>The API Web Server, powered by Express.js in our project, is the essential component that makes our <code>events-api</code> accessible from the internet. It constantly <em>listens</em> for requests, <em>routes</em> them to the correct handling code based on the URL and method, and manages a pipeline of <em>middleware</em> to perform common tasks like logging, processing request bodies, handling user sessions, and most importantly, checking who the user is and if they are allowed to do what they are asking.</p>
<p>While the web server receives and directs, the actual decision of <em>whether</em> a user is allowed to access a specific resource is a critical responsibility that often happens within the middleware layer before the request even reaches the final handler. This is the concept of Access Control, which we will explore in the next chapter.</p>
<p><a href=/docs/dev/events-api/access_control__authentication___authorization__>Next Chapter: Access Control (Authentication & Authorization)</a></p>
<hr>
<p>Generated by <a href=https://github.com/The-Pocket/Tutorial-Codebase-Knowledge target=_blank rel="noopener noreferrer">AI Codebase Knowledge Builder</a></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class=col><a href=https://github.com/lebalz/events-app/edit/main/10-dev/events-api/03_api_web_server__express_js__.md target=_blank rel="noopener noreferrer" class=theme-edit-this-page><svg fill=currentColor height=20 width=20 viewBox="0 0 40 40" class=iconEdit_Z9Sw aria-hidden=true><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"/></g></svg>Diese Seite bearbeiten</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Dokumentation Seiten"><a class="pagination-nav__link pagination-nav__link--prev" href=/docs/dev/events-api/data_logic__models__><div class=pagination-nav__sublabel>ZurÃ¼ck</div><div class=pagination-nav__label>Chapter 2: Data Logic (Models)</div></a><a class="pagination-nav__link pagination-nav__link--next" href=/docs/dev/events-api/access_control__authentication___authorization__><div class=pagination-nav__sublabel>Weiter</div><div class=pagination-nav__label>Chapter 4: Access Control (Authentication & Authorization)</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href=#the-applications-front-door class="table-of-contents__link toc-highlight">The Application's Front Door</a><li><a href=#introducing-expressjs-our-receptionist class="table-of-contents__link toc-highlight">Introducing Express.js: Our Receptionist</a><li><a href=#how-express-works-simplified class="table-of-contents__link toc-highlight">How Express Works (Simplified)</a><ul><li><a href=#1-listening-for-requests class="table-of-contents__link toc-highlight">1. Listening for Requests</a><li><a href=#2-requests-and-responses-req-and-res class="table-of-contents__link toc-highlight">2. Requests and Responses (<code>req</code> and <code>res</code>)</a><li><a href=#3-routing-directing-the-request class="table-of-contents__link toc-highlight">3. Routing: Directing the Request</a><li><a href=#4-middleware-processing-layers class="table-of-contents__link toc-highlight">4. Middleware: Processing Layers</a></ul><li><a href=#walking-through-a-request-get-apiv1events class="table-of-contents__link toc-highlight">Walking Through a Request: <code>GET /api/v1/events</code></a><li><a href=#under-the-hood-the-flow class="table-of-contents__link toc-highlight">Under the Hood: The Flow</a><li><a href=#conclusion class="table-of-contents__link toc-highlight">Conclusion</a></ul></div></div></div></div></main></div></div><div id=popup-root></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class=footer__title>Events</div><ul class="footer__items clean-list"><li class=footer__item><a class=footer__link-item href=/calendar>Kalender</a><li class=footer__item><a class=footer__link-item href=/table>Tabelle</a><li class=footer__item><a class=footer__link-item href=/gantt>Gantt</a></ul></div><div class="col footer__col"><div class=footer__title>Admin</div><ul class="footer__items clean-list"><li class=footer__item><a class=footer__link-item href=/admin>Dashboard</a><li class=footer__item><a class=footer__link-item href=/import>Import</a><li class=footer__item><a class=footer__link-item href=/docs>Dokumentation</a></ul></div><div class="col footer__col"><div class=footer__title>Links</div><ul class="footer__items clean-list"><li class=footer__item><a href=https://www.gbsl.ch target=_blank rel="noopener noreferrer" class=footer__link-item>GBSL<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPIU><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a><li class=footer__item><a href=https://gbjb.ch target=_blank rel="noopener noreferrer" class=footer__link-item>GBJB<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPIU><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a><li class=footer__item><a href=https://github.com/lebalz/events-app target=_blank rel="noopener noreferrer" class=footer__link-item>GitHub<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPIU><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a><li class=footer__item><a href=https://admin.socket.io/ target=_blank rel="noopener noreferrer" class=footer__link-item>Socket.IO Dashboard<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPIU><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a></ul></div></div><div class="footer__bottom text--center"><div class=footer__copyright>Copyright Â© 2025 B. Hofer <br>
          <span class=translator-de>Ãœbersetzt von G. Andonie</span><br>
          <a class="badge badge--primary" href=https://github.com/lebalz/events-app/commit/da2d76729540905576cadd84dd9506d9b20cc010>
            áš¶ da2d767
          </a>
          </div></div></div></footer></div>